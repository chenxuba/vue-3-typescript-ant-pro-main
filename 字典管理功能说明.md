# 字典管理功能说明

## 功能概述

字典管理模块提供了系统字典的统一管理功能，包括字典类型和字典项的增删改查操作。采用左右分栏设计，左侧管理字典类型，右侧管理对应的字典项。

## 功能特点

### 1. 字典类型管理
- ✅ 查看字典类型列表
- ✅ 搜索字典类型
- ✅ 新建字典类型
- ✅ 编辑字典类型
- ✅ 删除字典类型
- ✅ 状态管理（启用/禁用）
- ✅ 排序功能

### 2. 字典项管理
- ✅ 查看字典项列表（分页）
- ✅ 筛选查询（标签、值、状态）
- ✅ 新建字典项
- ✅ 编辑字典项
- ✅ 删除字典项
- ✅ 批量删除
- ✅ 状态管理（启用/禁用）
- ✅ 排序功能

## 文件结构

```
vue-3-typescript-ant-pro-main/
├── src/
│   ├── api/
│   │   └── system/
│   │       └── dictionary.ts                 # 字典管理 API 接口
│   ├── pages/
│   │   └── dashboard/
│   │       └── system-management/
│   │           └── dictionary-management.vue # 字典管理页面
│   ├── router/
│   │   └── dynamic-routes.ts                 # 路由配置（已添加字典管理路由）
│   └── utils/
│       └── constant.ts                       # 权限枚举（已添加字典管理权限）
└── servers/
    └── routes/
        └── dictionary/                       # Mock API 路由
            ├── type/                          # 字典类型相关接口
            │   ├── list.post.ts              # 获取字典类型列表
            │   ├── all.get.ts                # 获取所有字典类型
            │   ├── [id].get.ts               # 获取字典类型详情
            │   ├── create.post.ts            # 创建字典类型
            │   ├── [id].put.ts               # 更新字典类型
            │   └── [id].delete.ts            # 删除字典类型
            └── item/                          # 字典项相关接口
                ├── list.post.ts              # 获取字典项列表
                ├── type/
                │   └── [typeCode].get.ts     # 根据类型编码获取字典项
                ├── [id].get.ts               # 获取字典项详情
                ├── create.post.ts            # 创建字典项
                ├── [id].put.ts               # 更新字典项
                └── [id].delete.ts            # 删除字典项
```

## 数据模型

### 字典类型（DictionaryTypeModel）

```typescript
interface DictionaryTypeModel {
  id?: string | number          // 字典类型ID
  typeName: string               // 字典类型名称
  typeCode: string               // 字典类型编码（唯一）
  description?: string           // 描述
  status: number                 // 状态（1: 启用, 0: 禁用）
  sort: number                   // 排序
  createTime?: string | number   // 创建时间
  updateTime?: string | number   // 更新时间
}
```

### 字典项（DictionaryItemModel）

```typescript
interface DictionaryItemModel {
  id?: string | number          // 字典项ID
  typeId: string | number       // 字典类型ID
  typeCode?: string             // 字典类型编码
  label: string                 // 字典项标签（显示值）
  value: string                 // 字典项值（实际值）
  description?: string          // 描述
  status: number                // 状态（1: 启用, 0: 禁用）
  sort: number                  // 排序
  createTime?: string | number  // 创建时间
  updateTime?: string | number  // 更新时间
}
```

## API 接口说明

### 字典类型接口

| 接口名称 | 请求方法 | 路径 | 说明 |
|---------|---------|------|------|
| 获取字典类型列表 | POST | `/dictionary/type/list` | 分页获取字典类型列表 |
| 获取所有字典类型 | GET | `/dictionary/type/all` | 获取所有启用的字典类型 |
| 获取字典类型详情 | GET | `/dictionary/type/:id` | 获取指定字典类型详情 |
| 创建字典类型 | POST | `/dictionary/type/create` | 创建新的字典类型 |
| 更新字典类型 | PUT | `/dictionary/type/:id` | 更新指定字典类型 |
| 删除字典类型 | DELETE | `/dictionary/type/:id` | 删除指定字典类型 |

### 字典项接口

| 接口名称 | 请求方法 | 路径 | 说明 |
|---------|---------|------|------|
| 获取字典项列表 | POST | `/dictionary/item/list` | 分页获取字典项列表 |
| 根据类型编码获取字典项 | GET | `/dictionary/item/type/:typeCode` | 根据类型编码获取字典项 |
| 获取字典项详情 | GET | `/dictionary/item/:id` | 获取指定字典项详情 |
| 创建字典项 | POST | `/dictionary/item/create` | 创建新的字典项 |
| 更新字典项 | PUT | `/dictionary/item/:id` | 更新指定字典项 |
| 删除字典项 | DELETE | `/dictionary/item/:id` | 删除指定字典项 |

## 使用示例

### 1. 在其他模块中使用字典数据

```typescript
import { getDictionaryItemsByTypeCodeApi } from '@/api/system/dictionary'

// 获取用户性别字典
const genderOptions = ref([])

const fetchGenderOptions = async () => {
  const result = await getDictionaryItemsByTypeCodeApi('user_gender')
  if (result.data) {
    genderOptions.value = result.data
  }
}

// 在模板中使用
<a-select v-model:value="gender" placeholder="请选择性别">
  <a-select-option 
    v-for="item in genderOptions" 
    :key="item.value" 
    :value="item.value"
  >
    {{ item.label }}
  </a-select-option>
</a-select>
```

### 2. 预设字典类型

系统已预设以下字典类型（Mock 数据）：

1. **用户性别** (`user_gender`)
   - 男 (male)
   - 女 (female)
   - 保密 (secret)

2. **用户状态** (`user_status`)
   - 正常 (active)
   - 禁用 (disabled)
   - 锁定 (locked)

3. **订单状态** (`order_status`)
   - 待支付 (pending)
   - 已支付 (paid)
   - 已发货 (shipped)
   - 已完成 (completed)
   - 已取消 (cancelled)

4. **支付方式** (`payment_method`)
   - 微信支付 (wechat)
   - 支付宝 (alipay)
   - 银行卡 (bank_card)
   - 现金 (cash)

5. **数据权限** (`data_permission`)
   - 全部数据 (all)
   - 本单位及下属单位 (org_and_sub)
   - 仅本单位 (org_only)
   - 仅本人 (self_only)

6. **通知类型** (`notice_type`) - 已禁用

## 权限配置

字典管理功能需要以下权限：

- `system:view` - 系统管理模块查看权限
- `system:dictionary:view` - 字典管理查看权限

在 `/src/utils/constant.ts` 中已定义相关权限枚举：

```typescript
export enum AccessEnum {
  SYSTEM_VIEW = 'system:view',
  SYSTEM_DICTIONARY_VIEW = 'system:dictionary:view',
}
```

## 访问路径

在系统中访问字典管理页面：

1. 登录系统
2. 进入"系统管理"菜单
3. 点击"字典管理"子菜单
4. 路径：`/system-management/dictionary-management`

## 页面布局

```
┌─────────────────────────────────────────────────────────┐
│                    字典管理                              │
├──────────────┬──────────────────────────────────────────┤
│              │                                           │
│  字典类型     │         字典类型详情                      │
│  列表         │                                           │
│              │  筛选查询                                  │
│  [搜索框]     │  ┌─────────────────────────────────┐     │
│              │  │ 标签 值 状态 [查询] [重置]       │     │
│  ┌─────────┐ │  └─────────────────────────────────┘     │
│  │ 类型1   │ │                                           │
│  │ 类型2   │ │  数据列表                                 │
│  │ ...     │ │  ┌─────────────────────────────────┐     │
│  └─────────┘ │  │ 字典项表格（支持分页）            │     │
│              │  │                                  │     │
│  [+ 新建]    │  │ [+ 新建字典项] [批量删除]        │     │
│              │  └─────────────────────────────────┘     │
└──────────────┴──────────────────────────────────────────┘
```

## 设计特点

1. **左右分栏布局**：清晰的层级结构，左侧选择类型，右侧管理对应的字典项
2. **渐变色主题**：使用紫色渐变主题，与项目整体风格保持一致
3. **响应式交互**：hover 效果、选中状态、加载状态等交互体验优良
4. **完整的 CRUD 操作**：支持完整的增删改查功能
5. **状态管理**：支持启用/禁用状态切换
6. **搜索过滤**：支持快速搜索和多条件筛选
7. **分页支持**：字典项列表支持分页，适应大数据量场景

## 注意事项

1. **类型编码唯一性**：字典类型编码（typeCode）应保持唯一，建议使用下划线命名法（如：`user_gender`）
2. **删除限制**：删除字典类型时，会同时删除该类型下的所有字典项，操作需谨慎
3. **状态影响**：禁用的字典类型或字典项在业务中应该不可选
4. **排序规则**：数字越小，排序越靠前

## 后续扩展建议

1. 支持字典项的导入导出功能
2. 添加字典使用情况统计
3. 支持字典版本管理
4. 添加字典缓存机制，提升性能
5. 支持多语言字典配置

