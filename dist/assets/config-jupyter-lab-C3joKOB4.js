import{d as ft,ab as mt,f as c,o as yt,w as ke,c as gt,a0 as y,a3 as p,a1 as n,k as t,af as T,a9 as l,F as L,aj as se,G as u,a8 as q,u as S,H as _t,a4 as bt,ac as I,ae as wt,y as he}from"./vue-CHyeelTQ.js";import{u as ne}from"./file-OCqe0a9d.js";import{a as re,b as kt,f as Te,h as ht}from"./index-BTMuraQ9.js";import{H as F,j as Tt,t as Ct,x as ue,c as Ut,a as xt,m as Rt,u as Lt,F as Ft,b as Pt,R as qt,N as St,d as Mt}from"./useFileTree-BJrhF2LQ.js";import{R as Ce}from"./RichTextEditor-CUfjy-K-.js";import{ab as jt,ac as Jt,Q as At,U as It,ad as Vt,ae as Nt,v as Dt,af as Bt,ag as Ht,aj as Et,ah as Ot,G as zt,Z as $t,$ as Gt,x as Kt,a7 as Qt,M as Wt,e as Zt,D as Xt,J as Yt,ai as ea,T as ta,w as aa,aa as r}from"./antd-7EK-EoHB.js";import{_ as la}from"./index-D5vtKjRx.js";const oa={class:"config-jupyter-lab-page"},sa={class:"page-container"},na={class:"steps-section"},ra={key:0},ua={class:"form-section"},ia={class:"flex items-top gap-16px"},da={class:"flex flex-col gap-12px"},va={key:0,class:"image-preview"},pa=["src"],ca={class:"flex items-top gap-16px"},fa={class:"flex flex-col gap-12px"},ma={key:0,class:"image-preview"},ya=["src"],ga={class:"form-section"},_a={key:1},ba={class:"form-section repository-section"},wa={class:"repository-top-bar flex items-center gap-16px justify-between"},ka={class:"repository-url-group"},ha={class:"repository-main-area"},Ta={class:"repository-left"},Ca={class:"repository-switch-box flex items-center justify-between"},Ua={class:"flex items-center gap-12px"},xa={key:1,class:"repository-tips"},Ra={class:"repository-right"},La={key:1,class:"empty-area"},Fa={key:2,class:"step-content evaluation-step"},Pa={class:"evaluation-section"},qa={class:"section-block"},Sa={class:"block-content"},Ma={style:{display:"flex","align-items":"center",gap:"8px"}},ja={key:0,class:"section-block"},Ja={class:"block-header"},Aa={class:"header-actions"},Ia={class:"block-content"},Va={class:"test-set-label"},Na={class:"tab-footer-buttons"},Da={class:"reference-section"},Ba={class:"section-block"},Ha={class:"block-content"},Ea={class:"tab-footer-buttons"},Oa={key:3,class:"step-content environment-step"},za={class:"environment-section"},$a={class:"environment-container"},Ga={class:"environment-left"},Ka={class:"search-box"},Qa={class:"environment-list"},Wa=["onClick"],Za={class:"environment-right"},Xa={class:"environment-config-header"},Ya={style:{display:"flex","align-items":"center",gap:"8px"}},el={class:"page-footer"},Ue="http://101.200.13.193",tl=ft({name:"ConfigJupyterLab",__name:"config-jupyter-lab",setup(al){F.registerLanguage("javascript",Tt),F.registerLanguage("typescript",Ct),F.registerLanguage("xml",ue),F.registerLanguage("html",ue),F.registerLanguage("vue",ue),F.registerLanguage("css",Ut),F.registerLanguage("json",xt),F.registerLanguage("markdown",Rt);const ie=mt(),_=c(0),b=c(null),C=c(null),V=c(),de=c(),G=c(""),K=c(""),N=c(!1),D=c(!1),o=c({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1,enableCodeRepository:!1,repositoryType:"代码仓库",gitUrl:""});yt(()=>{var e;const a=history.state;console.log("接收到的路由数据:",a),a&&a.name?(o.value.name=a.name||"",o.value.description=a.description||"",o.value.difficulty=a.difficulty||1,o.value.environment=a.environment,o.value.secondType=a.secondType,o.value.classHour=a.classHour||"",o.value.showTaskRequire=a.showTaskRequire||!1,console.log("已自动填充表单数据:",{name:o.value.name,description:o.value.description,descriptionLength:((e=o.value.description)==null?void 0:e.length)||0,difficulty:o.value.difficulty,environment:o.value.environment,secondType:o.value.secondType,classHour:o.value.classHour,showTaskRequire:o.value.showTaskRequire})):console.log("未接收到路由数据")}),ke(_,async(a,e)=>{a===2&&e===1&&!C.value&&b.value&&(console.log("进入第三步，自动创建任务..."),await ot())});const ve={name:[{required:!0,message:"请输入名称",trigger:"blur"}],tag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],fieldType:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}],secondType:[{required:!0,message:"请选择小类别",trigger:"change"}],classHour:[{required:!0,message:"请输入学时",trigger:"blur"}],topCover:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],authType:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},xe=[{label:"人工智能",value:1},{label:"大数据",value:2},{label:"云计算",value:3},{label:"Web开发",value:4}],Re=[{label:"Python3/JupyterLab",value:1},{label:"R4.2/Jupyterlab",value:2},{label:"Python3-tensorflow2.6/JupyterLab",value:3}],Le=[{label:"Bwapp",value:1},{label:"CSS",value:2},{label:"DataTurks",value:3}],Fe=[{label:"切换仓库",value:"切换仓库"},{label:"代码仓库",value:"代码仓库"},{label:"私密代码仓库",value:"私密代码仓库"}],j=c(!1),Pe=[{title:"基本信息"},{title:"代码仓库"},{title:"评测设置"},{title:"实验环境"}],{fileTreeData:qe,expandedKeys:Q,selectedFile:Se,highlightedCode:Me,handleSelectFile:je,getNodePath:Je,addFileToTree:Ae,addFolderToTree:Ie,handleRenameNode:Ve,handleCopyPath:Ne,handleDeleteNode:De}=Lt(),J=c(!1),B=c(!1),H=c(!1),W=c("/"),Z=c("/"),Be=async a=>{var f;if(!(a.size/1024/1024<12))return r.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return r.error("只能上传 JPG/PNG 格式的图片!"),!1;try{N.value=!0;const i=await ne(a);G.value=Ue+i,o.value.topCover=i,(f=V.value)==null||f.validateFields(["topCover"]),r.success("顶部背景图上传成功")}catch{r.error("顶部背景图上传失败")}finally{N.value=!1}return!1},He=async a=>{var f;if(!(a.size/1024/1024<12))return r.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return r.error("只能上传 JPG/PNG 格式的图片!"),!1;try{D.value=!0;const i=await ne(a);K.value=Ue+i,o.value.cover=i,(f=V.value)==null||f.validateFields(["cover"]),r.success("封面图上传成功")}catch{r.error("封面图上传失败")}finally{D.value=!1}return!1},Ee=a=>{(typeof a=="boolean"?a:!!a)?J.value=!0:o.value.enableCodeRepository=!1},pe=async()=>{try{r.loading("正在查询仓库文件...",1),await new Promise(a=>setTimeout(a,1e3)),r.success("仓库文件查询成功"),console.log("模拟请求仓库地址：",o.value.gitUrl)}catch{r.error("仓库文件查询失败")}},Oe=async()=>{if(!o.value.gitUrl||!o.value.gitUrl.trim()){r.error("请先配置仓库地址"),ce();return}o.value.enableCodeRepository=!0,J.value=!1,j.value=!0,await pe()},ce=()=>{o.value.enableCodeRepository=!1,J.value=!1};ke(()=>o.value.repositoryType,a=>{a==="切换仓库"&&o.value.enableCodeRepository&&(j.value=!1,r.info("已解锁仓库地址，请重新输入"),he(()=>{o.value.repositoryType="代码仓库"}))});const ze=()=>{var a;o.value.enableCodeRepository&&!j.value&&((a=o.value.gitUrl)!=null&&a.trim())&&(j.value=!0,pe())},$e=a=>{switch(String(a.key)){case"newFile":fe();break;case"newFolder":me();break;case"upload":r.info("上传功能开发中...");break}},Ge=(a,e)=>{const m=String(a.key),f=Je(e.key);switch(m){case"newFile":fe(f);break;case"newFolder":me(f);break;case"upload":r.info("上传功能开发中...");break;case"rename":Ve(e);break;case"copyPath":Ne(e);break;case"delete":De(e);break}},fe=(a="/")=>{B.value=!0,W.value=a},Ke=a=>{Ae(a.fileName,a.fileContent,W.value),r.success("文件创建成功"),B.value=!1},me=(a="/")=>{H.value=!0,Z.value=a},Qe=a=>{Ie(a.folderName,Z.value),r.success("文件夹创建成功"),H.value=!1},ye=c("settings"),v=c({openTestValidate:1,testValidateFiles:"",timeLimitM:"",scoreRule:1,evaluationSetting:"通过所有代码块评测",testSets:[{id:1,args:"",answer:"",select:1},{id:2,args:"",answer:"",select:1}]}),w=c({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),E=c(!1),O=c(!1);let We=3;const Ze=()=>{v.value.testSets.push({id:We++,args:"",answer:"",select:1})},Xe=a=>{if(v.value.testSets.length===1){r.warning("至少保留一个测试集");return}v.value.testSets=v.value.testSets.filter(e=>e.id!==a),r.success("删除成功")},Ye=(a,e)=>{a.select=e?1:2},X=c([]),et=a=>{const{onSuccess:e}=a;setTimeout(()=>{e("ok")},0)},tt=async a=>{const{fileList:e}=a,m=e.filter(i=>i.status==="uploading"||i.status==="done"||!i.status);X.value=m;const f=m.filter(i=>i.originFileObj&&!i.url).map(async i=>{try{const d=await ne(i.originFileObj);return i.url=d,d}catch(d){return console.error("文件上传失败:",d),r.error(`文件 ${i.name} 上传失败`),null}});if(f.length>0){const d=(await Promise.all(f)).filter(R=>R!==null);if(d.length>0){const R=m.filter(x=>x.url).map(x=>x.url).join(",");v.value.testValidateFiles=R,r.success(`成功上传 ${d.length} 个文件`)}}},ge=()=>{_.value===0?ie.back():(_.value--,U())},at=async()=>{try{const a={projectType:2,environment:o.value.environment,name:o.value.name,tag:o.value.tag,fieldType:o.value.fieldType,difficulty:o.value.difficulty,classHour:o.value.classHour,topCover:o.value.topCover,cover:o.value.cover,description:o.value.description,showTaskRequire:o.value.showTaskRequire?1:2,authType:o.value.authType,enableCodeRepository:o.value.enableCodeRepository,secondType:o.value.secondType};o.value.enableCodeRepository&&(a.repositoryType=o.value.repositoryType,a.gitUrl=o.value.gitUrl),console.log("提交项目数据：",a);let e;b.value?(a.id=b.value,e=await Te(a),r.success("项目更新成功！"),console.log("更新成功：",e)):(e=await ht(a),e&&e.id&&(b.value=e.id,console.log("项目ID已保存：",b.value)),r.success("项目创建成功！"),console.log("创建成功：",e)),_.value=2,U()}catch(a){console.error("操作失败：",a),r.error(b.value?"项目更新失败，请稍后重试":"项目创建失败，请稍后重试"),U()}},lt=async()=>{var a,e;if(_.value===0)try{await Promise.all([(a=V.value)==null?void 0:a.validate(),(e=de.value)==null?void 0:e.validate()]),console.log("表单数据：",o.value),_.value=1,U()}catch{r.error("请完善必填信息"),U()}else if(_.value===1){if(o.value.enableCodeRepository&&(!o.value.gitUrl||o.value.gitUrl.trim()==="")){r.error("请输入仓库地址"),U();return}await at()}else if(_.value===2){if(!E.value){r.error("请先保存评测设置后再进行下一步"),U();return}if(!O.value){r.error("请先保存参考答案后再进行下一步"),U();return}_.value=3,U()}},ot=async()=>{try{if(!b.value){console.error("项目ID不存在，无法创建任务");return}const a={type:4,projectId:b.value,name:"JupyterLab环境实训任务"};console.log("自动提交任务数据：",a);const e=await kt(a);e&&e.taskId&&(C.value=e.taskId,console.log("任务ID已保存：",C.value),r.success("任务创建成功！"))}catch(a){console.error("任务创建失败：",a),r.error("任务创建失败，请稍后重试")}},st=async()=>{try{if(!C.value){r.error("任务ID不存在，请重新创建任务");return}if(v.value.openTestValidate===1){if(!v.value.testValidateFiles||v.value.testValidateFiles.trim()===""){r.error("请上传评测文件");return}if(!v.value.timeLimitM){r.error("请输入评测时长限制");return}if(!v.value.testSets||v.value.testSets.length===0){r.error("请至少添加一个测试集");return}const m=v.value.testSets.filter(f=>f.select===1);if(m.length===0){r.error("请至少选中一个测试集");return}for(let f=0;f<m.length;f++){const i=m[f];if(!i.args||i.args.trim()===""){r.error(`测试集${f+1}的输入内容不能为空`);return}if(!i.answer||i.answer.trim()===""){r.error(`测试集${f+1}的期望输出不能为空`);return}}}const a=v.value.testSets.map(m=>({args:m.args,answer:m.answer,select:m.select})),e={taskId:C.value,projectId:b.value,openTestValidate:v.value.openTestValidate,testValidateFiles:v.value.testValidateFiles,timeLimitM:v.value.timeLimitM,scoreRule:v.value.scoreRule,testContent:JSON.stringify(a)};console.log("保存评测设置数据：",e),await re(e),E.value=!0,r.success("评测设置保存成功！")}catch(a){console.error("评测设置保存失败：",a),r.error("评测设置保存失败，请重试")}},nt=async()=>{try{if(!C.value){r.error("任务ID不存在，请重新创建任务");return}if(!w.value.referenceAnswer||w.value.referenceAnswer.trim()===""){r.error("请输入参考答案内容");return}if(!w.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){r.error("请输入参考答案内容");return}const e={taskId:C.value,projectId:b.value,showAnswer:w.value.showAnswer,prohibitCopyAnswer:w.value.prohibitCopyAnswer,referenceAnswer:w.value.referenceAnswer};console.log("保存参考答案数据：",e),await re(e),O.value=!0,r.success("参考答案保存成功！")}catch(a){console.error("参考答案保存失败：",a),r.error("参考答案保存失败，请重试")}},rt=async()=>{try{if(!b.value){r.error("项目ID不存在，请重新创建项目");return}if(!C.value){r.error("任务ID不存在，请重新创建任务");return}if(!E.value){r.error("请先保存评测设置后再完成创建");return}if(!O.value){r.error("请先保存参考答案后再完成创建");return}if(!k.value.dockerImage){r.error("请选择实验环境");return}if(!k.value.timeLimitM){r.error("请输入实验环境使用时长");return}await re({taskId:C.value,projectId:b.value,dockerImage:k.value.dockerImage,environment:k.value.environment,timeLimitM:k.value.timeLimitM}),await Te({id:b.value,status:1}),r.success("项目创建成功！"),setTimeout(()=>{ie.push("/dashboard/analysis")},500)}catch(a){console.error("完成创建失败：",a),r.error("完成创建失败，请重试")}},Y=[{id:"1",name:"Python3/JupyterLab",value:"Python3/JupyterLab"},{id:"2",name:"R4.2/Jupyterlab",value:"R4.2/Jupyterlab"},{id:"3",name:"Python3-tensorflow2.6/JupyterLab",value:"Python3-tensorflow2.6/JupyterLab"},{id:"4",name:"Python3.7/Jupyterlab",value:"Python3.7/Jupyterlab"},{id:"5",name:"Python3.7-TensorFlow1.13/JupyterLab",value:"Python3.7-TensorFlow1.13/JupyterLab"},{id:"6",name:"Python3.8/JupyterLab",value:"Python3.8/JupyterLab"},{id:"7",name:"Python3.10/Jupyterlab",value:"Python3.10/Jupyterlab"},{id:"8",name:"Python3.11/JupyterLab",value:"Python3.11/JupyterLab"},{id:"9",name:"Python3.10-ultralytics/JupyterLab",value:"Python3.10-ultralytics/JupyterLab"}],ee=c("Python3/JupyterLab"),z=c(""),ut=gt(()=>z.value?Y.filter(a=>a.name.toLowerCase().includes(z.value.toLowerCase())):Y),k=c({dockerImage:"1",environment:"Css",timeLimitM:""}),it=a=>{ee.value=a;const e=Y.find(m=>m.value===a);e&&(k.value.dockerImage=e.id)},U=()=>{he(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const a=document.querySelector(".page-content");a&&(a.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(f=>{f.scrollTop>0&&(f.scrollTop=0)})})};return(a,e)=>{const m=jt,f=Jt,i=It,d=At,R=Nt,x=Dt,_e=Vt,g=Ht,P=Bt,te=Et,h=zt,ae=Ot,be=$t,A=Gt,dt=Kt,le=Zt,vt=Wt,pt=Xt,we=Yt,ct=ta,oe=aa;return p(),y("div",oa,[e[74]||(e[74]=n("div",{class:"page-header"},[n("h2",null,"JupyterLab环境实训项目配置")],-1)),n("div",sa,[n("div",na,[t(f,{current:_.value,class:"custom-steps"},{default:l(()=>[(p(),y(L,null,se(Pe,(s,$)=>t(m,{key:$,title:s.title},null,8,["title"])),64))]),_:1},8,["current"])]),_.value===0?(p(),y("div",ra,[e[38]||(e[38]=n("div",{class:"section-title"},[n("h3",null,"基本信息")],-1)),n("div",ua,[t(A,{ref_key:"formRef",ref:V,model:o.value,rules:ve,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[t(d,{label:"名称",name:"name",required:""},{default:l(()=>[t(i,{value:o.value.name,"onUpdate:value":e[0]||(e[0]=s=>o.value.name=s),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(_e,null,{default:l(()=>[t(R,{span:12},{default:l(()=>[t(d,{label:"技能标签",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(i,{value:o.value.tag,"onUpdate:value":e[1]||(e[1]=s=>o.value.tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),t(R,{span:12},{default:l(()=>[t(d,{label:"领域类别",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[t(x,{value:o.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>o.value.fieldType=s),placeholder:"请选择领域类别",options:xe},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"难度",name:"difficulty",required:""},{default:l(()=>[t(P,{value:o.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>o.value.difficulty=s),class:"custom-radio"},{default:l(()=>[t(g,{value:1},{default:l(()=>e[28]||(e[28]=[u("简单")])),_:1,__:[28]}),t(g,{value:2},{default:l(()=>e[29]||(e[29]=[u("适中")])),_:1,__:[29]}),t(g,{value:3},{default:l(()=>e[30]||(e[30]=[u("困难")])),_:1,__:[30]})]),_:1},8,["value"])]),_:1}),t(_e,null,{default:l(()=>[t(R,{span:12},{default:l(()=>[t(d,{label:"实验环境",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(x,{value:o.value.environment,"onUpdate:value":e[4]||(e[4]=s=>o.value.environment=s),placeholder:"请选择实验环境",options:Re},null,8,["value"])]),_:1})]),_:1}),t(R,{span:12},{default:l(()=>[t(d,{label:"小类别",name:"secondType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[t(x,{value:o.value.secondType,"onUpdate:value":e[5]||(e[5]=s=>o.value.secondType=s),placeholder:"请选择小类别",options:Le},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"学时",name:"classHour",required:""},{default:l(()=>[t(te,{min:0,class:"w-full",value:o.value.classHour,"onUpdate:value":e[6]||(e[6]=s=>o.value.classHour=s),placeholder:"请输入学时"},null,8,["value"])]),_:1}),t(d,{label:"顶部背景图",name:"topCover",required:""},{default:l(()=>[n("div",ia,[n("div",da,[t(ae,{"before-upload":Be,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[t(h,{loading:N.value},{default:l(()=>[N.value?(p(),y(L,{key:1},[u("上传中...")],64)):(p(),y(L,{key:0},[u("选择文件")],64))]),_:1},8,["loading"])]),_:1}),G.value?(p(),y("div",va,[n("img",{src:G.value,alt:"顶部背景图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,pa)])):T("",!0)]),e[31]||(e[31]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(d,{label:"封面图",name:"cover",required:""},{default:l(()=>[n("div",ca,[n("div",fa,[t(ae,{"before-upload":He,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[t(h,{loading:D.value},{default:l(()=>[D.value?(p(),y(L,{key:1},[u("上传中...")],64)):(p(),y(L,{key:0},[u("选择文件")],64))]),_:1},8,["loading"])]),_:1}),K.value?(p(),y("div",ma,[n("img",{src:K.value,alt:"封面图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,ya)])):T("",!0)]),e[32]||(e[32]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(d,{label:"简介",name:"description"},{default:l(()=>[t(Ce,{modelValue:o.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.description=s)},null,8,["modelValue"])]),_:1}),t(d,{label:"任务要求",name:"showTaskRequire"},{default:l(()=>[t(be,{checked:o.value.showTaskRequire,"onUpdate:checked":e[8]||(e[8]=s=>o.value.showTaskRequire=s)},{default:l(()=>e[33]||(e[33]=[u(" 显示任务要求（勾选后，将帮作为任务要求显示在任务项目政策面） ")])),_:1,__:[33]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[39]||(e[39]=n("div",{class:"section-title"},[n("h3",null,"培训公开范围")],-1)),n("div",ga,[t(A,{ref_key:"trainingScopeFormRef",ref:de,model:o.value,rules:ve,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[t(d,{label:"培训公开范围",name:"authType",required:""},{default:l(()=>[t(P,{value:o.value.authType,"onUpdate:value":e[9]||(e[9]=s=>o.value.authType=s),class:"custom-radio"},{default:l(()=>[t(g,{value:1},{default:l(()=>e[34]||(e[34]=[u("完全公开")])),_:1,__:[34]}),t(g,{value:2},{default:l(()=>e[35]||(e[35]=[u("全院公开")])),_:1,__:[35]}),t(g,{value:3},{default:l(()=>e[36]||(e[36]=[u("本单位公开")])),_:1,__:[36]}),t(g,{value:4},{default:l(()=>e[37]||(e[37]=[u("不公开")])),_:1,__:[37]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):T("",!0),_.value===1?(p(),y("div",_a,[n("div",ba,[n("div",wa,[t(x,{value:o.value.repositoryType,"onUpdate:value":e[10]||(e[10]=s=>o.value.repositoryType=s),options:Fe,class:"repository-type-select"},null,8,["value"]),n("div",ka,[e[40]||(e[40]=n("span",{class:"url-label"},"仓库地址：",-1)),t(i,{value:o.value.gitUrl,"onUpdate:value":e[11]||(e[11]=s=>o.value.gitUrl=s),placeholder:"请输入仓库地址",class:"url-input",disabled:j.value,onBlur:ze},null,8,["value","disabled"])])]),n("div",ha,[n("div",Ta,[n("div",Ca,[n("div",Ua,[e[41]||(e[41]=n("span",{class:"switch-label"},"代码仓库",-1)),t(dt,{checked:o.value.enableCodeRepository,disabled:o.value.enableCodeRepository,onChange:Ee},null,8,["checked","disabled"])]),o.value.enableCodeRepository?(p(),q(pt,{key:0},{overlay:l(()=>[t(vt,{onClick:$e},{default:l(()=>[t(le,{key:"newFile"},{default:l(()=>e[42]||(e[42]=[u("新建文件")])),_:1,__:[42]}),t(le,{key:"newFolder"},{default:l(()=>e[43]||(e[43]=[u("新建文件夹")])),_:1,__:[43]}),t(le,{key:"upload"},{default:l(()=>e[44]||(e[44]=[u("上传")])),_:1,__:[44]})]),_:1})]),default:l(()=>[t(h,{type:"primary",size:"small"},{default:l(()=>[t(S(Qt)),e[45]||(e[45]=u(" 新建 "))]),_:1,__:[45]})]),_:1})):T("",!0)]),o.value.enableCodeRepository?(p(),q(Ft,{key:0,"file-tree-data":S(qe),"expanded-keys":S(Q),"onUpdate:expandedKeys":e[12]||(e[12]=s=>_t(Q)?Q.value=s:null),onSelect:S(je),onMenuClick:Ge},null,8,["file-tree-data","expanded-keys","onSelect"])):T("",!0),o.value.enableCodeRepository?(p(),y("div",xa,e[46]||(e[46]=[bt('<div class="tips-title" data-v-4ad21f4f>提示：</div><div class="tips-content" data-v-4ad21f4f> 此处存放本实训所需的所有代码等相关文件，你可以通过以下： </div><div class="tips-list" data-v-4ad21f4f> 1、<a href="#" class="tips-link" data-v-4ad21f4f>Gitee客户端</a> 上传已有文件来开始使用。 </div><div class="tips-list" data-v-4ad21f4f> 2、直接在平台上创建文件目录以及相关代码文件。 </div>',4)]))):T("",!0)]),n("div",Ra,[o.value.enableCodeRepository?(p(),q(Pt,{key:0,"selected-file":S(Se),"highlighted-code":S(Me)},null,8,["selected-file","highlighted-code"])):(p(),y("div",La," 在左侧代码仓库区域点击目录打开文件 "))])])])])):T("",!0),_.value===2?(p(),y("div",Fa,[t(ct,{activeKey:ye.value,"onUpdate:activeKey":e[21]||(e[21]=s=>ye.value=s),class:"evaluation-tabs"},{default:l(()=>[t(we,{key:"settings",tab:"评测设置"},{default:l(()=>[n("div",Pa,[n("div",qa,[e[56]||(e[56]=n("div",{class:"block-header"},"评测文件",-1)),n("div",Sa,[t(A,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[t(d,{label:"是否启用评测功能",required:""},{default:l(()=>[t(P,{value:v.value.openTestValidate,"onUpdate:value":e[13]||(e[13]=s=>v.value.openTestValidate=s),class:"custom-radio"},{default:l(()=>[t(g,{value:1},{default:l(()=>e[47]||(e[47]=[u("是")])),_:1,__:[47]}),t(g,{value:2},{default:l(()=>e[48]||(e[48]=[u("否")])),_:1,__:[48]})]),_:1},8,["value"])]),_:1}),v.value.openTestValidate===1?(p(),y(L,{key:0},[t(d,{label:"评测文件",required:""},{default:l(()=>[t(ae,{"file-list":X.value,"onUpdate:fileList":e[14]||(e[14]=s=>X.value=s),"custom-request":et,onChange:tt,"max-count":10},{default:l(()=>[t(h,{type:"primary"},{default:l(()=>e[49]||(e[49]=[u("点击上传")])),_:1,__:[49]})]),_:1},8,["file-list"]),e[50]||(e[50]=n("div",{class:"upload-hint"}," 说明：支持上传多个文件，每个文件大小不能超过500M。 ",-1))]),_:1,__:[50]}),t(d,{label:"评测时长限制",required:""},{default:l(()=>[n("div",Ma,[t(te,{value:v.value.timeLimitM,"onUpdate:value":e[15]||(e[15]=s=>v.value.timeLimitM=s),min:1,placeholder:"请输入评测时长（分钟）",style:{width:"580px"}},null,8,["value"]),e[51]||(e[51]=n("span",null,"分钟",-1))])]),_:1}),t(d,{label:"系统评分规则"},{default:l(()=>[t(P,{value:v.value.scoreRule,"onUpdate:value":e[16]||(e[16]=s=>v.value.scoreRule=s),class:"custom-radio"},{default:l(()=>[t(g,{value:1},{default:l(()=>e[52]||(e[52]=[u(" 通过全部测试集（仅当所有测试集都正确时，获得项目学时） ")])),_:1,__:[52]}),t(g,{value:2},{default:l(()=>e[53]||(e[53]=[u(" 通过部分测试集（任意一个测试集正确时，获得项目学时） ")])),_:1,__:[53]})]),_:1},8,["value"])]),_:1}),t(d,{label:"评测设置",required:""},{default:l(()=>[t(P,{value:v.value.evaluationSetting,"onUpdate:value":e[17]||(e[17]=s=>v.value.evaluationSetting=s),class:"custom-radio"},{default:l(()=>[t(g,{value:"通过所有代码块评测"},{default:l(()=>e[54]||(e[54]=[u(" 通过所有代码块评测（对学员任务文件的所有非空代码块进行评测） ")])),_:1,__:[54]}),t(g,{value:"通过指定代码块评测"},{default:l(()=>e[55]||(e[55]=[u(" 通过指定代码块评测（对学员任务文件的指定非空代码块进行评测） ")])),_:1,__:[55]})]),_:1},8,["value"])]),_:1})],64)):T("",!0)]),_:1})])]),v.value.openTestValidate===1?(p(),y("div",ja,[n("div",Ja,[e[58]||(e[58]=n("span",null,"测试集",-1)),n("div",Aa,[t(h,{onClick:Ze},{default:l(()=>e[57]||(e[57]=[u("新增测试集")])),_:1,__:[57]})])]),n("div",Ia,[(p(!0),y(L,null,se(v.value.testSets,(s,$)=>(p(),y("div",{key:s.id,class:"test-set-item"},[t(be,{checked:s.select===1,onChange:M=>Ye(s,M.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),n("span",Va,"测试集"+I($+1),1),t(i,{value:s.args,"onUpdate:value":M=>s.args=M,placeholder:"请输入输入内容",class:"test-set-input"},null,8,["value","onUpdate:value"]),t(i,{value:s.answer,"onUpdate:value":M=>s.answer=M,placeholder:"请输入期望输出",class:"test-set-input"},null,8,["value","onUpdate:value"]),t(S(ea),{class:"delete-test-set-icon",onClick:M=>Xe(s.id)},null,8,["onClick"])]))),128))])])):T("",!0),n("div",Na,[t(h,{type:"primary",onClick:st},{default:l(()=>[u(I(E.value?"更新":"保存"),1)]),_:1})])])]),_:1}),t(we,{key:"reference",tab:"参考答案"},{default:l(()=>[n("div",Da,[n("div",Ba,[e[63]||(e[63]=n("div",{class:"block-header"},"参考答案",-1)),n("div",Ha,[t(A,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[t(d,{label:"是否显示参考答案模块",required:""},{default:l(()=>[t(P,{value:w.value.showAnswer,"onUpdate:value":e[18]||(e[18]=s=>w.value.showAnswer=s),class:"custom-radio"},{default:l(()=>[t(g,{value:1},{default:l(()=>e[59]||(e[59]=[u("是")])),_:1,__:[59]}),t(g,{value:2},{default:l(()=>e[60]||(e[60]=[u("否")])),_:1,__:[60]})]),_:1},8,["value"])]),_:1}),t(d,{label:"是否禁止复制参考答案",required:""},{default:l(()=>[t(P,{value:w.value.prohibitCopyAnswer,"onUpdate:value":e[19]||(e[19]=s=>w.value.prohibitCopyAnswer=s),class:"custom-radio"},{default:l(()=>[t(g,{value:1},{default:l(()=>e[61]||(e[61]=[u("是")])),_:1,__:[61]}),t(g,{value:2},{default:l(()=>e[62]||(e[62]=[u("否")])),_:1,__:[62]})]),_:1},8,["value"])]),_:1}),t(d,{label:"参考答案",required:""},{default:l(()=>[t(Ce,{modelValue:w.value.referenceAnswer,"onUpdate:modelValue":e[20]||(e[20]=s=>w.value.referenceAnswer=s)},null,8,["modelValue"])]),_:1})]),_:1})])]),n("div",Ea,[t(h,{type:"primary",onClick:nt},{default:l(()=>[u(I(O.value?"更新":"保存"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):T("",!0),_.value===3?(p(),y("div",Oa,[n("div",za,[e[69]||(e[69]=n("h3",{class:"section-main-title"},"实验环境",-1)),n("div",$a,[n("div",Ga,[n("div",Ka,[t(i,{value:z.value,"onUpdate:value":e[22]||(e[22]=s=>z.value=s),placeholder:"搜索需要的实验环境","allow-clear":""},{suffix:l(()=>e[64]||(e[64]=[n("span",{class:"search-icon"},"🔍",-1)])),_:1},8,["value"])]),n("div",Qa,[(p(!0),y(L,null,se(ut.value,s=>(p(),y("div",{key:s.id,class:wt(["environment-item",{active:ee.value===s.value}]),onClick:$=>it(s.value)},I(s.name),11,Wa))),128))])]),n("div",Za,[n("div",Xa," 实验环境: "+I(ee.value),1),t(A,{model:k.value,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}},{default:l(()=>[t(d,{label:"附带环境"},{default:l(()=>[t(x,{value:k.value.environment,"onUpdate:value":e[23]||(e[23]=s=>k.value.environment=s),placeholder:"请选择附带环境"},{default:l(()=>[t(oe,{value:"Bwapp"},{default:l(()=>e[65]||(e[65]=[u("Bwapp")])),_:1,__:[65]}),t(oe,{value:"Css"},{default:l(()=>e[66]||(e[66]=[u("Css")])),_:1,__:[66]}),t(oe,{value:"DataTurks"},{default:l(()=>e[67]||(e[67]=[u("DataTurks")])),_:1,__:[67]})]),_:1},8,["value"])]),_:1}),t(d,{label:"实验环境使用时长"},{default:l(()=>[n("div",Ya,[t(te,{value:k.value.timeLimitM,"onUpdate:value":e[24]||(e[24]=s=>k.value.timeLimitM=s),min:1,placeholder:"请输入实验环境使用时长",style:{flex:"1"}},null,8,["value"]),e[68]||(e[68]=n("span",null,"分",-1))])]),_:1})]),_:1},8,["model"])])])])])):T("",!0),n("div",el,[_.value===0?(p(),q(h,{key:0,onClick:ge},{default:l(()=>e[70]||(e[70]=[u("返回")])),_:1,__:[70]})):(p(),q(h,{key:1,onClick:ge},{default:l(()=>e[71]||(e[71]=[u("上一步")])),_:1,__:[71]})),_.value===3?(p(),q(h,{key:2,type:"primary",onClick:rt},{default:l(()=>e[72]||(e[72]=[u("完成创建")])),_:1,__:[72]})):(p(),q(h,{key:3,type:"primary",onClick:lt},{default:l(()=>e[73]||(e[73]=[u("下一步")])),_:1,__:[73]}))])]),t(qt,{open:J.value,"onUpdate:open":e[25]||(e[25]=s=>J.value=s),onConfirm:Oe,onCancel:ce},null,8,["open"]),t(St,{open:B.value,"onUpdate:open":e[26]||(e[26]=s=>B.value=s),"parent-path":W.value,onConfirm:Ke},null,8,["open","parent-path"]),t(Mt,{open:H.value,"onUpdate:open":e[27]||(e[27]=s=>H.value=s),"parent-path":Z.value,onConfirm:Qe},null,8,["open","parent-path"])])}}}),dl=la(tl,[["__scopeId","data-v-4ad21f4f"]]);export{dl as default};
