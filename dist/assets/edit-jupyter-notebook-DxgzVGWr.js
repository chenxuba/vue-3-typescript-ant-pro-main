import{d as Me,ak as Pe,am as Ne,f as m,w as $e,o as He,_,a1 as f,$ as r,k as t,a7 as l,ac as q,F as C,ag as X,u as x,a6 as F,G as p,a9 as I,ab as ze,y as Be}from"./vue-PnzzEkKE.js";import{R as me,u as Z}from"./RichTextEditor-BdL1JLaO.js";import{e as Je,f as Oe,a as _e,s as Ge,b as ge,g as Ke}from"./index-BPwwnzuA.js";import{u as Ye,a as Qe,d as We}from"./dictionary-Cm8rd2TS.js";import{a as Xe}from"./dictionary-D-KQQSws.js";import{a1 as n,a3 as Ze,a2 as et,K as tt,z as at,I as lt,a4 as st,a5 as ot,a6 as rt,a7 as nt,a8 as ut,ac as it,a9 as dt,H as vt,J as ct,ai as pt,Y as ft,T as mt,s as _t,af as gt}from"./antd-DHaIpRVu.js";import{_ as yt}from"./index-CHw3NtI0.js";const wt={class:"edit-jupyter-notebook-page"},bt={class:"page-container"},ht={class:"steps-section"},kt={key:0},Tt={class:"form-section"},Ct={class:"flex items-top gap-16px"},St={class:"flex flex-col gap-12px"},At={key:0,class:"image-preview"},qt=["src"],Vt={class:"flex items-top gap-16px"},Ut={class:"flex flex-col gap-12px"},xt={key:0,class:"image-preview"},jt=["src"],Rt={class:"form-section"},Ft={key:1,class:"step-content"},It={class:"jupyter-header"},Dt={class:"jupyter-actions"},Lt={class:"jupyter-iframe-wrapper"},Et={key:0,class:"loading-container"},Mt=["src"],Pt={key:2,class:"step-content evaluation-step"},Nt={class:"evaluation-section"},$t={class:"section-block"},Ht={class:"block-content"},zt={key:0,class:"section-block"},Bt={class:"block-header"},Jt={class:"header-actions"},Ot={class:"block-content"},Gt={class:"test-set-label"},Kt={class:"tab-footer-buttons"},Yt={class:"reference-section"},Qt={class:"section-block"},Wt={class:"block-content"},Xt={class:"tab-footer-buttons"},Zt={class:"page-footer"},z="http://101.200.13.193",ea=Me({name:"EditJupyterNotebook",__name:"edit-jupyter-notebook",setup(ta){const j=Pe(),ye=Ne(),k=m(null),b=m(null),w=m(0),R=m(!1),D=m(),ee=m(),te=m(""),V=m(!1),B=m(!1),we=()=>{V.value=!V.value},ae=m("settings"),o=m({openTestValidate:1,testValidateFiles:"",testValidateSh:"",timeLimitM:"",scoreRule:1,evaluationSetting:"通过所有代码块评测",testSets:[{id:1,arg:"",answer:"",select:1},{id:2,arg:"",answer:"",select:1}]}),g=m({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),J=m(!1),O=m(!1);let le=3;const be=()=>{o.value.testSets.push({id:le++,arg:"",answer:"",select:1})},he=a=>{if(o.value.testSets.length===1){n.warning("至少保留一个测试集");return}o.value.testSets=o.value.testSets.filter(e=>e.id!==a),n.success("删除成功")},ke=(a,e)=>{a.select=e?1:2},L=m([]),Te=a=>{const{onSuccess:e}=a;setTimeout(()=>{e("ok")},0)},Ce=async a=>{const{fileList:e}=a,u=e.filter(i=>i.status==="uploading"||i.status==="done"||!i.status);L.value=u;const v=u.filter(i=>i.originFileObj&&!i.url).map(async i=>{try{const c=await Z(i.originFileObj);return i.url=c,c}catch{return n.error(`文件 ${i.name} 上传失败`),null}});if(v.length>0){const c=(await Promise.all(v)).filter(T=>T!==null);if(c.length>0){const T=u.filter(S=>S.url).map(S=>S.url).join(",");o.value.testValidateFiles=T,n.success(`成功上传 ${c.length} 个文件`)}}},d=m({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1}),E=m(""),M=m(""),P=m(!1),N=m(!1),se={name:[{required:!0,message:"请输入名称",trigger:"blur"}],tag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],fieldType:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}],secondType:[{required:!0,message:"请选择小类别",trigger:"change"}],classHour:[{required:!0,message:"请输入学时",trigger:"blur"}],topCover:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],authType:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},G=Ye(),oe=Qe(),K=We(),re=m([]),Y=m(!1),Se=async()=>{try{Y.value=!0;const a=await Xe({code:"project#environment_2"});a&&a.list&&(re.value=a.list.map(e=>({label:e.name,value:e.value})))}catch{n.error("加载实验环境选项失败")}finally{Y.value=!1}},Ae=[{title:"基本信息"},{title:"实验内容"},{title:"评测设置"}],qe=async()=>{if(!k.value){n.error("缺少项目ID"),j.back();return}try{R.value=!0;const a=await Je({id:k.value});d.value={name:a.name||"",tag:a.tag||"",fieldType:a.fieldType,difficulty:a.difficulty||1,environment:a.environment,secondType:a.secondType,classHour:a.classHour||"",topCover:a.topCover||"",cover:a.cover||"",description:a.description||"",showTaskRequire:a.showTaskRequire===1,authType:a.authType||1},a.topCover&&(E.value=z+a.topCover),a.cover&&(M.value=z+a.cover),await Ve()}catch(a){n.error(a.message||"获取项目详情失败"),j.back()}finally{R.value=!1}},Ve=async()=>{if(k.value)try{const a=await Oe({projectId:k.value});let e=[];if(Array.isArray(a)?e=a:a&&typeof a=="object"&&(e=a.list||a.data||a.tasks||[]),e&&e.length>0){const u=e.find(v=>v.type===4)||e[0];if(u){if(b.value=u.taskId,o.value.openTestValidate=u.openTestValidate||1,o.value.testValidateSh=u.testValidateSh||"",o.value.timeLimitM=u.timeLimitM?String(u.timeLimitM):"",o.value.scoreRule=u.scoreRule||1,o.value.evaluationSetting=u.evaluationSetting||"通过所有代码块评测",u.testValidateFiles){o.value.testValidateFiles=u.testValidateFiles;const v=u.testValidateFiles.split(",");L.value=v.map((i,c)=>({uid:`${c}`,name:i.split("/").pop()||`文件${c+1}`,status:"done",url:i}))}if(u.testContent)try{const v=JSON.parse(u.testContent);Array.isArray(v)&&v.length>0&&(o.value.testSets=v.map((i,c)=>({id:c+1,arg:i.arg||"",answer:i.answer||"",select:i.select||1})),le=v.length+1)}catch{}g.value.showAnswer=u.showAnswer||1,g.value.prohibitCopyAnswer=u.prohibitCopyAnswer||1,g.value.referenceAnswer=u.referenceAnswer||"",u.openTestValidate&&(J.value=!0),u.referenceAnswer&&(O.value=!0)}}}catch(a){n.warning(a.message||"获取任务列表失败")}};$e(w,async a=>{a===1&&b.value&&await Ue()});const Ue=async()=>{if(b.value)try{B.value=!0;const a=await Ke({taskId:b.value});a&&a.config&&a.config.url?(te.value=a.config.url,n.success("实验环境加载成功！")):n.warning("未获取到实验环境URL")}catch{n.error("获取实验环境失败，请稍后重试")}finally{B.value=!1}},ne=()=>{w.value===0?j.back():(w.value--,$())},ue=async()=>{var a,e;if(w.value===0)try{await Promise.all([(a=D.value)==null?void 0:a.validate(),(e=ee.value)==null?void 0:e.validate()]),await xe(),w.value=1,$()}catch{n.error("请完善必填信息"),$()}else w.value===1?(b.value&&await je(),w.value=2,$()):w.value===2&&await Re()},xe=async()=>{try{R.value=!0;const a={id:k.value,projectType:2,environment:d.value.environment,secondType:d.value.secondType,name:d.value.name,tag:d.value.tag,fieldType:d.value.fieldType,difficulty:d.value.difficulty,classHour:d.value.classHour,topCover:d.value.topCover,cover:d.value.cover,description:d.value.description,showTaskRequire:d.value.showTaskRequire?1:2,authType:d.value.authType};await _e(a),n.success("保存成功！")}catch(a){throw n.error(a.message||"项目更新失败，请稍后重试"),a}finally{R.value=!1}},je=async()=>{if(b.value)try{await Ge({taskId:b.value}),n.success("实验环境已停止")}catch{n.error("停止实验环境失败，请稍后重试")}},ie=async()=>{if(!b.value)throw n.error("任务ID不存在，请重新创建任务"),new Error("任务ID不存在");if(o.value.openTestValidate===1){if(!o.value.testValidateFiles||o.value.testValidateFiles.trim()==="")throw n.error("请上传评测文件"),new Error("请上传评测文件");if(!o.value.testValidateSh||o.value.testValidateSh.trim()==="")throw n.error("请输入评测执行命令"),new Error("请输入评测执行命令");if(!o.value.timeLimitM||o.value.timeLimitM.trim()==="")throw n.error("请输入评测时长限制"),new Error("请输入评测时长限制");if(!o.value.testSets||o.value.testSets.length===0)throw n.error("请至少添加一个测试集"),new Error("请至少添加一个测试集");const u=o.value.testSets.filter(v=>v.select===1);if(u.length===0)throw n.error("请至少选中一个测试集"),new Error("请至少选中一个测试集");for(let v=0;v<u.length;v++){const i=u[v];if(!i.arg||i.arg.trim()==="")throw n.error(`测试集${v+1}的输入内容不能为空`),new Error(`测试集${v+1}的输入内容不能为空`);if(!i.answer||i.answer.trim()==="")throw n.error(`测试集${v+1}的期望输出不能为空`),new Error(`测试集${v+1}的期望输出不能为空`)}}const a=o.value.testSets.map(u=>({arg:u.arg,answer:u.answer,select:u.select})),e={taskId:b.value,projectId:k.value,openTestValidate:o.value.openTestValidate,testValidateFiles:o.value.testValidateFiles,testValidateSh:o.value.testValidateSh,timeLimitM:o.value.timeLimitM,scoreRule:o.value.scoreRule,evaluationSetting:o.value.evaluationSetting,testContent:JSON.stringify(a)};try{await ge(e),J.value=!0}catch(u){throw n.error("评测设置保存失败，请重试"),u}},de=async()=>{if(!b.value)throw n.error("任务ID不存在，请重新创建任务"),new Error("任务ID不存在");if(!g.value.referenceAnswer||g.value.referenceAnswer.trim()==="")throw n.error("请输入参考答案内容"),new Error("请输入参考答案内容");if(!g.value.referenceAnswer.replace(/<[^>]*>/g,"").trim())throw n.error("请输入参考答案内容"),new Error("请输入参考答案内容");const e={taskId:b.value,projectId:k.value,showAnswer:g.value.showAnswer,prohibitCopyAnswer:g.value.prohibitCopyAnswer,referenceAnswer:g.value.referenceAnswer};try{await ge(e),O.value=!0}catch(u){throw n.error("参考答案保存失败，请重试"),u}},Re=async()=>{if(!k.value){n.error("项目ID不存在，请重新创建项目");return}try{await ie()}catch{return}try{await de()}catch{return}try{await _e({id:k.value,status:10})}catch{n.error("项目更新失败，请重试");return}n.success("项目更新成功！"),setTimeout(()=>{j.push("/dashboard/analysis")},500)},$=()=>{Be(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const a=document.querySelector(".page-content");a&&(a.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(v=>{v.scrollTop>0&&(v.scrollTop=0)})})},Fe=async a=>{var v;if(!(a.size/1024/1024<12))return n.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return n.error("只能上传 JPG/PNG 格式的图片!"),!1;try{P.value=!0;const i=await Z(a);E.value=z+i,d.value.topCover=i,(v=D.value)==null||v.validateFields(["topCover"]),n.success("顶部背景图上传成功")}catch{n.error("顶部背景图上传失败")}finally{P.value=!1}return!1},Ie=async a=>{var v;if(!(a.size/1024/1024<12))return n.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return n.error("只能上传 JPG/PNG 格式的图片!"),!1;try{N.value=!0;const i=await Z(a);M.value=z+i,d.value.cover=i,(v=D.value)==null||v.validateFields(["cover"]),n.success("封面图上传成功")}catch{n.error("封面图上传失败")}finally{N.value=!1}return!1};return He(async()=>{G.load(),oe.load(),K.load(),await Se();const a=ye.query.id;a?(k.value=Number(a),qe()):(n.error("缺少项目ID"),j.back())}),(a,e)=>{const u=et,v=Ze,i=lt,c=at,T=ot,S=rt,ve=st,y=ut,A=nt,De=it,h=vt,Q=dt,ce=ct,H=tt,Le=pt,pe=ft,fe=_t,Ee=mt;return f(),_("div",wt,[e[51]||(e[51]=r("div",{class:"page-header"},[r("h2",null,"编辑JupyterNotebook环境实训项目")],-1)),t(pe,{spinning:R.value},{default:l(()=>[r("div",bt,[r("div",ht,[t(v,{current:w.value,class:"custom-steps"},{default:l(()=>[(f(),_(C,null,X(Ae,(s,W)=>t(u,{key:W,title:s.title},null,8,["title"])),64))]),_:1},8,["current"])]),w.value===0?(f(),_("div",kt,[e[27]||(e[27]=r("div",{class:"section-title"},[r("h3",null,"基本信息")],-1)),r("div",Tt,[t(H,{ref_key:"formRef",ref:D,model:d.value,rules:se,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[t(c,{label:"名称",name:"name",required:""},{default:l(()=>[t(i,{value:d.value.name,"onUpdate:value":e[0]||(e[0]=s=>d.value.name=s),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(ve,null,{default:l(()=>[t(T,{span:12},{default:l(()=>[t(c,{label:"技能标签",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(i,{value:d.value.tag,"onUpdate:value":e[1]||(e[1]=s=>d.value.tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(c,{label:"领域类别",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[t(S,{value:d.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>d.value.fieldType=s),placeholder:"请选择领域类别",options:x(G).options.value,loading:x(G).loading.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),t(c,{label:"难度",name:"difficulty",required:""},{default:l(()=>[t(A,{value:d.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>d.value.difficulty=s),class:"custom-radio"},{default:l(()=>[(f(!0),_(C,null,X(x(oe).data.value,s=>(f(),F(y,{key:s.value,value:Number(s.value)},{default:l(()=>[p(I(s.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),t(ve,null,{default:l(()=>[t(T,{span:12},{default:l(()=>[t(c,{label:"实验环境",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(S,{value:d.value.environment,"onUpdate:value":e[4]||(e[4]=s=>d.value.environment=s),placeholder:"请选择实验环境",options:re.value,loading:Y.value},null,8,["value","options","loading"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(c,{label:"小类别",name:"secondType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[t(S,{value:d.value.secondType,"onUpdate:value":e[5]||(e[5]=s=>d.value.secondType=s),placeholder:"请选择小类别",options:x(K).options.value,loading:x(K).loading.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),t(c,{label:"学时",name:"classHour",required:""},{default:l(()=>[t(De,{min:0,class:"w-full",value:d.value.classHour,"onUpdate:value":e[6]||(e[6]=s=>d.value.classHour=s),placeholder:"请输入学时"},null,8,["value"])]),_:1}),t(c,{label:"顶部背景图",name:"topCover",required:""},{default:l(()=>[r("div",Ct,[r("div",St,[t(Q,{"before-upload":Fe,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[t(h,{loading:P.value},{default:l(()=>[P.value?(f(),_(C,{key:1},[p("上传中...")],64)):(f(),_(C,{key:0},[p("选择文件")],64))]),_:1},8,["loading"])]),_:1}),E.value?(f(),_("div",At,[r("img",{src:E.value,alt:"顶部背景图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,qt)])):q("",!0)]),e[20]||(e[20]=r("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(c,{label:"封面图",name:"cover",required:""},{default:l(()=>[r("div",Vt,[r("div",Ut,[t(Q,{"before-upload":Ie,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[t(h,{loading:N.value},{default:l(()=>[N.value?(f(),_(C,{key:1},[p("上传中...")],64)):(f(),_(C,{key:0},[p("选择文件")],64))]),_:1},8,["loading"])]),_:1}),M.value?(f(),_("div",xt,[r("img",{src:M.value,alt:"封面图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,jt)])):q("",!0)]),e[21]||(e[21]=r("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(c,{label:"简介",name:"description"},{default:l(()=>[t(me,{modelValue:d.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>d.value.description=s)},null,8,["modelValue"])]),_:1}),t(c,{label:"任务要求",name:"showTaskRequire"},{default:l(()=>[t(ce,{checked:d.value.showTaskRequire,"onUpdate:checked":e[8]||(e[8]=s=>d.value.showTaskRequire=s)},{default:l(()=>e[22]||(e[22]=[p(" 显示任务要求（勾选后，将简介作为任务要求显示在实践项目挑战页面） ")])),_:1,__:[22]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[28]||(e[28]=r("div",{class:"section-title"},[r("h3",null,"培训公开范围")],-1)),r("div",Rt,[t(H,{ref_key:"trainingScopeFormRef",ref:ee,model:d.value,rules:se,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[t(c,{label:"培训公开范围",name:"authType",required:""},{default:l(()=>[t(A,{value:d.value.authType,"onUpdate:value":e[9]||(e[9]=s=>d.value.authType=s),class:"custom-radio"},{default:l(()=>[t(y,{value:1},{default:l(()=>e[23]||(e[23]=[p("完全公开")])),_:1,__:[23]}),t(y,{value:2},{default:l(()=>e[24]||(e[24]=[p("全院公开")])),_:1,__:[24]}),t(y,{value:3},{default:l(()=>e[25]||(e[25]=[p("本单位公开")])),_:1,__:[25]}),t(y,{value:4},{default:l(()=>e[26]||(e[26]=[p("不公开")])),_:1,__:[26]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):q("",!0),w.value===1?(f(),_("div",Ft,[r("div",{class:ze(["jupyter-container",{fullscreen:V.value}])},[r("div",It,[e[29]||(e[29]=r("h3",null,"Jupyter Notebook 编辑器",-1)),r("div",Dt,[t(Le,{title:V.value?"退出全屏":"全屏"},{default:l(()=>[t(h,{type:"text",icon:V.value?"fullscreen-exit":"fullscreen",onClick:we},{default:l(()=>[p(I(V.value?"退出全屏":"全屏"),1)]),_:1},8,["icon"])]),_:1},8,["title"])])]),r("div",Lt,[B.value?(f(),_("div",Et,[t(pe,{size:"large",tip:"正在加载实验环境..."})])):(f(),_("iframe",{key:1,src:te.value,class:"jupyter-iframe",frameborder:"0",allowfullscreen:""},null,8,Mt))])],2)])):q("",!0),w.value===2?(f(),_("div",Pt,[t(Ee,{activeKey:ae.value,"onUpdate:activeKey":e[19]||(e[19]=s=>ae.value=s),class:"evaluation-tabs"},{default:l(()=>[t(fe,{key:"settings",tab:"评测设置"},{default:l(()=>[r("div",Nt,[r("div",$t,[e[39]||(e[39]=r("div",{class:"block-header"},"评测文件",-1)),r("div",Ht,[t(H,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[t(c,{label:"是否启用评测功能",required:""},{default:l(()=>[t(A,{value:o.value.openTestValidate,"onUpdate:value":e[10]||(e[10]=s=>o.value.openTestValidate=s),class:"custom-radio"},{default:l(()=>[t(y,{value:1},{default:l(()=>e[30]||(e[30]=[p("是")])),_:1,__:[30]}),t(y,{value:2},{default:l(()=>e[31]||(e[31]=[p("否")])),_:1,__:[31]})]),_:1},8,["value"])]),_:1}),o.value.openTestValidate===1?(f(),_(C,{key:0},[t(c,{label:"评测文件",required:""},{default:l(()=>[t(Q,{"file-list":L.value,"onUpdate:fileList":e[11]||(e[11]=s=>L.value=s),"custom-request":Te,onChange:Ce,"max-count":10},{default:l(()=>[t(h,{type:"primary"},{default:l(()=>e[32]||(e[32]=[p("点击上传")])),_:1,__:[32]})]),_:1},8,["file-list"]),e[33]||(e[33]=r("div",{class:"upload-hint"}," 说明：支持上传多个文件，每个文件大小不能超过300M。 ",-1))]),_:1,__:[33]}),t(c,{label:"评测执行命令",required:""},{default:l(()=>[t(i,{value:o.value.testValidateSh,"onUpdate:value":e[12]||(e[12]=s=>o.value.testValidateSh=s),placeholder:"请输入评测执行命令，例如：python main.py"},null,8,["value"]),e[34]||(e[34]=r("div",{class:"upload-hint"}," （执行评测文件的命令，如：python main.py、node index.js、java Main 等） ",-1))]),_:1,__:[34]}),t(c,{label:"评测时长限制",required:""},{default:l(()=>[t(i,{value:o.value.timeLimitM,"onUpdate:value":e[13]||(e[13]=s=>o.value.timeLimitM=s),placeholder:"请输入评测时长（分钟）",style:{width:"600px"}},null,8,["value"])]),_:1}),t(c,{label:"系统评分规则"},{default:l(()=>[t(A,{value:o.value.scoreRule,"onUpdate:value":e[14]||(e[14]=s=>o.value.scoreRule=s),class:"custom-radio"},{default:l(()=>[t(y,{value:1},{default:l(()=>e[35]||(e[35]=[p(" 通过全部测试集（仅当所有测试集都正确时，获得项目学时） ")])),_:1,__:[35]}),t(y,{value:2},{default:l(()=>e[36]||(e[36]=[p(" 通过部分测试集（任意一个测试集正确时，获得项目学时） ")])),_:1,__:[36]})]),_:1},8,["value"])]),_:1}),t(c,{label:"评测设置",required:""},{default:l(()=>[t(A,{value:o.value.evaluationSetting,"onUpdate:value":e[15]||(e[15]=s=>o.value.evaluationSetting=s),class:"custom-radio"},{default:l(()=>[t(y,{value:1},{default:l(()=>e[37]||(e[37]=[p(" 通过所有代码块评测（对学员任务文件的所有非空代码块进行评测） ")])),_:1,__:[37]}),t(y,{value:2},{default:l(()=>e[38]||(e[38]=[p(" 通过指定代码块评测（对学员任务文件的指定非空代码块进行评测） ")])),_:1,__:[38]})]),_:1},8,["value"])]),_:1})],64)):q("",!0)]),_:1})])]),o.value.openTestValidate===1?(f(),_("div",zt,[r("div",Bt,[e[41]||(e[41]=r("span",null,"测试集",-1)),r("div",Jt,[t(h,{onClick:be},{default:l(()=>e[40]||(e[40]=[p("新增测试集")])),_:1,__:[40]})])]),r("div",Ot,[(f(!0),_(C,null,X(o.value.testSets,(s,W)=>(f(),_("div",{key:s.id,class:"test-set-item"},[t(ce,{checked:s.select===1,onChange:U=>ke(s,U.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),r("span",Gt,"测试集"+I(W+1),1),t(i,{value:s.arg,"onUpdate:value":U=>s.arg=U,placeholder:"请输入输入内容",class:"test-set-input"},null,8,["value","onUpdate:value"]),t(i,{value:s.answer,"onUpdate:value":U=>s.answer=U,placeholder:"请输入期望输出",class:"test-set-input"},null,8,["value","onUpdate:value"]),t(x(gt),{class:"delete-test-set-icon",onClick:U=>he(s.id)},null,8,["onClick"])]))),128))])])):q("",!0),r("div",Kt,[t(h,{type:"primary",onClick:ie},{default:l(()=>[p(I(J.value?"更新":"保存"),1)]),_:1})])])]),_:1}),t(fe,{key:"reference",tab:"参考答案"},{default:l(()=>[r("div",Yt,[r("div",Qt,[e[46]||(e[46]=r("div",{class:"block-header"},"参考答案",-1)),r("div",Wt,[t(H,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[t(c,{label:"是否显示参考答案模块",required:""},{default:l(()=>[t(A,{value:g.value.showAnswer,"onUpdate:value":e[16]||(e[16]=s=>g.value.showAnswer=s),class:"custom-radio"},{default:l(()=>[t(y,{value:1},{default:l(()=>e[42]||(e[42]=[p("是")])),_:1,__:[42]}),t(y,{value:2},{default:l(()=>e[43]||(e[43]=[p("否")])),_:1,__:[43]})]),_:1},8,["value"])]),_:1}),t(c,{label:"是否禁止复制参考答案",required:""},{default:l(()=>[t(A,{value:g.value.prohibitCopyAnswer,"onUpdate:value":e[17]||(e[17]=s=>g.value.prohibitCopyAnswer=s),class:"custom-radio"},{default:l(()=>[t(y,{value:1},{default:l(()=>e[44]||(e[44]=[p("是")])),_:1,__:[44]}),t(y,{value:2},{default:l(()=>e[45]||(e[45]=[p("否")])),_:1,__:[45]})]),_:1},8,["value"])]),_:1}),t(c,{label:"参考答案",required:""},{default:l(()=>[t(me,{modelValue:g.value.referenceAnswer,"onUpdate:modelValue":e[18]||(e[18]=s=>g.value.referenceAnswer=s)},null,8,["modelValue"])]),_:1})]),_:1})])]),r("div",Xt,[t(h,{type:"primary",onClick:de},{default:l(()=>[p(I(O.value?"更新":"保存"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):q("",!0),r("div",Zt,[w.value===0?(f(),F(h,{key:0,onClick:ne},{default:l(()=>e[47]||(e[47]=[p("返回")])),_:1,__:[47]})):(f(),F(h,{key:1,onClick:ne},{default:l(()=>e[48]||(e[48]=[p("上一步")])),_:1,__:[48]})),w.value===2?(f(),F(h,{key:2,type:"primary",onClick:ue},{default:l(()=>e[49]||(e[49]=[p("完成更新")])),_:1,__:[49]})):(f(),F(h,{key:3,type:"primary",onClick:ue},{default:l(()=>e[50]||(e[50]=[p("下一步")])),_:1,__:[50]}))])])]),_:1},8,["spinning"])])}}}),ia=yt(ea,[["__scopeId","data-v-fd9a63fe"]]);export{ia as default};
