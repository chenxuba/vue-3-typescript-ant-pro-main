import{d as Ge,ak as Ke,f,o as Ye,w as le,c as _e,_,a1 as p,$ as u,k as a,ac as I,a7 as l,F as L,ag as G,u as M,a6 as F,G as d,a9 as q,ab as ye,y as Qe}from"./vue-PnzzEkKE.js";import{R as we,u as ke}from"./RichTextEditor-BZ6k2msk.js";import{b as K,d as We,g as Xe,s as Ze,a as be,c as et}from"./index-B1Xh1V9A.js";import{u as tt,a as at,e as lt}from"./dictionary-BH2xq6oF.js";import{g as ot,a as st}from"./dictionary-DmnWjV1N.js";import{H as U,j as nt,t as rt,x as oe,c as ut,a as it,m as vt,F as dt}from"./FileSelectModal-DSnXUhqr.js";import{a1 as r,a2 as ct,a3 as pt,z as ft,I as mt,a4 as gt,a5 as _t,a6 as yt,a7 as wt,a8 as kt,ac as bt,a9 as ht,H as Tt,J as Ct,K as St,aj as xt,Y as At,s as Lt,ah as It,af as Ut,T as Vt}from"./antd-Cme2pY03.js";import{_ as qt}from"./index-Du0fLm_v.js";const Rt={class:"config-jupyter-lab-page"},jt={class:"page-container"},Mt={class:"steps-section"},Dt={key:0},Ht={class:"form-section"},Pt={class:"flex items-top gap-16px"},Ft={class:"flex flex-col gap-12px"},Et={key:0,class:"image-preview"},Jt=["src"],zt={class:"flex items-top gap-16px"},Nt={class:"flex flex-col gap-12px"},Bt={key:0,class:"image-preview"},$t=["src"],Ot={class:"form-section"},Gt={key:1,class:"step-content"},Kt={class:"jupyter-header"},Yt={class:"jupyter-actions"},Qt={class:"jupyter-iframe-wrapper"},Wt={key:0,class:"loading-container"},Xt=["src"],Zt={key:2,class:"step-content evaluation-step"},ea={class:"evaluation-section"},ta={class:"section-block"},aa={class:"block-content"},la={style:{display:"flex","align-items":"center",gap:"8px"}},oa={key:0,class:"section-block"},sa={class:"block-header"},na={class:"header-actions"},ra={class:"block-content"},ua={class:"test-set-label"},ia={class:"tab-footer-buttons"},va={class:"reference-section"},da={class:"section-block"},ca={class:"block-content"},pa={class:"tab-footer-buttons"},fa={key:3,class:"step-content environment-step"},ma={class:"environment-section"},ga={class:"environment-container"},_a={class:"environment-left"},ya={class:"search-box"},wa={class:"environment-list"},ka=["onClick"],ba={class:"environment-right"},ha={class:"environment-config-header"},Ta={style:{display:"flex","align-items":"center",gap:"8px"}},Ca={class:"page-footer"},Sa=Ge({name:"ConfigJupyterLab",__name:"config-jupyter-lab",setup(xa){U.registerLanguage("javascript",nt),U.registerLanguage("typescript",rt),U.registerLanguage("xml",oe),U.registerLanguage("html",oe),U.registerLanguage("vue",oe),U.registerLanguage("css",ut),U.registerLanguage("json",it),U.registerLanguage("markdown",vt);const se=Ke(),w=f(0),b=f(null),y=f(null),E=f(),ne=f(),Y=f(""),R=f(!1),Q=f(!1),he=()=>{R.value=!R.value},W=f(""),X=f(""),J=f(!1),z=f(!1),re=window.location.origin,o=f({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:0,topCover:"",cover:"",description:"",showTaskRequire:!0,authType:1,enableCodeRepository:!1,repositoryType:"ä»£ç ä»“åº“",gitUrl:""});Ye(async()=>{var e;Z.load(),ie.load(),ee.load(),await Te();const t=history.state;console.log("æ¥æ”¶åˆ°çš„è·¯ç”±æ•°æ®:",t),t&&t.name?(o.value.name=t.name||"",o.value.description=t.description||"",o.value.difficulty=t.difficulty||1,o.value.environment=t.environment,o.value.secondType=t.secondType,o.value.classHour=t.classHour||0,o.value.showTaskRequire=t.showTaskRequire||!0,console.log("å·²è‡ªåŠ¨å¡«å……è¡¨å•æ•°æ®:",{name:o.value.name,description:o.value.description,descriptionLength:((e=o.value.description)==null?void 0:e.length)||0,difficulty:o.value.difficulty,environment:o.value.environment,secondType:o.value.secondType,classHour:o.value.classHour,showTaskRequire:o.value.showTaskRequire})):console.log("æœªæ¥æ”¶åˆ°è·¯ç”±æ•°æ®")}),le(w,async(t,e)=>{t===1&&e===0&&!y.value&&b.value&&(console.log("è¿›å…¥ç¬¬äºŒæ­¥ï¼ˆå®éªŒå†…å®¹ï¼‰ï¼Œè‡ªåŠ¨åˆ›å»ºä»»åŠ¡..."),await Me()),t===1&&y.value&&await ce()});const ue={name:[{required:!0,message:"è¯·è¾“å…¥åç§°",trigger:"blur"}],tag:[{required:!0,message:"è¯·è¾“å…¥æŠ€èƒ½æ ‡ç­¾",trigger:"blur"}],fieldType:[{required:!0,message:"è¯·é€‰æ‹©é¢†åŸŸç±»åˆ«",trigger:"change"}],difficulty:[{required:!0,message:"è¯·é€‰æ‹©éš¾åº¦",trigger:"change"}],environment:[{required:!0,message:"è¯·é€‰æ‹©å®éªŒç¯å¢ƒ",trigger:"change"}],topCover:[{required:!0,message:"è¯·ä¸Šä¼ é¡¶éƒ¨èƒŒæ™¯å›¾",trigger:"change"}],cover:[{required:!0,message:"è¯·ä¸Šä¼ å°é¢å›¾",trigger:"change"}],authType:[{required:!0,message:"è¯·é€‰æ‹©åŸ¹è®­å…¬å¼€èŒƒå›´",trigger:"change"}]},Z=tt(),ie=at(),ee=lt(),C=f([]),te=f(!1),Te=async()=>{try{te.value=!0;const t=ot(3),e=await st({code:t});e&&e.list&&(C.value=e.list.map(g=>({label:g.name,value:String(g.value)})),console.log("åŠ è½½ç¯å¢ƒé€‰é¡¹:",{environmentOptions:C.value,currentEnvironment:o.value.environment}),o.value.environment?(S.value=String(o.value.environment),h.value.dockerImage=String(o.value.environment),console.log("ä½¿ç”¨ç¬¬ä¸€æ­¥çš„ç¯å¢ƒ:",o.value.environment)):!S.value&&C.value.length>0&&(S.value=C.value[0].value,h.value.dockerImage=C.value[0].value,o.value.environment=C.value[0].value,console.log("é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªç¯å¢ƒ:",C.value[0])))}catch(t){console.error("åŠ è½½å®éªŒç¯å¢ƒé€‰é¡¹å¤±è´¥ï¼š",t),r.error("åŠ è½½å®éªŒç¯å¢ƒé€‰é¡¹å¤±è´¥")}finally{te.value=!1}},Ce=[{title:"åŸºæœ¬ä¿¡æ¯"},{title:"å®éªŒå†…å®¹"},{title:"è¯„æµ‹è®¾ç½®"},{title:"å®éªŒç¯å¢ƒ"}],ae=f(!1),Se=async t=>{var c;if(!(t.size/1024/1024<12))return r.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 12MB!"),!1;if(!(t.type==="image/jpeg"||t.type==="image/png"))return r.error("åªèƒ½ä¸Šä¼  JPG/PNG æ ¼å¼çš„å›¾ç‰‡!"),!1;try{J.value=!0;const v=await ke(t);W.value=re+v,o.value.topCover=v,(c=E.value)==null||c.validateFields(["topCover"]),r.success("é¡¶éƒ¨èƒŒæ™¯å›¾ä¸Šä¼ æˆåŠŸ")}catch{r.error("é¡¶éƒ¨èƒŒæ™¯å›¾ä¸Šä¼ å¤±è´¥")}finally{J.value=!1}return!1},xe=async t=>{var c;if(!(t.size/1024/1024<12))return r.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 12MB!"),!1;if(!(t.type==="image/jpeg"||t.type==="image/png"))return r.error("åªèƒ½ä¸Šä¼  JPG/PNG æ ¼å¼çš„å›¾ç‰‡!"),!1;try{z.value=!0;const v=await ke(t);X.value=re+v,o.value.cover=v,(c=E.value)==null||c.validateFields(["cover"]),r.success("å°é¢å›¾ä¸Šä¼ æˆåŠŸ")}catch{r.error("å°é¢å›¾ä¸Šä¼ å¤±è´¥")}finally{z.value=!1}return!1},ve=f("settings"),s=f({openTestValidate:1,testValidateFiles:"",testValidateSh:"",timeLimitM:"",classHour:void 0,scoreRule:1,evaluationSetting:1,testSets:[{id:1,answer:"",select:1},{id:2,answer:"",select:1}]}),m=f({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),D=f(!1),H=f(!1);let Ae=3;const Le=()=>{s.value.testSets.push({id:Ae++,answer:"",select:1})},Ie=t=>{if(s.value.testSets.length===1){r.warning("è‡³å°‘ä¿ç•™ä¸€ä¸ªæµ‹è¯•é›†");return}s.value.testSets=s.value.testSets.filter(e=>e.id!==t),r.success("åˆ é™¤æˆåŠŸ")},Ue=(t,e)=>{t.select=e?1:2},Ve=f([]),qe=t=>{Ve.value=t.map(g=>({uid:g.uid,name:g.name,status:"done",url:g.path}));const e=t.map(g=>g.path).join(",");s.value.testValidateFiles=e,r.success(`å·²é€‰æ‹© ${t.length} ä¸ªæ–‡ä»¶`),ae.value=!1},de=()=>{w.value===0?se.back():(w.value--,T())},Re=async()=>{try{const t={projectType:3,environment:o.value.environment,name:o.value.name,tag:o.value.tag,fieldType:o.value.fieldType,difficulty:o.value.difficulty,topCover:o.value.topCover,cover:o.value.cover,description:o.value.description,showTaskRequire:o.value.showTaskRequire?1:2,authType:o.value.authType,enableCodeRepository:o.value.enableCodeRepository,secondType:o.value.secondType};o.value.enableCodeRepository&&(t.repositoryType=o.value.repositoryType,t.gitUrl=o.value.gitUrl),console.log("æäº¤é¡¹ç›®æ•°æ®ï¼š",t);let e;b.value?(t.id=b.value,e=await be(t),r.success("é¡¹ç›®æ›´æ–°æˆåŠŸï¼"),console.log("æ›´æ–°æˆåŠŸï¼š",e)):(e=await et(t),e&&e.id&&(b.value=e.id,console.log("é¡¹ç›®IDå·²ä¿å­˜ï¼š",b.value)),r.success("é¡¹ç›®åˆ›å»ºæˆåŠŸï¼"),console.log("åˆ›å»ºæˆåŠŸï¼š",e)),w.value=1,T()}catch(t){console.error("æ“ä½œå¤±è´¥ï¼š",t),r.error(b.value?"é¡¹ç›®æ›´æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•":"é¡¹ç›®åˆ›å»ºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"),T()}},je=async()=>{var t,e;if(w.value===0)try{await Promise.all([(t=E.value)==null?void 0:t.validate(),(e=ne.value)==null?void 0:e.validate()]),console.log("è¡¨å•æ•°æ®ï¼š",o.value),await Re()}catch{r.error("è¯·å®Œå–„å¿…å¡«ä¿¡æ¯"),T()}else if(w.value===1)y.value&&await De(),w.value=2,T();else if(w.value===2)try{if(!y.value){r.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(s.value.openTestValidate===1){if(!s.value.timeLimitM){r.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶"),T();return}if(!s.value.classHour||s.value.classHour<=0){r.error("è¯·è¾“å…¥æœ‰æ•ˆçš„å­¦æ—¶"),T();return}if(!s.value.testSets||s.value.testSets.length===0){r.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†"),T();return}const i=s.value.testSets.filter(x=>x.select===1);if(i.length===0){r.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†"),T();return}for(let x=0;x<i.length;x++){const j=i[x];if(!j.answer||j.answer.trim()===""){r.error(`æµ‹è¯•é›†${x+1}çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º`),T();return}}}if(!m.value.referenceAnswer||m.value.referenceAnswer.trim()===""){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹"),T();return}if(!m.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹"),T();return}const c=s.value.testSets.map(i=>({answer:i.answer,select:i.select})),v={taskId:y.value,projectId:b.value,openTestValidate:s.value.openTestValidate,testValidateFiles:s.value.testValidateFiles,testValidateSh:s.value.testValidateSh,timeLimitM:s.value.timeLimitM,classHour:s.value.classHour,scoreRule:s.value.scoreRule,evaluationSetting:s.value.evaluationSetting,testContent:JSON.stringify(c),showAnswer:m.value.showAnswer,prohibitCopyAnswer:m.value.prohibitCopyAnswer,referenceAnswer:m.value.referenceAnswer};console.log("ä¸‹ä¸€æ­¥æ—¶ä¿å­˜è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆæ•°æ®ï¼š",v),await K(v),D.value=!0,H.value=!0,w.value=3,T()}catch(g){console.error("ä¿å­˜æ•°æ®å¤±è´¥ï¼š",g),r.error("ä¿å­˜æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•"),T()}},Me=async()=>{try{if(!b.value){console.error("é¡¹ç›®IDä¸å­˜åœ¨ï¼Œæ— æ³•åˆ›å»ºä»»åŠ¡");return}const t={type:4,projectId:b.value,name:"JupyterLabç¯å¢ƒå®è®­ä»»åŠ¡"};console.log("è‡ªåŠ¨æäº¤ä»»åŠ¡æ•°æ®ï¼š",t);const e=await We(t);e&&e.taskId&&(y.value=e.taskId,console.log("ä»»åŠ¡IDå·²ä¿å­˜ï¼š",y.value),r.success("ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼"),await ce())}catch(t){console.error("ä»»åŠ¡åˆ›å»ºå¤±è´¥ï¼š",t),r.error("ä»»åŠ¡åˆ›å»ºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}},ce=async()=>{if(!y.value){console.log("taskIdä¸å­˜åœ¨ï¼Œæ— æ³•è·å–Podé…ç½®");return}try{Q.value=!0,console.log("æ­£åœ¨è·å–Podé…ç½®ï¼ŒtaskId:",y.value);const t=await Xe({taskId:y.value});console.log("è·å–åˆ°Podæ•°æ®ï¼š",t),t&&t.config&&t.config.url?(Y.value=t.config.url,console.log("æ›´æ–°Jupyter URLä¸ºï¼š",Y.value),r.success("å®éªŒç¯å¢ƒåŠ è½½æˆåŠŸï¼")):(console.error("Podé…ç½®ä¸­æ²¡æœ‰urlå­—æ®µ"),r.warning("æœªè·å–åˆ°å®éªŒç¯å¢ƒURL"))}catch(t){console.error("è·å–Podé…ç½®å¤±è´¥ï¼š",t),r.error("è·å–å®éªŒç¯å¢ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{Q.value=!1}},De=async()=>{if(!y.value){console.log("taskIdä¸å­˜åœ¨ï¼Œæ— æ³•åœæ­¢Pod");return}try{console.log("æ­£åœ¨åœæ­¢Podï¼ŒtaskId:",y.value),await Ze({taskId:y.value}),console.log("Podåœæ­¢æˆåŠŸ"),r.success("å®éªŒç¯å¢ƒå·²åœæ­¢")}catch(t){console.error("åœæ­¢Podå¤±è´¥ï¼š",t),r.error("åœæ­¢å®éªŒç¯å¢ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}},He=async()=>{try{if(!y.value){r.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(s.value.openTestValidate===1){if(!s.value.timeLimitM){r.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶");return}if(!s.value.classHour||s.value.classHour<=0){r.error("è¯·è¾“å…¥æœ‰æ•ˆçš„å­¦æ—¶");return}if(!s.value.testSets||s.value.testSets.length===0){r.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†");return}const c=s.value.testSets.filter(v=>v.select===1);if(c.length===0){r.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†");return}for(let v=0;v<c.length;v++){const i=c[v];if(!i.answer||i.answer.trim()===""){r.error(`æµ‹è¯•é›†${v+1}çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º`);return}}}if(!m.value.referenceAnswer||m.value.referenceAnswer.trim()===""){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹");return}if(!m.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹");return}const e=s.value.testSets.map(c=>({answer:c.answer,select:c.select})),g={taskId:y.value,projectId:b.value,openTestValidate:s.value.openTestValidate,testValidateFiles:s.value.testValidateFiles,testValidateSh:s.value.testValidateSh,timeLimitM:s.value.timeLimitM,classHour:s.value.classHour,scoreRule:s.value.scoreRule,evaluationSetting:s.value.evaluationSetting,testContent:JSON.stringify(e),showAnswer:m.value.showAnswer,prohibitCopyAnswer:m.value.prohibitCopyAnswer,referenceAnswer:m.value.referenceAnswer};console.log("ä¿å­˜è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆæ•°æ®ï¼š",g),await K(g),D.value=!0,H.value=!0,r.success("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜æˆåŠŸï¼")}catch(t){console.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼š",t),r.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},Pe=async()=>{try{if(!y.value){r.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(s.value.openTestValidate===1){if(!s.value.timeLimitM){r.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶");return}if(!s.value.classHour||s.value.classHour<=0){r.error("è¯·è¾“å…¥æœ‰æ•ˆçš„å­¦æ—¶");return}if(!s.value.testSets||s.value.testSets.length===0){r.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†");return}const c=s.value.testSets.filter(v=>v.select===1);if(c.length===0){r.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†");return}for(let v=0;v<c.length;v++){const i=c[v];if(!i.answer||i.answer.trim()===""){r.error(`æµ‹è¯•é›†${v+1}çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º`);return}}}if(!m.value.referenceAnswer||m.value.referenceAnswer.trim()===""){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹");return}if(!m.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹");return}const e=s.value.testSets.map(c=>({answer:c.answer,select:c.select})),g={taskId:y.value,projectId:b.value,openTestValidate:s.value.openTestValidate,testValidateFiles:s.value.testValidateFiles,testValidateSh:s.value.testValidateSh,timeLimitM:s.value.timeLimitM,classHour:s.value.classHour,scoreRule:s.value.scoreRule,evaluationSetting:s.value.evaluationSetting,testContent:JSON.stringify(e),showAnswer:m.value.showAnswer,prohibitCopyAnswer:m.value.prohibitCopyAnswer,referenceAnswer:m.value.referenceAnswer};console.log("ä¿å­˜è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆæ•°æ®ï¼š",g),await K(g),D.value=!0,H.value=!0,r.success("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜æˆåŠŸï¼")}catch(t){console.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼š",t),r.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},Fe=async()=>{try{if(!b.value){r.error("é¡¹ç›®IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºé¡¹ç›®");return}if(!y.value){r.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(!D.value){r.error("è¯·å…ˆä¿å­˜è¯„æµ‹è®¾ç½®åå†å®Œæˆåˆ›å»º");return}if(!H.value){r.error("è¯·å…ˆä¿å­˜å‚è€ƒç­”æ¡ˆåå†å®Œæˆåˆ›å»º");return}if(!h.value.dockerImage){r.error("è¯·é€‰æ‹©å®éªŒç¯å¢ƒ");return}if(!h.value.timeLimitM){r.error("è¯·è¾“å…¥å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿");return}await K({taskId:y.value,projectId:b.value,dockerImage:h.value.dockerImage,secondType:h.value.secondType,timeLimitM:h.value.timeLimitM}),await be({id:b.value,status:10}),r.success("é¡¹ç›®åˆ›å»ºæˆåŠŸï¼"),setTimeout(()=>{se.push("/dashboard/analysis")},500)}catch(t){console.error("å®Œæˆåˆ›å»ºå¤±è´¥ï¼š",t),r.error("å®Œæˆåˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•")}},S=f(""),N=f(""),Ee=_e(()=>N.value?C.value.filter(t=>t.label.toLowerCase().includes(N.value.toLowerCase())):C.value),Je=_e(()=>{const t=C.value.find(e=>e.value===S.value);return t?t.label:"æœªé€‰æ‹©"}),h=f({dockerImage:"",secondType:"Css",timeLimitM:""}),ze=t=>{S.value=t,h.value.dockerImage=t,o.value.environment!==t&&(o.value.environment=t)};le(()=>o.value.environment,t=>{console.log("formData.environment å˜åŒ–:",t,"å½“å‰ selectedEnvironment:",S.value),t&&String(t)!==S.value&&(S.value=String(t),h.value.dockerImage=String(t),console.log("å·²åŒæ­¥åˆ°ç¬¬å››æ­¥:",S.value))}),le(()=>S.value,t=>{console.log("selectedEnvironment å˜åŒ–ä¸º:",t)});const T=()=>{Qe(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const t=document.querySelector(".page-content");t&&(t.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(c=>{c.scrollTop>0&&(c.scrollTop=0)})})};return(t,e)=>{const g=ct,c=pt,v=mt,i=ft,x=_t,j=yt,pe=gt,k=kt,V=wt,B=bt,A=Tt,fe=ht,me=Ct,P=St,Ne=xt,Be=At,$e=It,ge=Lt,Oe=Vt;return p(),_("div",Rt,[e[55]||(e[55]=u("div",{class:"page-header"},[u("h2",null,"JupyterLabç¯å¢ƒå®è®­é¡¹ç›®é…ç½®")],-1)),u("div",jt,[u("div",Mt,[a(c,{current:w.value,class:"custom-steps"},{default:l(()=>[(p(),_(L,null,G(Ce,(n,$)=>a(g,{key:$,title:n.title},null,8,["title"])),64))]),_:1},8,["current"])]),w.value===0?(p(),_("div",Dt,[e[30]||(e[30]=u("div",{class:"section-title"},[u("h3",null,"åŸºæœ¬ä¿¡æ¯")],-1)),u("div",Ht,[a(P,{ref_key:"formRef",ref:E,model:o.value,rules:ue,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[a(i,{label:"åç§°",name:"name",required:""},{default:l(()=>[a(v,{value:o.value.name,"onUpdate:value":e[0]||(e[0]=n=>o.value.name=n),placeholder:"è¯·è¾“å…¥åç§°"},null,8,["value"])]),_:1}),a(pe,null,{default:l(()=>[a(x,{span:12},{default:l(()=>[a(i,{label:"æŠ€èƒ½æ ‡ç­¾",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(v,{value:o.value.tag,"onUpdate:value":e[1]||(e[1]=n=>o.value.tag=n),placeholder:"è¯·è¾“å…¥æŠ€èƒ½æ ‡ç­¾"},null,8,["value"]),e[22]||(e[22]=u("div",{style:{"font-size":"12px",color:"#999","margin-top":"4px"}}," è¯·ä½¿ç”¨è‹±æ–‡çŠ¶æ€ä¸‹çš„é€—å·åˆ†éš”æŠ€èƒ½æ ‡ç­¾ï¼Œæ¯”å¦‚html,css,js ",-1))]),_:1,__:[22]})]),_:1}),a(x,{span:12},{default:l(()=>[a(i,{label:"é¢†åŸŸç±»åˆ«",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[a(j,{value:o.value.fieldType,"onUpdate:value":e[2]||(e[2]=n=>o.value.fieldType=n),placeholder:"è¯·é€‰æ‹©é¢†åŸŸç±»åˆ«",options:M(Z).options.value,loading:M(Z).loading.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),a(i,{label:"éš¾åº¦",name:"difficulty",required:""},{default:l(()=>[a(V,{value:o.value.difficulty,"onUpdate:value":e[3]||(e[3]=n=>o.value.difficulty=n),class:"custom-radio"},{default:l(()=>[(p(!0),_(L,null,G(M(ie).data.value,n=>(p(),F(k,{key:n.value,value:Number(n.value)},{default:l(()=>[d(q(n.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),a(pe,null,{default:l(()=>[a(x,{span:12},{default:l(()=>[a(i,{label:"å®éªŒç¯å¢ƒ",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(j,{value:o.value.environment,"onUpdate:value":e[4]||(e[4]=n=>o.value.environment=n),placeholder:"è¯·é€‰æ‹©å®éªŒç¯å¢ƒ",options:C.value,loading:te.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),a(i,{label:"å­¦æ—¶",name:"classHour"},{default:l(()=>[a(B,{min:0,disabled:"",class:"w-full",value:o.value.classHour,"onUpdate:value":e[5]||(e[5]=n=>o.value.classHour=n),placeholder:"é…ç½®ä»»åŠ¡åè‡ªåŠ¨è®¡ç®—å­¦æ—¶"},null,8,["value"])]),_:1}),a(i,{label:"é¡¶éƒ¨èƒŒæ™¯å›¾",name:"topCover",required:""},{default:l(()=>[u("div",Pt,[u("div",Ft,[a(fe,{"before-upload":Se,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[a(A,{loading:J.value},{default:l(()=>[J.value?(p(),_(L,{key:1},[d("ä¸Šä¼ ä¸­...")],64)):(p(),_(L,{key:0},[d("é€‰æ‹©æ–‡ä»¶")],64))]),_:1},8,["loading"])]),_:1}),W.value?(p(),_("div",Et,[u("img",{src:W.value,alt:"é¡¶éƒ¨èƒŒæ™¯å›¾é¢„è§ˆ",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,Jt)])):I("",!0)]),e[23]||(e[23]=u("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ png/jpegç­‰æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡12M,å»ºè®®ä½¿ç”¨290*218åƒç´ ã€‚ ",-1))])]),_:1}),a(i,{label:"å°é¢å›¾",name:"cover",required:""},{default:l(()=>[u("div",zt,[u("div",Nt,[a(fe,{"before-upload":xe,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[a(A,{loading:z.value},{default:l(()=>[z.value?(p(),_(L,{key:1},[d("ä¸Šä¼ ä¸­...")],64)):(p(),_(L,{key:0},[d("é€‰æ‹©æ–‡ä»¶")],64))]),_:1},8,["loading"])]),_:1}),X.value?(p(),_("div",Bt,[u("img",{src:X.value,alt:"å°é¢å›¾é¢„è§ˆ",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,$t)])):I("",!0)]),e[24]||(e[24]=u("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ png/jpegç­‰æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡12M,å»ºè®®ä½¿ç”¨290*218åƒç´ ã€‚ ",-1))])]),_:1}),a(i,{label:"ç®€ä»‹",name:"description"},{default:l(()=>[a(we,{modelValue:o.value.description,"onUpdate:modelValue":e[6]||(e[6]=n=>o.value.description=n)},null,8,["modelValue"])]),_:1}),a(i,{label:"ä»»åŠ¡è¦æ±‚",name:"showTaskRequire"},{default:l(()=>[a(me,{checked:o.value.showTaskRequire,"onUpdate:checked":e[7]||(e[7]=n=>o.value.showTaskRequire=n),disabled:""},{default:l(()=>e[25]||(e[25]=[d(" æ˜¾ç¤ºä»»åŠ¡è¦æ±‚ï¼ˆå‹¾é€‰åï¼Œå°†ä½œä¸ºä»»åŠ¡è¦æ±‚æ˜¾ç¤ºåœ¨ä»»åŠ¡é¡¹ç›®é‡Œï¼‰ ")])),_:1,__:[25]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[31]||(e[31]=u("div",{class:"section-title"},[u("h3",null,"åŸ¹è®­å…¬å¼€èŒƒå›´")],-1)),u("div",Ot,[a(P,{ref_key:"trainingScopeFormRef",ref:ne,model:o.value,rules:ue,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[a(i,{label:"åŸ¹è®­å…¬å¼€èŒƒå›´",name:"authType",required:""},{default:l(()=>[a(V,{value:o.value.authType,"onUpdate:value":e[8]||(e[8]=n=>o.value.authType=n),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[26]||(e[26]=[d("å®Œå…¨å…¬å¼€")])),_:1,__:[26]}),a(k,{value:2},{default:l(()=>e[27]||(e[27]=[d("å…¨é™¢å…¬å¼€")])),_:1,__:[27]}),a(k,{value:3},{default:l(()=>e[28]||(e[28]=[d("æœ¬å•ä½å…¬å¼€")])),_:1,__:[28]}),a(k,{value:4},{default:l(()=>e[29]||(e[29]=[d("ä¸å…¬å¼€")])),_:1,__:[29]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):I("",!0),w.value===1?(p(),_("div",Gt,[u("div",{class:ye(["jupyter-container",{fullscreen:R.value}])},[u("div",Kt,[e[32]||(e[32]=u("h3",null,"Jupyter Lab ç¼–è¾‘å™¨",-1)),u("div",Yt,[a(Ne,{title:R.value?"é€€å‡ºå…¨å±":"å…¨å±"},{default:l(()=>[a(A,{type:"text",icon:R.value?"fullscreen-exit":"fullscreen",onClick:he},{default:l(()=>[d(q(R.value?"é€€å‡ºå…¨å±":"å…¨å±"),1)]),_:1},8,["icon"])]),_:1},8,["title"])])]),u("div",Qt,[Q.value?(p(),_("div",Wt,[a(Be,{size:"large",tip:"æ­£åœ¨åŠ è½½å®éªŒç¯å¢ƒ..."})])):(p(),_("iframe",{key:1,src:Y.value,class:"jupyter-iframe",frameborder:"0",allowfullscreen:""},null,8,Xt))])],2)])):I("",!0),w.value===2?(p(),_("div",Zt,[a(Oe,{activeKey:ve.value,"onUpdate:activeKey":e[17]||(e[17]=n=>ve.value=n),class:"evaluation-tabs"},{default:l(()=>[a(ge,{key:"settings",tab:"è¯„æµ‹è®¾ç½®"},{default:l(()=>[u("div",ea,[u("div",ta,[e[40]||(e[40]=u("div",{class:"block-header"},"è¯„æµ‹æ–‡ä»¶",-1)),u("div",aa,[a(P,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[a(i,{label:"æ˜¯å¦å¯ç”¨è¯„æµ‹åŠŸèƒ½",required:""},{default:l(()=>[a(V,{value:s.value.openTestValidate,"onUpdate:value":e[9]||(e[9]=n=>s.value.openTestValidate=n),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[33]||(e[33]=[d("æ˜¯")])),_:1,__:[33]}),a(k,{value:2},{default:l(()=>e[34]||(e[34]=[d("å¦")])),_:1,__:[34]})]),_:1},8,["value"])]),_:1}),s.value.openTestValidate===1?(p(),_(L,{key:0},[a(i,{label:"è¯„æµ‹æ—¶é•¿é™åˆ¶",required:""},{default:l(()=>[u("div",la,[a(B,{value:s.value.timeLimitM,"onUpdate:value":e[10]||(e[10]=n=>s.value.timeLimitM=n),min:1,placeholder:"è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰",style:{width:"580px"}},null,8,["value"]),e[35]||(e[35]=u("span",null,"åˆ†é’Ÿ",-1))])]),_:1}),a(i,{label:"å­¦æ—¶",required:""},{default:l(()=>[a(B,{value:s.value.classHour,"onUpdate:value":e[11]||(e[11]=n=>s.value.classHour=n),min:0,placeholder:"è¯·è¾“å…¥å­¦æ—¶",style:{width:"600px"}},null,8,["value"])]),_:1}),a(i,{label:"ç³»ç»Ÿè¯„åˆ†è§„åˆ™"},{default:l(()=>[a(V,{value:s.value.scoreRule,"onUpdate:value":e[12]||(e[12]=n=>s.value.scoreRule=n),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[36]||(e[36]=[d(" é€šè¿‡å…¨éƒ¨æµ‹è¯•é›†ï¼ˆä»…å½“æ‰€æœ‰æµ‹è¯•é›†éƒ½æ­£ç¡®æ—¶ï¼Œè·å¾—é¡¹ç›®å­¦æ—¶ï¼‰ ")])),_:1,__:[36]}),a(k,{value:2},{default:l(()=>e[37]||(e[37]=[d(" é€šè¿‡éƒ¨åˆ†æµ‹è¯•é›†ï¼ˆä»»æ„ä¸€ä¸ªæµ‹è¯•é›†æ­£ç¡®æ—¶ï¼Œè·å¾—é¡¹ç›®å­¦æ—¶ï¼‰ ")])),_:1,__:[37]})]),_:1},8,["value"])]),_:1}),a(i,{label:"è¯„æµ‹è®¾ç½®",required:""},{default:l(()=>[a(V,{value:s.value.evaluationSetting,"onUpdate:value":e[13]||(e[13]=n=>s.value.evaluationSetting=n),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[38]||(e[38]=[d(" é€šè¿‡æ‰€æœ‰ä»£ç å—è¯„æµ‹ï¼ˆå¯¹å­¦å‘˜ä»»åŠ¡æ–‡ä»¶çš„æ‰€æœ‰éç©ºä»£ç å—è¿›è¡Œè¯„æµ‹ï¼‰ ")])),_:1,__:[38]}),a(k,{value:2},{default:l(()=>e[39]||(e[39]=[d(" é€šè¿‡æŒ‡å®šä»£ç å—è¯„æµ‹ï¼ˆå¯¹å­¦å‘˜ä»»åŠ¡æ–‡ä»¶çš„æŒ‡å®šéç©ºä»£ç å—è¿›è¡Œè¯„æµ‹ï¼‰ ")])),_:1,__:[39]})]),_:1},8,["value"])]),_:1})],64)):I("",!0)]),_:1})])]),s.value.openTestValidate===1?(p(),_("div",oa,[u("div",sa,[e[42]||(e[42]=u("span",null,"æµ‹è¯•é›†",-1)),u("div",na,[a(A,{onClick:Le},{default:l(()=>e[41]||(e[41]=[d("æ–°å¢æµ‹è¯•é›†")])),_:1,__:[41]})])]),u("div",ra,[(p(!0),_(L,null,G(s.value.testSets,(n,$)=>(p(),_("div",{key:n.id,class:"test-set-item"},[a(me,{checked:n.select===1,onChange:O=>Ue(n,O.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),u("span",ua,"æµ‹è¯•é›†"+q($+1),1),a($e,{value:n.answer,"onUpdate:value":O=>n.answer=O,placeholder:"è¯·è¾“å…¥æœŸæœ›è¾“å‡º",class:"test-set-input","auto-size":{minRows:3}},null,8,["value","onUpdate:value"]),a(M(Ut),{class:"delete-test-set-icon",onClick:O=>Ie(n.id)},null,8,["onClick"])]))),128))])])):I("",!0),u("div",ia,[a(A,{type:"primary",onClick:He},{default:l(()=>[d(q(D.value?"æ›´æ–°":"ä¿å­˜"),1)]),_:1})])])]),_:1}),a(ge,{key:"reference",tab:"å‚è€ƒç­”æ¡ˆ"},{default:l(()=>[u("div",va,[u("div",da,[e[47]||(e[47]=u("div",{class:"block-header"},"å‚è€ƒç­”æ¡ˆ",-1)),u("div",ca,[a(P,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[a(i,{label:"æ˜¯å¦æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆæ¨¡å—",required:""},{default:l(()=>[a(V,{value:m.value.showAnswer,"onUpdate:value":e[14]||(e[14]=n=>m.value.showAnswer=n),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[43]||(e[43]=[d("æ˜¯")])),_:1,__:[43]}),a(k,{value:2},{default:l(()=>e[44]||(e[44]=[d("å¦")])),_:1,__:[44]})]),_:1},8,["value"])]),_:1}),a(i,{label:"æ˜¯å¦ç¦æ­¢å¤åˆ¶å‚è€ƒç­”æ¡ˆ",required:""},{default:l(()=>[a(V,{value:m.value.prohibitCopyAnswer,"onUpdate:value":e[15]||(e[15]=n=>m.value.prohibitCopyAnswer=n),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[45]||(e[45]=[d("æ˜¯")])),_:1,__:[45]}),a(k,{value:2},{default:l(()=>e[46]||(e[46]=[d("å¦")])),_:1,__:[46]})]),_:1},8,["value"])]),_:1}),a(i,{label:"å‚è€ƒç­”æ¡ˆ",required:""},{default:l(()=>[a(we,{modelValue:m.value.referenceAnswer,"onUpdate:modelValue":e[16]||(e[16]=n=>m.value.referenceAnswer=n)},null,8,["modelValue"])]),_:1})]),_:1})])]),u("div",pa,[a(A,{type:"primary",onClick:Pe},{default:l(()=>[d(q(H.value?"æ›´æ–°":"ä¿å­˜"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):I("",!0),w.value===3?(p(),_("div",fa,[u("div",ma,[e[50]||(e[50]=u("h3",{class:"section-main-title"},"å®éªŒç¯å¢ƒ",-1)),u("div",ga,[u("div",_a,[u("div",ya,[a(v,{value:N.value,"onUpdate:value":e[18]||(e[18]=n=>N.value=n),placeholder:"æœç´¢éœ€è¦çš„å®éªŒç¯å¢ƒ","allow-clear":""},{suffix:l(()=>e[48]||(e[48]=[u("span",{class:"search-icon"},"ğŸ”",-1)])),_:1},8,["value"])]),u("div",wa,[(p(!0),_(L,null,G(Ee.value,n=>(p(),_("div",{key:n.value,class:ye(["environment-item",{active:S.value===n.value}]),onClick:$=>ze(n.value)},q(n.label),11,ka))),128))])]),u("div",ba,[u("div",ha," å®éªŒç¯å¢ƒ: "+q(Je.value),1),a(P,{model:h.value,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}},{default:l(()=>[a(i,{label:"é™„å¸¦ç¯å¢ƒ"},{default:l(()=>[a(j,{value:h.value.secondType,"onUpdate:value":e[19]||(e[19]=n=>h.value.secondType=n),placeholder:"è¯·é€‰æ‹©é™„å¸¦ç¯å¢ƒ",options:M(ee).options.value,loading:M(ee).loading.value},null,8,["value","options","loading"])]),_:1}),a(i,{label:"å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿"},{default:l(()=>[u("div",Ta,[a(B,{value:h.value.timeLimitM,"onUpdate:value":e[20]||(e[20]=n=>h.value.timeLimitM=n),min:1,placeholder:"è¯·è¾“å…¥å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿",style:{flex:"1"}},null,8,["value"]),e[49]||(e[49]=u("span",null,"åˆ†",-1))])]),_:1})]),_:1},8,["model"])])])])])):I("",!0),u("div",Ca,[w.value===0?(p(),F(A,{key:0,onClick:de},{default:l(()=>e[51]||(e[51]=[d("è¿”å›")])),_:1,__:[51]})):(p(),F(A,{key:1,onClick:de},{default:l(()=>e[52]||(e[52]=[d("ä¸Šä¸€æ­¥")])),_:1,__:[52]})),w.value===3?(p(),F(A,{key:2,type:"primary",onClick:Fe},{default:l(()=>e[53]||(e[53]=[d("å®Œæˆåˆ›å»º")])),_:1,__:[53]})):(p(),F(A,{key:3,type:"primary",onClick:je},{default:l(()=>e[54]||(e[54]=[d("ä¸‹ä¸€æ­¥")])),_:1,__:[54]}))])]),a(dt,{open:ae.value,"onUpdate:open":e[21]||(e[21]=n=>ae.value=n),title:"é€‰æ‹©è¯„æµ‹æ–‡ä»¶","git-url":o.value.gitUrl,onConfirm:qe},null,8,["open","git-url"])])}}}),Ma=qt(Sa,[["__scopeId","data-v-63090c64"]]);export{Ma as default};
