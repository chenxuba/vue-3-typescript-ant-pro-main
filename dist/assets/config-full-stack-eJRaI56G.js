import{d as bl,a9 as Cl,f as y,o as Tl,c as wl,w as Ul,_ as g,a1 as p,$ as n,k as t,ad as b,a7 as a,G as c,F as P,a6 as T,u as o,H as re,a2 as xl,aa as I,ah as A,af as ql,ac as H,B as lt,y as xe}from"./vue-C8C4cLDH.js";import{R as qe,u as at,a as Rl,s as Il,c as Fl,g as st,d as Pl}from"./RichTextEditor-BXGP8hIw.js";import{u as Ll,a as ot,c as Sl}from"./index-DryvssBT.js";import{H as L,j as Nl,t as Ml,x as Re,c as El,a as jl,m as Vl,u as $l,F as Bl,b as Al,R as Hl,N as Kl,d as Ol}from"./useFileTree-DvBmMYxC.js";import{u as Ql,Q as zl}from"./useTaskLevel-D1aAaGxU.js";import{a7 as Dl,a8 as Gl,U as Jl,V as Wl,a9 as Xl,aa as Yl,w as Zl,ab as ea,ac as ta,ad as la,H as aa,$ as sa,a0 as oa,y as na,ae as nt,c as ia,f as ra,J as ua,af as da,ag as ca,ah as pa,ai as it,aj as ue,T as va,x as fa,D as ma,K as ga,ak as v,M as ya}from"./antd-BOMTo3h8.js";import{_ as _a}from"./index-D6cQR864.js";const ka={class:"config-full-stack-page"},ha={class:"page-content"},ba={class:"steps-container"},Ca={key:0},Ta={class:"form-section"},wa={class:"flex items-top gap-16px"},Ua={class:"flex flex-col gap-12px"},xa={key:0,class:"image-preview"},qa=["src"],Ra={class:"flex items-top gap-16px"},Ia={class:"flex flex-col gap-12px"},Fa={key:0,class:"image-preview"},Pa=["src"],La={class:"form-section"},Sa={key:1},Na={class:"form-section repository-section"},Ma={class:"repository-top-bar flex items-center gap-16px justify-between"},Ea={class:"repository-url-group"},ja={class:"repository-main-area"},Va={class:"repository-left"},$a={class:"repository-switch-box flex items-center justify-between"},Ba={class:"flex items-center gap-12px"},Aa={key:1,class:"repository-tips"},Ha={class:"repository-right"},Ka={key:1,class:"empty-area"},Oa={key:2},Qa={class:"task-level-section"},za={class:"task-level-header"},Da={class:"header-buttons"},Ga={class:"task-level-main"},Ja={class:"task-level-list"},Wa={class:"list-title"},Xa={class:"list-items"},Ya=["onClick"],Za={class:"item-name"},es={class:"task-level-detail"},ts={key:0,class:"detail-content"},ls={key:0,class:"questions-content"},as={key:1,class:"questions-list"},ss=["onDragstart","onDrop"],os={class:"question-header"},ns={class:"question-number-with-drag"},is={class:"question-number"},rs={class:"action-icons"},us={class:"question-title"},ds={key:0,class:"flex"},cs=["innerHTML"],ps={key:1,style:{color:"#bfbfbf"}},vs={class:"question-options"},fs={class:"option-label"},ms={class:"option-content"},gs={key:0,class:"correct-tag"},ys={class:"question-explanation"},_s={class:"explanation-content"},ks={key:0},hs={key:1,style:{color:"#bfbfbf"}},bs={class:"evaluation-content"},Cs={class:"evaluation-section"},Ts={class:"evaluation-section"},ws={class:"evaluation-section"},Us={class:"case-type-row"},xs={key:0,class:"test-case-buttons"},qs={key:0,class:"test-cases-list"},Rs={class:"test-case-label"},Is={key:0,class:"form-footer-buttons"},Fs={key:1,class:"empty-detail"},Ps={key:3,class:"step-content"},Ls={class:"content-card"},Ss={class:"environment-header"},Ns={class:"environment-actions"},Ms={class:"tab-label"},Es=["onDblclick"],js={class:"experiment-image-info"},Vs={class:"experiment-interfaces"},$s={key:0,style:{color:"#999"}},Bs={key:1,style:{color:"#999"}},As={class:"page-footer"},rt="http://101.200.13.193",Hs=bl({name:"ConfigFullStack",__name:"config-full-stack",setup(Ks){L.registerLanguage("javascript",Nl),L.registerLanguage("typescript",Ml),L.registerLanguage("xml",Re),L.registerLanguage("html",Re),L.registerLanguage("vue",Re),L.registerLanguage("css",El),L.registerLanguage("json",jl),L.registerLanguage("markdown",Vl);const Ie=Cl(),x=y(0),F=y(null),Y=y(),Fe=y(),Z=y(),i=y({name:"",tag:"",fieldType:void 0,difficulty:1,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1,enableCodeRepository:!1,repositoryType:"代码仓库",gitUrl:"",environment:void 0}),de=y(""),ce=y(""),ee=y(!1),te=y(!1),S=y(void 0),ut=()=>({1:"Python3.6",2:"Python3.13",3:"Python3.12/VNC"})[S.value||1]||"Python3.6";Tl(()=>{var e;const l=history.state;console.log("接收到的路由数据:",l),l&&l.name?(i.value.name=l.name||"",i.value.description=l.description||"",i.value.difficulty=l.difficulty||1,i.value.classHour=l.classHour||"",i.value.showTaskRequire=l.showTaskRequire||!1,S.value=l.environment||1,console.log("已自动填充表单数据:",{name:i.value.name,description:i.value.description,descriptionLength:((e=i.value.description)==null?void 0:e.length)||0,difficulty:i.value.difficulty,classHour:i.value.classHour,showTaskRequire:i.value.showTaskRequire,environment:S.value})):(console.log("未接收到路由数据"),S.value=1),pt()});const Pe={name:[{required:!0,message:"请输入名称",trigger:"blur"}],tag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],fieldType:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],topCover:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],authType:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},dt=[{label:"人工智能",value:1},{label:"大数据",value:2},{label:"云计算",value:3},{label:"Web开发",value:4}],ct=[{label:"切换仓库",value:"切换仓库"},{label:"代码仓库",value:"代码仓库"},{label:"私密代码仓库",value:"私密代码仓库"}],K=y(!1),pe=y(new Set),q=y([]),pt=()=>{q.value.length===0&&(q.value=[{id:"1",name:"实验环境1",isEditing:!1,isSaved:!1,config:{dockerImage:S.value||1,viewTypes:[],secondType:void 0,taskId:void 0,codeType:void 0,shellBegin:void 0,containerPort:void 0,containerPath:void 0}}])},$=y("1"),O=y(""),vt={dockerImage:[{required:!0,message:"请选择实验镜像",trigger:"change"}],viewTypes:[{required:!0,type:"array",min:1,message:"请至少选择一个实验界面",trigger:"change"}],secondType:[{required:!0,message:"请选择附带环境",trigger:"change"}],taskId:[{required:!0,message:"请选择任务关卡",trigger:"change"}],codeType:[{required:!0,message:"请选择编程语言",trigger:"change"}],shellBegin:[{required:!0,message:"请输入开启时触发命令",trigger:"blur"}],containerPort:[{required:!0,message:"请输入容器端口",trigger:"blur"}]},Le=wl(()=>{var e;const l=q.value.find(u=>u.id===$.value);return(l==null?void 0:l.config)||((e=q.value[0])==null?void 0:e.config)}),{fileTreeData:Se,expandedKeys:ve,selectedFile:ft,highlightedCode:mt,dynamicFileContents:gt,handleSelectFile:yt,getNodePath:Ne,addFileToTree:Me,addFolderToTree:_t,handleRenameNode:kt,handleCopyPath:ht,loadRemoteFileTree:bt,loadChildrenData:Ct,getNodePathFromMap:fe}=$l(),{taskLevels:N,selectedTaskLevelId:Ee,currentTab:B,taskLevelFormRef:me,evaluationFormRef:Tt,taskLevelFormData:_,evaluationFormData:w,learningResourceFileList:ge,taskLevelFormRules:wt,evaluationFormRules:Ut,isKernelTask:xt,isChoiceTask:ye,isProgrammingTask:je,addTaskLevel:_e,deleteTaskLevel:qt,selectTaskLevel:ke,saveTaskLevel:Rt,resetTaskLevel:It,handleLearningResourceCustomRequest:he,handleLearningResourceUpload:Ft,handleUserFilesUpload:Pt,handleTestValidateFilesUpload:Lt,userFileList:be,testValidateFileList:Ce,addTestCase:St,removeTestCase:Nt,clearAllTestCases:Mt,downloadTemplate:Et,batchUploadTestCases:jt,getCurrentQuestions:le,addQuestion:Vt,deleteQuestion:$t,updateQuestion:Bt,updateQuestionsOrder:At,loadQuestions:Ve,saveQuestionsOrder:Ht}=Ql(F),Q=y(!1),ae=y(!1),se=y(!1),oe=y(!1),z=y(null),D=y("/"),G=y("/"),$e=y(null),ne=y("/"),Kt=async l=>{var f;if(!(l.size/1024/1024<12))return v.error("图片大小不能超过 12MB!"),!1;if(!(l.type==="image/jpeg"||l.type==="image/png"))return v.error("只能上传 JPG/PNG 格式的图片!"),!1;try{ee.value=!0;const d=await at(l);de.value=rt+d,i.value.topCover=d,(f=Y.value)==null||f.validateFields(["topCover"]),v.success("顶部背景图上传成功")}catch{v.error("顶部背景图上传失败")}finally{ee.value=!1}return!1},Ot=async l=>{var f;if(!(l.size/1024/1024<12))return v.error("图片大小不能超过 12MB!"),!1;if(!(l.type==="image/jpeg"||l.type==="image/png"))return v.error("只能上传 JPG/PNG 格式的图片!"),!1;try{te.value=!0;const d=await at(l);ce.value=rt+d,i.value.cover=d,(f=Y.value)==null||f.validateFields(["cover"]),v.success("封面图上传成功")}catch{v.error("封面图上传失败")}finally{te.value=!1}return!1},Qt=l=>{(typeof l=="boolean"?l:!!l)?Q.value=!0:i.value.enableCodeRepository=!1},Be=async()=>{try{const l=v.loading("正在查询仓库文件...",0),e=await st(i.value.gitUrl,"");bt(e),pe.value.clear(),l(),v.success("仓库文件查询成功"),console.log("查询仓库地址：",i.value.gitUrl),console.log("获取到的文件列表：",e)}catch(l){v.error(l.message||"仓库文件查询失败"),console.error("仓库文件查询失败：",l)}},zt=async(l,e)=>{const{expanded:u,node:f}=e;if(u&&!f.isLeaf){const d=String(f.key);if(pe.value.has(d)){console.log("文件夹已加载，跳过：",d);return}try{const r=fe(d);console.log("加载文件夹：",r,"节点key:",d);const C=v.loading(`正在加载 ${f.title}...`,0),R=await st(i.value.gitUrl,r);Ct(d,R),pe.value.add(d),C(),console.log("文件夹加载成功：",r,R)}catch(r){v.error(r.message||"加载文件夹失败"),console.error("加载文件夹失败：",r)}}},Dt=async()=>{if(!i.value.gitUrl||!i.value.gitUrl.trim()){v.error("请先配置仓库地址"),Ae();return}i.value.enableCodeRepository=!0,Q.value=!1,K.value=!0,await Be()},Ae=()=>{i.value.enableCodeRepository=!1,Q.value=!1};Ul(()=>i.value.repositoryType,l=>{l==="切换仓库"&&i.value.enableCodeRepository&&(K.value=!1,v.info("已解锁仓库地址，请重新输入"),xe(()=>{i.value.repositoryType="代码仓库"}))});const Gt=()=>{var l;i.value.enableCodeRepository&&!K.value&&((l=i.value.gitUrl)!=null&&l.trim())&&(K.value=!0,Be())},Jt=l=>{switch(String(l.key)){case"newFile":Ke();break;case"newFolder":Oe();break;case"upload":He("/");break}},Wt=(l,e)=>{const u=String(l.key),f=fe(e.key)||Ne(e.key);switch(u){case"newFile":Ke(f);break;case"newFolder":Oe(f);break;case"upload":He(f);break;case"rename":kt(e);break;case"copyPath":ht(e);break;case"delete":Yt(e);break}},Xt=l=>{const e=u=>{const f=u.findIndex(d=>d.key===l);if(f!==-1)return u.splice(f,1),!0;for(const d of u)if(d.children&&e(d.children))return!0;return!1};e(Se.value)},Yt=async l=>{const e=l.children!==void 0||l.isLeaf===!1,u=l.title,d=(fe(l.key)||Ne(l.key)).split("/");d.pop();const r=d.join("/")||"";ya.confirm({title:"确认删除",content:`确定要删除${e?"文件夹":"文件"} "${u}" 吗？${e?"文件夹下的所有内容也会被删除。":""}`,okText:"确定",cancelText:"取消",okType:"danger",onOk:async()=>{let C=null;try{C=v.loading("正在删除...",0),await Pl({fileName:u,gitUrl:i.value.gitUrl,path:r}),Xt(l.key),C(),v.success("删除成功"),console.log("删除成功：",{fileName:u,path:r})}catch(R){C&&C(),v.error(R.message||"删除失败"),console.error("删除失败：",R)}}})},He=l=>{var e;ne.value=l,(e=$e.value)==null||e.click()},Zt=async l=>{var f;const e=l.target,u=(f=e.files)==null?void 0:f[0];if(u)try{let d=ne.value==="/"?"":ne.value.replace(/^\//,"");const r=v.loading(`正在上传 ${u.name}...`,0);await Rl(u,i.value.gitUrl,d);const C=new FileReader;C.onload=R=>{var h;const Ue=(h=R.target)==null?void 0:h.result;Me(u.name,Ue,ne.value)},C.readAsText(u),r(),v.success(`文件 ${u.name} 上传成功`),console.log("文件上传成功：",{fileName:u.name,path:d})}catch(d){v.error(d.message||"文件上传失败"),console.error("文件上传失败：",d)}finally{e&&(e.value="")}},Ke=(l="/")=>{ae.value=!0,D.value=l},el=async l=>{try{let e=D.value==="/"?"":D.value.replace(/^\//,"");const u=v.loading("正在保存文件...",0);await Il({fileContent:l.fileContent,fileName:l.fileName,gitUrl:i.value.gitUrl,path:e,commit:l.commitMessage}),Me(l.fileName,l.fileContent,D.value),u(),v.success("文件创建成功"),ae.value=!1,console.log("文件保存成功：",{fileName:l.fileName,path:e})}catch(e){v.error(e.message||"文件创建失败"),console.error("文件创建失败：",e)}},Oe=(l="/")=>{se.value=!0,G.value=l},tl=async l=>{try{let e=G.value==="/"?l.folderName:`${G.value.replace(/^\//,"")}/${l.folderName}`;const u=v.loading("正在创建文件夹...",0);await Fl({commit:l.commitMessage,gitUrl:i.value.gitUrl,path:e}),_t(l.folderName,G.value),u(),v.success("文件夹创建成功"),se.value=!1,console.log("文件夹创建成功：",{folderName:l.folderName,path:e})}catch(e){v.error(e.message||"文件夹创建失败"),console.error("文件夹创建失败：",e)}},J=()=>{xe(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const l=document.querySelector(".page-content");l&&(l.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(f=>{f.scrollTop>0&&(f.scrollTop=0)})})},Qe=()=>{x.value>0?(x.value--,J()):Ie.back()},ll=async()=>{var l,e;if(x.value===0)try{await Promise.all([(l=Y.value)==null?void 0:l.validate(),(e=Fe.value)==null?void 0:e.validate()]),console.log("表单数据：",i.value),x.value=1,J()}catch{v.error("请完善必填信息"),J()}else if(x.value===1){if(i.value.enableCodeRepository&&(!i.value.gitUrl||i.value.gitUrl.trim()==="")){v.error("请输入仓库地址");return}await al()}else if(x.value===2){if(N.value.length===0){v.error("请至少添加一个任务关卡");return}if(N.value.some(r=>!r.taskId)){v.error("请先保存所有任务关卡后再进行下一步");return}const f=N.value.find(r=>r.type==="choice"&&r.taskId&&(!r.questions||r.questions.length===0));if(f){v.warning("请至少新增一条题目"),ke(f.id),B.value="questions";return}const d=N.value.find(r=>r.type!=="programming"||!r.taskId||!r.evaluationSettings?!1:r.evaluationSettings.testValidateType===1?!r.evaluationSettings.testContent||r.evaluationSettings.testContent.length===0:!1);if(d){v.warning("用例类型为文本时，必须至少创建一条测试集"),ke(d.id),B.value="evaluation";return}x.value=3,J()}},al=async()=>{try{const l={projectType:1,environment:S.value,name:i.value.name,tag:i.value.tag,fieldType:i.value.fieldType,difficulty:i.value.difficulty,classHour:i.value.classHour,topCover:i.value.topCover,cover:i.value.cover,description:i.value.description,showTaskRequire:i.value.showTaskRequire?1:2,authType:i.value.authType,enableCodeRepository:i.value.enableCodeRepository};i.value.enableCodeRepository&&(l.repositoryType=i.value.repositoryType,l.gitUrl=i.value.gitUrl),console.log("提交项目数据：",l);let e;F.value?(l.id=F.value,e=await ot(l),v.success("项目更新成功！"),console.log("更新成功：",e)):(e=await Sl(l),e&&e.id&&(F.value=e.id,console.log("项目ID已保存：",F.value)),v.success("项目创建成功！"),console.log("创建成功：",e)),x.value=2,J()}catch(l){console.error("操作失败：",l),v.error(F.value?"项目更新失败，请稍后重试":"项目创建失败，请稍后重试")}},Te=async(l,e=0)=>{var u,f;try{if(e!==1){const r=["dockerImage","viewTypes","secondType","taskId"],C=[];l.config.viewTypes.includes(1)?r.push("codeType"):C.push("codeType"),l.config.viewTypes.includes(2)?r.push("shellBegin"):C.push("shellBegin"),l.config.viewTypes.includes(3)?r.push("containerPort"):C.push("containerPort"),C.length>0&&((u=Z.value)==null||u.clearValidate(C)),await((f=Z.value)==null?void 0:f.validate(r))}if(!F.value){v.error("项目ID不存在，无法保存");return}const d={title:l.name,dockerImage:l.config.dockerImage,viewTypes:l.config.viewTypes.join(","),secondType:l.config.secondType,taskId:l.config.taskId?Number(l.config.taskId):void 0,codeType:l.config.codeType,shellBegin:l.config.shellBegin,containerPort:l.config.containerPort,containerPath:l.config.containerPath,projectId:F.value,envisDel:e};console.log("保存实验环境数据：",d),await Ll(d),e!==1?(l.isSaved=!0,v.success("实验环境保存成功！")):v.success("删除成功！")}catch(d){console.error("保存失败：",d),v.error(e===1?"删除失败":"请完善必填信息")}},sl=async()=>{if(q.value.filter(e=>!e.isSaved).length>0){v.error("请先保存实验环境配置");return}if(!F.value){v.error("项目ID不存在，请先创建项目");return}try{await ot({id:F.value,status:1}),v.success("项目创建成功！"),setTimeout(()=>{Ie.push("/dashboard/analysis")},500)}catch(e){console.error("项目发布失败：",e),v.error(e.message||"项目发布失败")}},ol=l=>{var u;l.replace(/<[^>]*>/g,"").trim()&&((u=me.value)==null||u.clearValidate(["require"]))},nl=l=>{var u;l.replace(/<[^>]*>/g,"").trim()&&((u=me.value)==null||u.clearValidate(["referenceAnswer"]))},il=()=>{z.value=null,oe.value=!0},rl=l=>{z.value=l,oe.value=!0},ul=async l=>{z.value?Bt(l):Vt(l),z.value=null,_.value.taskId&&await Ve(_.value.taskId)},dl=l=>{try{return JSON.parse(l.selects||"[]").map(u=>{const f=Object.keys(u)[0];return{label:f,content:u[f]}})}catch{return[]}},ze=(l,e)=>l.answer.includes(e),M=y(null),cl=l=>{M.value=l},pl=l=>{l.preventDefault()},vl=async(l,e)=>{if(l.preventDefault(),M.value!==null&&M.value!==e){const u=[...le.value],[f]=u.splice(M.value,1);u.splice(e,0,f),u.forEach((d,r)=>{d.weight=r+1}),At(u);try{console.log("开始保存题目排序..."),await Ht(u),v.success("题目顺序已更新")}catch(d){console.error("保存题目排序失败:",d),v.error(d.message||"保存题目排序失败，请重试")}}M.value=null},fl=()=>{M.value=null},we=l=>{const e=Le.value;if(!e)return;const u=e.viewTypes.indexOf(l);u>-1?(e.viewTypes.splice(u,1),l===1?e.codeType=void 0:l===2?e.shellBegin=void 0:l===3&&(e.containerPort=void 0,e.containerPath=void 0)):e.viewTypes.push(l),xe(()=>{var f;(f=Z.value)==null||f.clearValidate(["viewTypes"])})},De=(l,e)=>{if(!e)return!1;const u=typeof e=="string"?Number(e):e;return q.value.some(f=>{if(!f.config.taskId)return!1;const d=typeof f.config.taskId=="string"?Number(f.config.taskId):f.config.taskId;return f.id!==l&&d===u})},ml=()=>{const l=String(Date.now()),e={id:l,name:`实验环境${q.value.length+1}`,isEditing:!1,isSaved:!1,config:{dockerImage:S.value||1,viewTypes:[],secondType:void 0,taskId:void 0,codeType:void 0,shellBegin:void 0,containerPort:void 0,containerPath:void 0}};q.value.push(e),$.value=l,v.success("添加实验环境成功")},gl=async l=>{if(q.value.length===1){v.warning("至少保留一个实验环境");return}const e=q.value.findIndex(u=>u.id===l);if(e>-1){const u=q.value[e];u.isSaved&&await Te(u,1),q.value.splice(e,1),$.value===l&&($.value=q.value[0].id),u.isSaved||v.success("删除实验环境成功")}},Ge=l=>{l.isEditing=!0,O.value=l.name},Je=l=>{O.value.trim()?(l.name=O.value.trim(),l.isEditing=!1,l.isSaved&&(v.success("重命名成功"),Te(l))):v.warning("名称不能为空")},yl=async l=>{const e=String(l);if(ye.value&&e==="questions"){if(!_.value.taskId){v.warning("请先保存创建任务后再添加题目");return}_.value.taskId&&await Ve(_.value.taskId)}if(je.value&&e==="evaluation"&&!_.value.taskId){v.warning("请先保存创建任务后再配置评测设置");return}B.value=e},_l=(l,e)=>{l.select=e?1:2};return(l,e)=>{const u=Dl,f=Gl,d=Wl,r=Jl,C=Yl,R=Zl,Ue=Xl,h=ta,E=ea,k=aa,W=la,We=sa,j=oa,kl=na,X=ra,Xe=ia,Ye=ma,Ze=da,ie=ua,et=ca,tt=va,V=fa;return p(),g("div",ka,[e[110]||(e[110]=n("div",{class:"page-header"},[n("h2",null,"全栈环境实训项目配置")],-1)),n("div",ha,[n("div",ba,[t(f,{current:x.value,class:"custom-steps"},{default:a(()=>[t(u,{title:"基本信息"}),t(u,{title:"代码仓库"}),t(u,{title:"任务关卡"}),t(u,{title:"实验环境"})]),_:1},8,["current"])]),x.value===0?(p(),g("div",Ca,[e[50]||(e[50]=n("div",{class:"section-title"},[n("h3",null,"基本信息")],-1)),n("div",Ta,[t(j,{ref_key:"formRef",ref:Y,model:i.value,rules:Pe,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:a(()=>[t(r,{label:"名称",name:"name",required:""},{default:a(()=>[t(d,{value:i.value.name,"onUpdate:value":e[0]||(e[0]=s=>i.value.name=s),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(Ue,null,{default:a(()=>[t(C,{span:12},{default:a(()=>[t(r,{label:"技能标签",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:a(()=>[t(d,{value:i.value.tag,"onUpdate:value":e[1]||(e[1]=s=>i.value.tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),t(C,{span:12},{default:a(()=>[t(r,{label:"领域类别",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:a(()=>[t(R,{value:i.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>i.value.fieldType=s),placeholder:"请选择领域类别",options:dt},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(r,{label:"难度",name:"difficulty",required:""},{default:a(()=>[t(E,{value:i.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>i.value.difficulty=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[40]||(e[40]=[c("简单")])),_:1,__:[40]}),t(h,{value:2},{default:a(()=>e[41]||(e[41]=[c("适中")])),_:1,__:[41]}),t(h,{value:3},{default:a(()=>e[42]||(e[42]=[c("困难")])),_:1,__:[42]})]),_:1},8,["value"])]),_:1}),t(r,{label:"学时",name:"classHour"},{default:a(()=>[t(d,{value:i.value.classHour,"onUpdate:value":e[4]||(e[4]=s=>i.value.classHour=s),placeholder:"配置任务后自动计算",disabled:""},null,8,["value"])]),_:1}),t(r,{label:"顶部背景图",name:"topCover",required:""},{default:a(()=>[n("div",wa,[n("div",Ua,[t(W,{"before-upload":Kt,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:a(()=>[t(k,{loading:ee.value},{default:a(()=>[ee.value?(p(),g(P,{key:1},[c("上传中...")],64)):(p(),g(P,{key:0},[c("选择文件")],64))]),_:1},8,["loading"])]),_:1}),de.value?(p(),g("div",xa,[n("img",{src:de.value,alt:"顶部背景图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,qa)])):b("",!0)]),e[43]||(e[43]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(r,{label:"封面图",name:"cover",required:""},{default:a(()=>[n("div",Ra,[n("div",Ia,[t(W,{"before-upload":Ot,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:a(()=>[t(k,{loading:te.value},{default:a(()=>[te.value?(p(),g(P,{key:1},[c("上传中...")],64)):(p(),g(P,{key:0},[c("选择文件")],64))]),_:1},8,["loading"])]),_:1}),ce.value?(p(),g("div",Fa,[n("img",{src:ce.value,alt:"封面图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,Pa)])):b("",!0)]),e[44]||(e[44]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(r,{label:"简介",name:"description"},{default:a(()=>[t(qe,{modelValue:i.value.description,"onUpdate:modelValue":e[5]||(e[5]=s=>i.value.description=s)},null,8,["modelValue"])]),_:1}),t(r,{label:"任务要求",name:"showTaskRequire"},{default:a(()=>[t(We,{checked:i.value.showTaskRequire,"onUpdate:checked":e[6]||(e[6]=s=>i.value.showTaskRequire=s)},{default:a(()=>e[45]||(e[45]=[c(" 显示任务要求（勾选后，将帮作为任务要求显示在任务项目政策面） ")])),_:1,__:[45]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[51]||(e[51]=n("div",{class:"section-title"},[n("h3",null,"培训公开范围")],-1)),n("div",La,[t(j,{ref_key:"trainingScopeFormRef",ref:Fe,model:i.value,rules:Pe,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:a(()=>[t(r,{label:"培训公开范围",name:"authType",required:""},{default:a(()=>[t(E,{value:i.value.authType,"onUpdate:value":e[7]||(e[7]=s=>i.value.authType=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[46]||(e[46]=[c("完全公开")])),_:1,__:[46]}),t(h,{value:2},{default:a(()=>e[47]||(e[47]=[c("全院公开")])),_:1,__:[47]}),t(h,{value:3},{default:a(()=>e[48]||(e[48]=[c("本单位公开")])),_:1,__:[48]}),t(h,{value:4},{default:a(()=>e[49]||(e[49]=[c("不公开")])),_:1,__:[49]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):b("",!0),x.value===1?(p(),g("div",Sa,[n("div",Na,[n("div",Ma,[t(R,{value:i.value.repositoryType,"onUpdate:value":e[8]||(e[8]=s=>i.value.repositoryType=s),options:ct,class:"repository-type-select"},null,8,["value"]),n("div",Ea,[e[52]||(e[52]=n("span",{class:"url-label"},"仓库地址：",-1)),t(d,{value:i.value.gitUrl,"onUpdate:value":e[9]||(e[9]=s=>i.value.gitUrl=s),placeholder:"请输入仓库地址",class:"url-input",disabled:K.value,onBlur:Gt},null,8,["value","disabled"])])]),n("div",ja,[n("div",Va,[n("div",$a,[n("div",Ba,[e[53]||(e[53]=n("span",{class:"switch-label"},"代码仓库",-1)),t(kl,{checked:i.value.enableCodeRepository,disabled:i.value.enableCodeRepository,onChange:Qt},null,8,["checked","disabled"])]),i.value.enableCodeRepository?(p(),T(Ye,{key:0},{overlay:a(()=>[t(Xe,{onClick:Jt},{default:a(()=>[t(X,{key:"newFile"},{default:a(()=>e[54]||(e[54]=[c("新建文件")])),_:1,__:[54]}),t(X,{key:"newFolder"},{default:a(()=>e[55]||(e[55]=[c("新建文件夹")])),_:1,__:[55]}),t(X,{key:"upload"},{default:a(()=>e[56]||(e[56]=[c("上传")])),_:1,__:[56]})]),_:1})]),default:a(()=>[t(k,{type:"primary",size:"small"},{default:a(()=>[t(o(nt)),e[57]||(e[57]=c(" 新建 "))]),_:1,__:[57]})]),_:1})):b("",!0)]),i.value.enableCodeRepository?(p(),T(Bl,{key:0,"file-tree-data":o(Se),"expanded-keys":o(ve),"onUpdate:expandedKeys":e[10]||(e[10]=s=>re(ve)?ve.value=s:null),onSelect:o(yt),onMenuClick:Wt,onExpand:zt},null,8,["file-tree-data","expanded-keys","onSelect"])):b("",!0),i.value.enableCodeRepository?(p(),g("div",Aa,e[58]||(e[58]=[xl('<div class="tips-title" data-v-0f49f091>提示：</div><div class="tips-content" data-v-0f49f091> 此处存放本实训所需的所有代码等相关文件，你可以通过以下： </div><div class="tips-list" data-v-0f49f091> 1、<a href="#" class="tips-link" data-v-0f49f091>Gitee客户端</a> 上传已有文件来开始使用。 </div><div class="tips-list" data-v-0f49f091> 2、直接在平台上创建文件目录以及相关代码文件。 </div>',4)]))):b("",!0)]),n("div",Ha,[i.value.enableCodeRepository?(p(),T(Al,{key:0,"selected-file":o(ft),"highlighted-code":o(mt),"dynamic-file-contents":o(gt)},null,8,["selected-file","highlighted-code","dynamic-file-contents"])):(p(),g("div",Ka," 在左侧代码仓库区域点击目录打开文件 "))])])])])):b("",!0),x.value===2?(p(),g("div",Oa,[n("div",Qa,[n("div",za,[n("div",Da,[t(k,{type:"primary",onClick:e[11]||(e[11]=s=>o(_e)("kernel"))},{default:a(()=>e[59]||(e[59]=[c("添加内核链接任务")])),_:1,__:[59]}),t(k,{type:"primary",onClick:e[12]||(e[12]=s=>o(_e)("choice"))},{default:a(()=>e[60]||(e[60]=[c("添加选择题任务")])),_:1,__:[60]}),t(k,{type:"primary",onClick:e[13]||(e[13]=s=>o(_e)("programming"))},{default:a(()=>e[61]||(e[61]=[c("添加编程任务")])),_:1,__:[61]})])]),n("div",Ga,[n("div",Ja,[n("div",Wa,"任务关卡 ("+I(o(N).length)+")",1),n("div",Xa,[(p(!0),g(P,null,A(o(N),s=>(p(),g("div",{key:s.id,class:H(["list-item",{active:o(Ee)===s.id}]),onClick:m=>o(ke)(s.id)},[n("span",Za,I(s.name),1),t(o(ue),{class:"delete-icon",onClick:lt(m=>o(qt)(s.id),["stop"])},null,8,["onClick"])],10,Ya))),128))])]),n("div",es,[o(Ee)?(p(),g("div",ts,[t(tt,{activeKey:o(B),onChange:yl},ql({default:a(()=>[t(ie,{key:"task",tab:"关联任务"},{default:a(()=>[t(j,{ref_key:"taskLevelFormRef",ref:me,model:o(_),rules:o(wt),layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(r,{label:"任务名称",name:"name",required:""},{default:a(()=>[t(d,{value:o(_).name,"onUpdate:value":e[14]||(e[14]=s=>o(_).name=s),placeholder:"请输入任务名称"},null,8,["value"])]),_:1}),t(r,{label:"学习资源",name:"source",required:""},{default:a(()=>[t(W,{"file-list":o(ge),"onUpdate:fileList":e[15]||(e[15]=s=>re(ge)?ge.value=s:null),"custom-request":o(he),onChange:o(Ft),accept:".doc,.docx,.pdf,.ppt,.pptx,.mp4","max-count":10},{default:a(()=>[t(k,{type:"primary"},{default:a(()=>e[63]||(e[63]=[c("点击上传")])),_:1,__:[63]})]),_:1},8,["file-list","custom-request","onChange"]),e[64]||(e[64]=n("div",{class:"upload-hint"}," 说明：支持上传word、pdf、ppt、mp4等格式文件，每个文件大小不能超过500M。 ",-1))]),_:1,__:[64]}),t(r,{label:"任务要求",name:"require",required:""},{default:a(()=>[t(qe,{modelValue:o(_).require,"onUpdate:modelValue":e[16]||(e[16]=s=>o(_).require=s),placeholder:"请输入任务要求",onChange:ol},null,8,["modelValue"])]),_:1}),t(r,{label:"参考答案",name:"referenceAnswer",required:""},{default:a(()=>[t(qe,{modelValue:o(_).referenceAnswer,"onUpdate:modelValue":e[17]||(e[17]=s=>o(_).referenceAnswer=s),placeholder:"请输入参考答案",onChange:nl},null,8,["modelValue"])]),_:1}),t(r,{label:"难度系数",name:"difficulty",required:""},{default:a(()=>[t(E,{value:o(_).difficulty,"onUpdate:value":e[18]||(e[18]=s=>o(_).difficulty=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[65]||(e[65]=[c("简单")])),_:1,__:[65]}),t(h,{value:2},{default:a(()=>e[66]||(e[66]=[c("适中")])),_:1,__:[66]}),t(h,{value:3},{default:a(()=>e[67]||(e[67]=[c("困难")])),_:1,__:[67]})]),_:1},8,["value"])]),_:1}),t(r,{label:"技能标签",name:"tag",required:""},{default:a(()=>[t(d,{value:o(_).tag,"onUpdate:value":e[19]||(e[19]=s=>o(_).tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1}),o(xt)?(p(),T(r,{key:0,label:"内嵌链接",name:"jumpUrl",required:""},{default:a(()=>[t(d,{value:o(_).jumpUrl,"onUpdate:value":e[20]||(e[20]=s=>o(_).jumpUrl=s),placeholder:"请输入内嵌链接"},null,8,["value"])]),_:1})):b("",!0),t(r,{label:"任务学时",name:"classHour",required:""},{default:a(()=>[t(Ze,{style:{width:"100%"},min:0,value:o(_).classHour,"onUpdate:value":e[21]||(e[21]=s=>o(_).classHour=s),placeholder:"请输入任务学时"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(ye)?(p(),T(ie,{key:"questions",tab:"题目"},{default:a(()=>[o(le).length===0?(p(),g("div",ls,[t(et,{description:"暂无题目，请点击右上方按钮新增题目"})])):(p(),g("div",as,[(p(!0),g(P,null,A(o(le),(s,m)=>(p(),g("div",{key:s.id,class:H(["question-item",{dragging:M.value===m}]),draggable:"true",onDragstart:U=>cl(m),onDragover:pl,onDrop:U=>vl(U,m),onDragend:fl},[n("div",os,[n("div",ns,[t(o(pa),{class:"drag-handle"}),n("span",is,"题目"+I(m+1),1)]),n("div",rs,[t(o(it),{class:"edit-icon",onClick:U=>rl(s)},null,8,["onClick"]),t(o(ue),{class:"delete-icon",onClick:U=>o($t)(s.id)},null,8,["onClick"])])]),n("div",us,[s.name?(p(),g("div",ds,[c(I(m+1)+"、 ",1),n("div",{innerHTML:s.name},null,8,cs)])):(p(),g("div",ps,"暂无题干"))]),n("div",vs,[(p(!0),g(P,null,A(dl(s),(U,hl)=>(p(),g("div",{key:hl,class:H(["option-row",{"is-correct":ze(s,U.label)}])},[n("span",fs,I(U.label)+".",1),n("span",ms,I(U.content),1),ze(s,U.label)?(p(),g("span",gs,"正确答案")):b("",!0)],2))),128))]),n("div",ys,[e[68]||(e[68]=n("div",{class:"explanation-label"},"答案解析：",-1)),n("div",_s,[s.answerKey?(p(),g("span",ks,I(s.answerKey),1)):(p(),g("span",hs,"暂无答案解析"))])])],42,ss))),128))]))]),_:1})):b("",!0),o(je)?(p(),T(ie,{key:"evaluation",tab:"评测设置"},{default:a(()=>[n("div",bs,[n("div",Cs,[e[75]||(e[75]=n("div",{class:"section-header"},"评测文件",-1)),t(j,{ref_key:"evaluationFormRef",ref:Tt,model:o(w),rules:o(Ut),layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(r,{label:"评测时长限制",name:"timeLimitM",required:""},{default:a(()=>[t(Ze,{value:o(w).timeLimitM,"onUpdate:value":e[22]||(e[22]=s=>o(w).timeLimitM=s),min:0,placeholder:"请输入评测时长限制",style:{width:"200px"}},null,8,["value"]),e[69]||(e[69]=n("span",{style:{"margin-left":"8px"}},"分钟",-1))]),_:1,__:[69]}),t(r,{label:"学员任务文件",name:"userFiles",required:""},{default:a(()=>[t(W,{"file-list":o(be),"onUpdate:fileList":e[23]||(e[23]=s=>re(be)?be.value=s:null),"custom-request":o(he),onChange:o(Pt),"max-count":10},{default:a(()=>[t(k,{type:"primary"},{default:a(()=>e[70]||(e[70]=[c("点击上传")])),_:1,__:[70]})]),_:1},8,["file-list","custom-request","onChange"]),e[71]||(e[71]=n("div",{class:"upload-hint"}," 说明：支持上传多个文件，每个文件大小不能超过500M。（学员评测基本任务时名称，查看效果页上需要编辑的文件类型） ",-1))]),_:1,__:[71]}),t(r,{label:"评测执行文件",name:"testValidateFiles",required:""},{default:a(()=>[t(W,{"file-list":o(Ce),"onUpdate:fileList":e[24]||(e[24]=s=>re(Ce)?Ce.value=s:null),"custom-request":o(he),onChange:o(Lt),"max-count":10},{default:a(()=>[t(k,{type:"primary"},{default:a(()=>e[72]||(e[72]=[c("点击上传")])),_:1,__:[72]})]),_:1},8,["file-list","custom-request","onChange"]),e[73]||(e[73]=n("div",{class:"upload-hint"},' 说明：支持上传多个文件，每个文件大小不能超过500M。（点击评测按钮时调用的文件，用于检验学员任务结果是否正确，可与"学员任务文件"一致） ',-1))]),_:1,__:[73]}),t(r,{label:"评测执行命令",name:"testValidateSh",required:""},{default:a(()=>[t(d,{value:o(w).testValidateSh,"onUpdate:value":e[25]||(e[25]=s=>o(w).testValidateSh=s),placeholder:"请输入评测执行命令，例如：python main.py"},null,8,["value"]),e[74]||(e[74]=n("div",{class:"upload-hint"}," （执行评测文件的命令，如：python main.py、node index.js、java Main 等） ",-1))]),_:1,__:[74]})]),_:1},8,["model","rules"])]),n("div",Ts,[e[81]||(e[81]=n("div",{class:"section-header"},"评测规则",-1)),t(j,{layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(r,{label:"通关判定"},{default:a(()=>[t(E,{value:o(w).passType,"onUpdate:value":e[26]||(e[26]=s=>o(w).passType=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[76]||(e[76]=[c("实际输出与期望输出对比")])),_:1,__:[76]}),t(h,{value:2},{default:a(()=>e[77]||(e[77]=[c("实际输出满足规则")])),_:1,__:[77]})]),_:1},8,["value"])]),_:1}),t(r,{label:"空格处理"},{default:a(()=>[t(E,{value:o(w).blankCode,"onUpdate:value":e[27]||(e[27]=s=>o(w).blankCode=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[78]||(e[78]=[c("不忽略空格")])),_:1,__:[78]}),t(h,{value:2},{default:a(()=>e[79]||(e[79]=[c("忽略首尾空格")])),_:1,__:[79]}),t(h,{value:3},{default:a(()=>e[80]||(e[80]=[c("忽略所有空格(仅通过空格中自动添加所有空格进行对比)")])),_:1,__:[80]})]),_:1},8,["value"])]),_:1})]),_:1})]),n("div",ws,[e[90]||(e[90]=n("div",{class:"section-header"},"测试集",-1)),t(j,{layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(r,{label:"得分规则"},{default:a(()=>[t(E,{value:o(w).scoreRule,"onUpdate:value":e[28]||(e[28]=s=>o(w).scoreRule=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[82]||(e[82]=[c("通过全部测试集（所有测试集都正确，才获取对应积分；否则得0学分）")])),_:1,__:[82]}),t(h,{value:2},{default:a(()=>e[83]||(e[83]=[c("通过部分测试集（选中的测试集全部正确，获取任务学分；否则得0学分）")])),_:1,__:[83]})]),_:1},8,["value"])]),_:1}),t(r,{label:"用例类型"},{default:a(()=>[n("div",Us,[t(E,{value:o(w).testValidateType,"onUpdate:value":e[29]||(e[29]=s=>o(w).testValidateType=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[84]||(e[84]=[c("文本")])),_:1,__:[84]}),t(h,{value:2},{default:a(()=>e[85]||(e[85]=[c("文件")])),_:1,__:[85]})]),_:1},8,["value"]),o(w).testValidateType===1?(p(),g("div",xs,[t(k,{type:"primary",onClick:o(St)},{default:a(()=>e[86]||(e[86]=[c("新增测试集")])),_:1,__:[86]},8,["onClick"]),t(k,{onClick:o(Mt)},{default:a(()=>e[87]||(e[87]=[c("一键删除测试用例")])),_:1,__:[87]},8,["onClick"]),t(k,{onClick:o(Et)},{default:a(()=>e[88]||(e[88]=[c("下载测试用例模板")])),_:1,__:[88]},8,["onClick"]),t(k,{onClick:o(jt)},{default:a(()=>e[89]||(e[89]=[c("批量上传测试用例")])),_:1,__:[89]},8,["onClick"])])):b("",!0)])]),_:1}),o(w).testValidateType===1&&o(w).testContent.length>0?(p(),g("div",qs,[(p(!0),g(P,null,A(o(w).testContent,(s,m)=>(p(),g("div",{key:s.id,class:"test-case-item"},[t(We,{checked:s.select===1,onChange:U=>_l(s,U.target.checked),class:"test-case-checkbox"},null,8,["checked","onChange"]),n("span",Rs,"测试集"+I(m+1),1),t(d,{value:s.arg,"onUpdate:value":U=>s.arg=U,placeholder:"请输入输入内容",class:"test-case-input"},null,8,["value","onUpdate:value"]),t(d,{value:s.answer,"onUpdate:value":U=>s.answer=U,placeholder:"请输入期望输出",class:"test-case-output"},null,8,["value","onUpdate:value"]),t(o(ue),{class:"delete-test-case",onClick:U=>o(Nt)(s.id)},null,8,["onClick"])]))),128))])):b("",!0)]),_:1})])])]),_:1})):b("",!0)]),_:2},[o(ye)&&o(B)==="questions"?{name:"tabBarExtraContent",fn:a(()=>[t(k,{type:"primary",onClick:il},{default:a(()=>[t(o(nt)),e[62]||(e[62]=c(" 新增题目 "))]),_:1,__:[62]})]),key:"0"}:void 0]),1032,["activeKey"]),o(B)!=="questions"?(p(),g("div",Is,[o(_).taskId?b("",!0):(p(),T(k,{key:0,onClick:o(It)},{default:a(()=>e[91]||(e[91]=[c("重置")])),_:1,__:[91]},8,["onClick"])),t(k,{type:"primary",onClick:o(Rt)},{default:a(()=>[c(I(o(_).taskId?"更新":"保存"),1)]),_:1},8,["onClick"])])):b("",!0)])):(p(),g("div",Fs,[t(et,{description:"请先添加任务关卡"})]))])])])])):b("",!0),x.value===3?(p(),g("div",Ps,[n("div",Ls,[n("div",Ss,[e[94]||(e[94]=n("h3",{class:"environment-title"},"实验环境",-1)),n("div",Ns,[t(k,{type:"primary",onClick:ml},{default:a(()=>e[92]||(e[92]=[c("添加实验环境")])),_:1,__:[92]}),t(k,null,{default:a(()=>e[93]||(e[93]=[c("设置")])),_:1,__:[93]})])]),t(j,{ref_key:"experimentFormRef",ref:Z,model:o(Le),rules:vt,"label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(tt,{activeKey:$.value,"onUpdate:activeKey":e[35]||(e[35]=s=>$.value=s)},{default:a(()=>[(p(!0),g(P,null,A(q.value,s=>(p(),T(ie,{key:s.id},{tab:a(()=>[n("div",Ms,[s.isEditing?(p(),T(d,{key:0,value:O.value,"onUpdate:value":e[30]||(e[30]=m=>O.value=m),size:"small",style:{width:"120px"},onPressEnter:m=>Je(s),onBlur:m=>Je(s)},null,8,["value","onPressEnter","onBlur"])):(p(),g(P,{key:1},[n("span",{onDblclick:m=>Ge(s)},I(s.name),41,Es),t(Ye,{trigger:["click"]},{overlay:a(()=>[t(Xe,null,{default:a(()=>[t(X,{onClick:m=>Ge(s)},{default:a(()=>[t(o(it)),e[95]||(e[95]=c(" 重命名 "))]),_:2,__:[95]},1032,["onClick"]),t(X,{onClick:m=>gl(s.id)},{default:a(()=>[t(o(ue)),e[96]||(e[96]=c(" 删除 "))]),_:2,__:[96]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[t(o(ga),{class:"tab-more-icon",onClick:e[31]||(e[31]=lt(()=>{},["stop"]))})]),_:2},1024)],64))])]),default:a(()=>[t(r,{label:"实验镜像",name:"dockerImage",required:""},{default:a(()=>[n("div",js," 系统实验镜像默认为"+I(ut())+"。 ",1)]),_:1}),t(r,{label:"实验界面",name:"viewTypes",required:""},{default:a(()=>[n("div",Vs,[n("div",{class:H(["interface-card",{active:s.config.viewTypes.includes(1)}]),onClick:e[32]||(e[32]=m=>we(1))},e[97]||(e[97]=[n("div",{class:"card-title"},"代码编辑器",-1),n("div",{class:"card-desc"},"提供代码编辑器，编辑器，调试器等工具",-1)]),2),n("div",{class:H(["interface-card",{active:s.config.viewTypes.includes(2)}]),onClick:e[33]||(e[33]=m=>we(2))},e[98]||(e[98]=[n("div",{class:"card-title"},"命令行终端",-1),n("div",{class:"card-desc"},"提供命令行窗口",-1)]),2),n("div",{class:H(["interface-card",{active:s.config.viewTypes.includes(3)}]),onClick:e[34]||(e[34]=m=>we(3))},e[99]||(e[99]=[n("div",{class:"card-title"},"容器内服务",-1),n("div",{class:"card-desc"},"直接预览容器内部Web服务",-1)]),2)])]),_:2},1024),t(r,{label:"附带环境",name:"secondType",required:""},{default:a(()=>[t(R,{value:s.config.secondType,"onUpdate:value":m=>s.config.secondType=m,placeholder:"请选择附带环境",allowClear:""},{default:a(()=>[t(V,{value:1},{default:a(()=>e[100]||(e[100]=[c("环境1")])),_:1,__:[100]}),t(V,{value:2},{default:a(()=>e[101]||(e[101]=[c("环境2")])),_:1,__:[101]})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024),t(r,{label:"任务关卡",name:"taskId",required:""},{default:a(()=>[t(R,{value:s.config.taskId,"onUpdate:value":m=>s.config.taskId=m,placeholder:"请选择任务关卡",allowClear:""},{default:a(()=>[(p(!0),g(P,null,A(o(N),m=>(p(),T(V,{key:m.taskId||m.id,value:m.taskId?String(m.taskId):void 0,disabled:!m.taskId||De(s.id,m.taskId)},{default:a(()=>[c(I(m.name)+" ",1),m.taskId?De(s.id,m.taskId)?(p(),g("span",Bs," (已被使用)")):b("",!0):(p(),g("span",$s," (未保存)"))]),_:2},1032,["value","disabled"]))),128))]),_:2},1032,["value","onUpdate:value"])]),_:2},1024),s.config.viewTypes.includes(1)?(p(),T(r,{key:0,label:"编程语言",name:"codeType",required:""},{default:a(()=>[t(R,{value:s.config.codeType,"onUpdate:value":m=>s.config.codeType=m,placeholder:"请选择编程语言",allowClear:""},{default:a(()=>[t(V,{value:"1"},{default:a(()=>e[102]||(e[102]=[c("Python")])),_:1,__:[102]}),t(V,{value:"2"},{default:a(()=>e[103]||(e[103]=[c("JavaScript")])),_:1,__:[103]}),t(V,{value:"3"},{default:a(()=>e[104]||(e[104]=[c("Java")])),_:1,__:[104]}),t(V,{value:"4"},{default:a(()=>e[105]||(e[105]=[c("C++")])),_:1,__:[105]})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)):b("",!0),s.config.viewTypes.includes(2)?(p(),T(r,{key:1,label:"开启时触发命令",name:"shellBegin",required:""},{default:a(()=>[t(d,{value:s.config.shellBegin,"onUpdate:value":m=>s.config.shellBegin=m,placeholder:"请输入命令"},null,8,["value","onUpdate:value"])]),_:2},1024)):b("",!0),s.config.viewTypes.includes(3)?(p(),T(r,{key:2,label:"容器端口",name:"containerPort",required:""},{default:a(()=>[t(d,{value:s.config.containerPort,"onUpdate:value":m=>s.config.containerPort=m,placeholder:"请输入容器端口"},null,8,["value","onUpdate:value"])]),_:2},1024)):b("",!0),s.config.viewTypes.includes(3)?(p(),T(r,{key:3,label:"路由"},{default:a(()=>[t(d,{value:s.config.containerPath,"onUpdate:value":m=>s.config.containerPath=m,placeholder:"请输入路由（选填）"},null,8,["value","onUpdate:value"])]),_:2},1024)):b("",!0),t(r,{"wrapper-col":{offset:4,span:18}},{default:a(()=>[t(k,{class:"w-full",type:"primary",onClick:m=>Te(s)},{default:a(()=>[c(I(s.isSaved?"更新":"保存"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["activeKey"])]),_:1},8,["model"])])])):b("",!0),n("div",As,[x.value===0?(p(),T(k,{key:0,onClick:Qe},{default:a(()=>e[106]||(e[106]=[c("返回")])),_:1,__:[106]})):(p(),T(k,{key:1,onClick:Qe},{default:a(()=>e[107]||(e[107]=[c("上一步")])),_:1,__:[107]})),x.value===3?(p(),T(k,{key:2,type:"primary",onClick:sl},{default:a(()=>e[108]||(e[108]=[c("完成创建")])),_:1,__:[108]})):(p(),T(k,{key:3,type:"primary",onClick:ll},{default:a(()=>e[109]||(e[109]=[c("下一步")])),_:1,__:[109]}))])]),n("input",{ref_key:"fileUploadInput",ref:$e,type:"file",style:{display:"none"},onChange:Zt},null,544),t(Hl,{open:Q.value,"onUpdate:open":e[36]||(e[36]=s=>Q.value=s),onConfirm:Dt,onCancel:Ae},null,8,["open"]),t(Kl,{open:ae.value,"onUpdate:open":e[37]||(e[37]=s=>ae.value=s),"parent-path":D.value,onConfirm:el},null,8,["open","parent-path"]),t(Ol,{open:se.value,"onUpdate:open":e[38]||(e[38]=s=>se.value=s),"parent-path":G.value,onConfirm:tl},null,8,["open","parent-path"]),t(zl,{open:oe.value,"onUpdate:open":e[39]||(e[39]=s=>oe.value=s),question:z.value,"project-id":F.value??void 0,"task-id":o(_).taskId,"existing-questions":o(le),onConfirm:ul},null,8,["open","question","project-id","task-id","existing-questions"])])}}}),Xs=_a(Hs,[["__scopeId","data-v-0f49f091"]]);export{Xs as default};
