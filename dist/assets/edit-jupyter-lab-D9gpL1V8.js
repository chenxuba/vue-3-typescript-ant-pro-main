import{d as Ke,ak as Ye,am as Qe,f as p,c as ye,w as _e,o as We,_ as y,a1 as m,$ as i,k as a,a7 as l,ac as x,F as A,ag as Q,u as E,a6 as Xe,G as f,a9 as L,ab as we,y as be}from"./vue-PnzzEkKE.js";import{R as he,u as ke}from"./RichTextEditor-9Ebw_-A3.js";import{e as Ze,f as et,o as tt,r as at,b as W,a as lt,g as ot,s as st}from"./index-DCt2nNtB.js";import{g as rt,a as nt}from"./dictionary-BgSOUAJL.js";import{u as it,a as ut,e as vt}from"./dictionary-DK3LBgyS.js";import{u as dt}from"./multi-tab-CGTp1UN-.js";import{H as U,j as ct,t as pt,x as se,c as ft,a as mt,m as gt,F as yt}from"./FileSelectModal-C2V8Qaoc.js";import{a1 as n,a3 as _t,a2 as wt,K as bt,z as ht,I as kt,a4 as Tt,a5 as St,a6 as Ct,a7 as At,a8 as xt,ad as Lt,a9 as Ut,H as Vt,ak as It,Y as jt,T as Mt,s as Rt,J as Pt,ai as qt,M as Ht}from"./antd-D1-4Msx4.js";import{_ as Ft}from"./index-BQVwlz7A.js";const Dt={class:"edit-jupyter-lab-page"},Et={class:"page-container"},Jt={class:"steps-section"},Nt={key:0},zt={class:"form-section"},Ot={class:"flex items-top gap-16px"},Bt={class:"flex flex-col gap-12px"},$t={key:0,class:"image-preview"},Gt=["src"],Kt={class:"flex items-top gap-16px"},Yt={class:"flex flex-col gap-12px"},Qt={key:0,class:"image-preview"},Wt=["src"],Xt={class:"form-section"},Zt={key:1,class:"step-content"},ea={class:"jupyter-header"},ta={class:"jupyter-actions"},aa={class:"jupyter-iframe-wrapper"},la={key:0,class:"loading-container"},oa=["src"],sa={key:2,class:"step-content evaluation-step"},ra={class:"evaluation-section"},na={class:"section-block"},ia={class:"block-content"},ua={style:{display:"flex","align-items":"center",gap:"8px"}},va={key:0,class:"section-block"},da={class:"block-content"},ca={class:"tab-footer-buttons"},pa={class:"reference-section"},fa={class:"section-block"},ma={class:"block-content"},ga={class:"tab-footer-buttons"},ya={key:3,class:"step-content environment-step"},_a={class:"environment-section"},wa={class:"environment-container"},ba={class:"environment-left"},ha={class:"search-box"},ka={class:"environment-list"},Ta=["onClick"],Sa={class:"environment-right"},Ca={class:"environment-config-header"},Aa={style:{display:"flex","align-items":"center",gap:"8px"}},xa={class:"page-footer"},Te="/dashboard/analysis",La=Ke({name:"EditJupyterLab",__name:"edit-jupyter-lab",setup(Ua){U.registerLanguage("javascript",ct),U.registerLanguage("typescript",pt),U.registerLanguage("xml",se),U.registerLanguage("html",se),U.registerLanguage("vue",se),U.registerLanguage("css",ft),U.registerLanguage("json",mt),U.registerLanguage("markdown",gt);const F=Ye(),Se=Qe(),Ce=dt(),Ae=async()=>{await F.push(Te),Ce.closeOther(Te)},C=p(null),_=p(null),g=p(0),j=p(!1),J=p(),re=p(),u=p({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:0,topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1,enableCodeRepository:!1,repositoryType:"ä»£ç ä»“åº“",gitUrl:""}),N=p(""),z=p(""),O=p(!1),B=p(!1),$=window.location.origin,X=p(""),M=p(!1),Z=p(!1),xe=()=>{M.value=!M.value},ne={name:[{required:!0,message:"è¯·è¾“å…¥åç§°",trigger:"blur"}],tag:[{required:!0,message:"è¯·è¾“å…¥æŠ€èƒ½æ ‡ç­¾",trigger:"blur"}],fieldType:[{required:!0,message:"è¯·é€‰æ‹©é¢†åŸŸç±»åˆ«",trigger:"change"}],difficulty:[{required:!0,message:"è¯·é€‰æ‹©éš¾åº¦",trigger:"change"}],environment:[{required:!0,message:"è¯·é€‰æ‹©å®éªŒç¯å¢ƒ",trigger:"change"}],topCover:[{required:!0,message:"è¯·ä¸Šä¼ é¡¶éƒ¨èƒŒæ™¯å›¾",trigger:"change"}],cover:[{required:!0,message:"è¯·ä¸Šä¼ å°é¢å›¾",trigger:"change"}],authType:[{required:!0,message:"è¯·é€‰æ‹©åŸ¹è®­å…¬å¼€èŒƒå›´",trigger:"change"}]},ee=it(),ie=ut(),te=vt(),S=p([]),ae=p(!1),Le=async()=>{try{ae.value=!0;const t=rt(3),e=await nt({code:t});e&&e.list&&(S.value=e.list.map(s=>({label:s.name,value:String(s.value)})),console.log("åŠ è½½ç¯å¢ƒé€‰é¡¹:",{environmentOptions:S.value,currentEnvironment:u.value.environment}),u.value.environment?(T.value=String(u.value.environment),w.value.dockerImage=String(u.value.environment),console.log("ä½¿ç”¨ç¬¬ä¸€æ­¥çš„ç¯å¢ƒ:",u.value.environment)):!T.value&&S.value.length>0&&(T.value=S.value[0].value,w.value.dockerImage=S.value[0].value,u.value.environment=S.value[0].value,console.log("é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªç¯å¢ƒ:",S.value[0])))}catch(t){console.error("åŠ è½½å®éªŒç¯å¢ƒé€‰é¡¹å¤±è´¥ï¼š",t),n.error("åŠ è½½å®éªŒç¯å¢ƒé€‰é¡¹å¤±è´¥")}finally{ae.value=!1}},Ue=[{title:"åŸºæœ¬ä¿¡æ¯"},{title:"å®éªŒå†…å®¹"},{title:"è¯„æµ‹è®¾ç½®"},{title:"å®éªŒç¯å¢ƒ"}],le=p(!1),ue=p("settings"),o=p({openTestValidate:2,testValidateFiles:"",testValidateSh:"",timeLimitM:"",classHour:void 0,scoreRule:1,evaluationSetting:1,testSets:[{id:1,answer:"",select:1}]}),b=p({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),R=p(!1),P=p(!1),Ve=(t,e)=>{t.select=e?1:2},ve=p([]),Ie=t=>{ve.value=t.map(s=>({uid:s.uid,name:s.name,status:"done",url:s.path}));const e=t.map(s=>s.path).join(",");o.value.testValidateFiles=e,n.success(`å·²é€‰æ‹© ${t.length} ä¸ªæ–‡ä»¶`),le.value=!1},T=p(""),G=p(""),je=ye(()=>G.value?S.value.filter(t=>t.label.toLowerCase().includes(G.value.toLowerCase())):S.value),Me=ye(()=>{const t=S.value.find(e=>e.value===T.value);return t?t.label:"æœªé€‰æ‹©"}),w=p({dockerImage:"",secondType:"Css",timeLimitM:""}),Re=t=>{T.value=t,w.value.dockerImage=t,u.value.environment!==t&&(u.value.environment=t)},Pe=async()=>{if(!C.value){n.error("ç¼ºå°‘é¡¹ç›®ID"),F.back();return}try{j.value=!0;const t=await Ze({id:C.value});u.value={name:t.name||"",tag:t.tag||"",fieldType:t.fieldType,difficulty:t.difficulty||1,environment:t.environment,secondType:t.secondType,classHour:Number(t.classHour)||void 0,topCover:t.topCover||"",cover:t.cover||"",description:t.description||"",showTaskRequire:t.showTaskRequire===1,authType:t.authType||1,enableCodeRepository:t.gitUrl?!0:t.enableCodeRepository||!1,repositoryType:t.repositoryType||"ä»£ç ä»“åº“",gitUrl:t.gitUrl||""},t.topCover&&(N.value=$+t.topCover),t.cover&&(z.value=$+t.cover),t.environment&&(await be(),T.value=String(t.environment),w.value.dockerImage=String(t.environment),console.log("åŒæ­¥ç¯å¢ƒåˆ°ç¬¬å››æ­¥:",{environment:t.environment,selectedEnvironment:T.value,environmentOptions:S.value})),await qe()}catch(t){console.error("è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥ï¼š",t),n.error(t.message||"è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥"),F.back()}finally{j.value=!1}},qe=async()=>{if(C.value)try{const t=await et({projectId:C.value,orderbyFiled:"weight:asc"});let e=[];if(Array.isArray(t)?e=t:t&&typeof t=="object"&&(e=t.list||t.data||t.tasks||[]),e&&e.length>0){const s=e[0];if(s){if(_.value=s.taskId,o.value={openTestValidate:s.openTestValidate||1,testValidateFiles:s.testValidateFiles||"",testValidateSh:s.testValidateSh||"",timeLimitM:s.timeLimitM||"",classHour:s.classHour||void 0,scoreRule:s.scoreRule||1,evaluationSetting:s.evaluationSetting||1,testSets:[]},s.testContent)try{const v=JSON.parse(s.testContent);o.value.testSets=v.map((d,c)=>({id:c+1,answer:d.answer||"",select:d.select||1}))}catch(v){console.error("è§£ææµ‹è¯•é›†å¤±è´¥:",v)}o.value.testSets.length===0&&(o.value.testSets=[{id:1,answer:"",select:1}]),s.testValidateFiles&&(ve.value=s.testValidateFiles.split(",").map((v,d)=>({uid:`${d}`,name:v.split("/").pop()||`æ–‡ä»¶${d+1}`,status:"done",url:v,response:v}))),b.value={showAnswer:s.showAnswer||1,prohibitCopyAnswer:s.prohibitCopyAnswer||1,referenceAnswer:s.referenceAnswer||""},s.secondType&&(w.value.secondType=s.secondType),s.timeLimitM&&(w.value.timeLimitM=s.timeLimitM),R.value=!0,P.value=!0}}}catch(t){console.error("è·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥ï¼š",t)}},He=async t=>{var v;if(!(t.size/1024/1024<12))return n.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 12MB!"),!1;if(!(t.type==="image/jpeg"||t.type==="image/png"))return n.error("åªèƒ½ä¸Šä¼  JPG/PNG æ ¼å¼çš„å›¾ç‰‡!"),!1;try{O.value=!0;const d=await ke(t);N.value=$+d,u.value.topCover=d,(v=J.value)==null||v.validateFields(["topCover"]),n.success("é¡¶éƒ¨èƒŒæ™¯å›¾ä¸Šä¼ æˆåŠŸ")}catch{n.error("é¡¶éƒ¨èƒŒæ™¯å›¾ä¸Šä¼ å¤±è´¥")}finally{O.value=!1}return!1},Fe=async t=>{var v;if(!(t.size/1024/1024<12))return n.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 12MB!"),!1;if(!(t.type==="image/jpeg"||t.type==="image/png"))return n.error("åªèƒ½ä¸Šä¼  JPG/PNG æ ¼å¼çš„å›¾ç‰‡!"),!1;try{B.value=!0;const d=await ke(t);z.value=$+d,u.value.cover=d,(v=J.value)==null||v.validateFields(["cover"]),n.success("å°é¢å›¾ä¸Šä¼ æˆåŠŸ")}catch{n.error("å°é¢å›¾ä¸Šä¼ å¤±è´¥")}finally{B.value=!1}return!1};_e(()=>u.value.environment,t=>{console.log("formData.environment å˜åŒ–:",t,"å½“å‰ selectedEnvironment:",T.value),t&&String(t)!==T.value&&(T.value=String(t),w.value.dockerImage=String(t),console.log("å·²åŒæ­¥åˆ°ç¬¬å››æ­¥:",T.value))}),_e(()=>T.value,t=>{console.log("selectedEnvironment å˜åŒ–ä¸º:",t)});const h=()=>{be(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const t=document.querySelector(".page-content");t&&(t.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(v=>{v.scrollTop>0&&(v.scrollTop=0)})})},De=async()=>{g.value>0?(g.value--,h(),g.value===1&&_.value&&await ce()):F.back()},Ee=async()=>{var t,e;if(g.value===0)try{await Promise.all([(t=J.value)==null?void 0:t.validate(),(e=re.value)==null?void 0:e.validate()]),await de(!1),g.value=1,h(),_.value&&await ce()}catch{n.error("è¯·å®Œå–„å¿…å¡«ä¿¡æ¯"),h()}else if(g.value===1)if(_.value)try{const s=await tt({taskId:_.value});if(s>0)return new Promise(v=>{Ht.confirm({title:"æç¤º",content:`å½“å‰æœ‰ ${s} ä¸ªç”¨æˆ·æ­£åœ¨å®Œæˆä»»åŠ¡ï¼Œæ˜¯å¦é‡ç½®å·²å‚ä¸æœªå®Œæˆä»»åŠ¡çš„ç”¨æˆ·æ–‡ä»¶ï¼Ÿ`,okText:"æ˜¯",cancelText:"å¦",onOk:async()=>{try{await at({taskId:_.value}),n.success("æ–‡ä»¶é‡ç½®æˆåŠŸ"),await K(),g.value=2,h(),v()}catch(d){console.error("é‡ç½®æ–‡ä»¶å¤±è´¥ï¼š",d),n.error("é‡ç½®æ–‡ä»¶å¤±è´¥ï¼Œè¯·é‡è¯•"),v()}},onCancel:async()=>{try{await K()}catch(d){console.error("åœæ­¢Podå¤±è´¥ï¼š",d)}g.value=2,h(),v()}})});await K(),g.value=2,h()}catch(s){console.error("æŸ¥è¯¢ä»»åŠ¡ç”¨æˆ·æ•°å¤±è´¥ï¼š",s),n.error("æŸ¥è¯¢ä»»åŠ¡ç”¨æˆ·æ•°å¤±è´¥ï¼Œè¯·é‡è¯•"),await K(),g.value=2,h()}else g.value=2,h();else if(g.value===2)try{if(!_.value){n.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(o.value.openTestValidate===1){if(!o.value.timeLimitM){n.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶"),h();return}if(!o.value.classHour||o.value.classHour<=0){n.error("è¯·è¾“å…¥æœ‰æ•ˆçš„å­¦æ—¶"),h();return}if(!o.value.testSets||o.value.testSets.length===0){n.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†"),h();return}const d=o.value.testSets.filter(c=>c.select===1);if(d.length===0){n.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†"),h();return}for(let c=0;c<d.length;c++){const q=d[c];if(!q.answer||q.answer.trim()===""){n.error("æµ‹è¯•é›†çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º"),h();return}}}const s=o.value.testSets.map(d=>({answer:d.answer,select:d.select})),v={taskId:_.value,projectId:C.value,openTestValidate:o.value.openTestValidate,testValidateFiles:o.value.testValidateFiles,testValidateSh:o.value.testValidateSh,timeLimitM:o.value.timeLimitM,classHour:o.value.classHour,scoreRule:o.value.scoreRule,evaluationSetting:o.value.evaluationSetting,testContent:JSON.stringify(s),showAnswer:b.value.showAnswer,prohibitCopyAnswer:b.value.prohibitCopyAnswer,referenceAnswer:b.value.referenceAnswer};console.log("ä¸‹ä¸€æ­¥æ—¶ä¿å­˜è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆæ•°æ®ï¼š",v),await W(v),R.value=!0,P.value=!0,g.value=3,h()}catch(s){console.error("ä¿å­˜æ•°æ®å¤±è´¥ï¼š",s),n.error("ä¿å­˜æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•"),h()}else g.value===3&&await ze()},de=async(t=!1)=>{try{j.value=!0;const e={id:C.value,projectType:3,environment:u.value.environment,name:u.value.name,tag:u.value.tag,fieldType:u.value.fieldType,difficulty:u.value.difficulty,classHour:u.value.classHour,topCover:u.value.topCover,cover:u.value.cover,description:u.value.description,showTaskRequire:u.value.showTaskRequire?1:2,authType:u.value.authType,enableCodeRepository:u.value.enableCodeRepository,secondType:u.value.secondType};t&&u.value.authType!==2&&(e.status=10),u.value.enableCodeRepository&&(e.repositoryType=u.value.repositoryType,e.gitUrl=u.value.gitUrl),await lt(e),t?(n.success("é¡¹ç›®æ›´æ–°æˆåŠŸï¼"),setTimeout(()=>{Ae()},500)):n.success("ä¿å­˜æˆåŠŸï¼")}catch(e){throw console.error("æ›´æ–°å¤±è´¥ï¼š",e),n.error(e.message||"é¡¹ç›®æ›´æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"),e}finally{j.value=!1}},Je=async()=>{try{if(!_.value){n.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(o.value.openTestValidate===1){if(!o.value.timeLimitM){n.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶");return}if(!o.value.classHour||o.value.classHour<=0){n.error("è¯·è¾“å…¥æœ‰æ•ˆçš„å­¦æ—¶");return}if(!o.value.testSets||o.value.testSets.length===0){n.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†");return}const s=o.value.testSets.filter(v=>v.select===1);if(s.length===0){n.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†");return}for(let v=0;v<s.length;v++){const d=s[v];if(!d.answer||d.answer.trim()===""){n.error("æµ‹è¯•é›†çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º");return}}}const t=o.value.testSets.map(s=>({answer:s.answer,select:s.select})),e={taskId:_.value,projectId:C.value,openTestValidate:o.value.openTestValidate,testValidateFiles:o.value.testValidateFiles,testValidateSh:o.value.testValidateSh,timeLimitM:o.value.timeLimitM,classHour:o.value.classHour,scoreRule:o.value.scoreRule,evaluationSetting:o.value.evaluationSetting,testContent:JSON.stringify(t),showAnswer:b.value.showAnswer,prohibitCopyAnswer:b.value.prohibitCopyAnswer,referenceAnswer:b.value.referenceAnswer};console.log("ä¿å­˜è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆæ•°æ®ï¼š",e),await W(e),R.value=!0,P.value=!0,n.success("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜æˆåŠŸï¼")}catch(t){console.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼š",t),n.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},Ne=async()=>{try{if(!_.value){n.error("ä»»åŠ¡IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°åˆ›å»ºä»»åŠ¡");return}if(o.value.openTestValidate===1){if(!o.value.timeLimitM){n.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶");return}if(!o.value.classHour||o.value.classHour<=0){n.error("è¯·è¾“å…¥æœ‰æ•ˆçš„å­¦æ—¶");return}if(!o.value.testSets||o.value.testSets.length===0){n.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†");return}const s=o.value.testSets.filter(v=>v.select===1);if(s.length===0){n.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†");return}for(let v=0;v<s.length;v++){const d=s[v];if(!d.answer||d.answer.trim()===""){n.error("æµ‹è¯•é›†çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º");return}}}const t=o.value.testSets.map(s=>({answer:s.answer,select:s.select})),e={taskId:_.value,projectId:C.value,openTestValidate:o.value.openTestValidate,testValidateFiles:o.value.testValidateFiles,testValidateSh:o.value.testValidateSh,timeLimitM:o.value.timeLimitM,classHour:o.value.classHour,scoreRule:o.value.scoreRule,evaluationSetting:o.value.evaluationSetting,testContent:JSON.stringify(t),showAnswer:b.value.showAnswer,prohibitCopyAnswer:b.value.prohibitCopyAnswer,referenceAnswer:b.value.referenceAnswer};console.log("ä¿å­˜è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆæ•°æ®ï¼š",e),await W(e),R.value=!0,P.value=!0,n.success("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜æˆåŠŸï¼")}catch(t){console.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼š",t),n.error("è¯„æµ‹è®¾ç½®å’Œå‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},ze=async()=>{try{if(!C.value||!_.value){n.error("é¡¹ç›®IDæˆ–ä»»åŠ¡IDä¸å­˜åœ¨");return}if(!R.value){n.error("è¯·å…ˆä¿å­˜è¯„æµ‹è®¾ç½®åå†å®Œæˆæ›´æ–°");return}if(!P.value){n.error("è¯·å…ˆä¿å­˜å‚è€ƒç­”æ¡ˆåå†å®Œæˆæ›´æ–°");return}if(!w.value.dockerImage){n.error("è¯·é€‰æ‹©å®éªŒç¯å¢ƒ");return}if(!w.value.timeLimitM){n.error("è¯·è¾“å…¥å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿");return}await W({taskId:_.value,projectId:C.value,dockerImage:w.value.dockerImage,secondType:w.value.secondType,timeLimitM:w.value.timeLimitM}),await de(!0)}catch(t){console.error("å®Œæˆæ›´æ–°å¤±è´¥ï¼š",t),n.error("å®Œæˆæ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•")}},ce=async()=>{if(!_.value){console.log("taskIdä¸å­˜åœ¨ï¼Œæ— æ³•è·å–Podé…ç½®");return}try{Z.value=!0,console.log("æ­£åœ¨è·å–Podé…ç½®ï¼ŒtaskId:",_.value);const t=await ot({taskId:_.value});console.log("è·å–åˆ°Podæ•°æ®ï¼š",t),t&&t.config&&t.config.url?(X.value=t.config.url,console.log("æ›´æ–°Jupyter URLä¸ºï¼š",X.value),n.success("å®éªŒç¯å¢ƒåŠ è½½æˆåŠŸï¼")):(console.error("Podé…ç½®ä¸­æ²¡æœ‰urlå­—æ®µ"),n.warning("æœªè·å–åˆ°å®éªŒç¯å¢ƒURL"))}catch(t){console.error("è·å–Podé…ç½®å¤±è´¥ï¼š",t),n.error("è·å–å®éªŒç¯å¢ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{Z.value=!1}},K=async()=>{if(!_.value){console.log("taskIdä¸å­˜åœ¨ï¼Œæ— æ³•åœæ­¢Pod");return}try{console.log("æ­£åœ¨åœæ­¢Podï¼ŒtaskId:",_.value),await st({taskId:_.value}),console.log("Podåœæ­¢æˆåŠŸ"),n.success("å®éªŒç¯å¢ƒå·²åœæ­¢")}catch(t){console.error("åœæ­¢Podå¤±è´¥ï¼š",t),n.error("åœæ­¢å®éªŒç¯å¢ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}};return We(async()=>{ee.load(),ie.load(),te.load();const t=Se.query.id;t?(C.value=Number(t),await Le(),await Pe()):(n.error("ç¼ºå°‘é¡¹ç›®ID"),F.back())}),(t,e)=>{const s=wt,v=_t,d=kt,c=ht,q=St,oe=Ct,pe=Tt,k=xt,V=At,Y=Lt,I=Vt,fe=Ut,D=bt,Oe=It,me=jt,Be=Pt,$e=qt,ge=Rt,Ge=Mt;return m(),y("div",Dt,[e[50]||(e[50]=i("div",{class:"page-header"},[i("h2",null,"ç¼–è¾‘JupyterLabç¯å¢ƒå®è®­é¡¹ç›®")],-1)),a(me,{spinning:j.value},{default:l(()=>[i("div",Et,[i("div",Jt,[a(v,{current:g.value,class:"custom-steps"},{default:l(()=>[(m(),y(A,null,Q(Ue,(r,H)=>a(s,{key:H,title:r.title},null,8,["title"])),64))]),_:1},8,["current"])]),g.value===0?(m(),y("div",Nt,[e[29]||(e[29]=i("div",{class:"section-title"},[i("h3",null,"åŸºæœ¬ä¿¡æ¯")],-1)),i("div",zt,[a(D,{ref_key:"formRef",ref:J,model:u.value,rules:ne,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[a(c,{label:"åç§°",name:"name",required:""},{default:l(()=>[a(d,{value:u.value.name,"onUpdate:value":e[0]||(e[0]=r=>u.value.name=r),placeholder:"è¯·è¾“å…¥åç§°"},null,8,["value"])]),_:1}),a(pe,null,{default:l(()=>[a(q,{span:12},{default:l(()=>[a(c,{label:"æŠ€èƒ½æ ‡ç­¾",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(d,{value:u.value.tag,"onUpdate:value":e[1]||(e[1]=r=>u.value.tag=r),placeholder:"è¯·è¾“å…¥æŠ€èƒ½æ ‡ç­¾"},null,8,["value"]),e[21]||(e[21]=i("div",{style:{"font-size":"12px",color:"#999","margin-top":"4px"}}," è¯·ä½¿ç”¨è‹±æ–‡çŠ¶æ€ä¸‹çš„é€—å·åˆ†éš”æŠ€èƒ½æ ‡ç­¾ï¼Œæ¯”å¦‚html,css,js ",-1))]),_:1,__:[21]})]),_:1}),a(q,{span:12},{default:l(()=>[a(c,{label:"é¢†åŸŸç±»åˆ«",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[a(oe,{value:u.value.fieldType,"onUpdate:value":e[2]||(e[2]=r=>u.value.fieldType=r),placeholder:"è¯·é€‰æ‹©é¢†åŸŸç±»åˆ«",options:E(ee).options.value,loading:E(ee).loading.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),a(c,{label:"éš¾åº¦",name:"difficulty",required:""},{default:l(()=>[a(V,{value:u.value.difficulty,"onUpdate:value":e[3]||(e[3]=r=>u.value.difficulty=r),class:"custom-radio"},{default:l(()=>[(m(!0),y(A,null,Q(E(ie).data.value,r=>(m(),Xe(k,{key:r.value,value:Number(r.value)},{default:l(()=>[f(L(r.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),a(pe,null,{default:l(()=>[a(q,{span:12},{default:l(()=>[a(c,{label:"å®éªŒç¯å¢ƒ",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(oe,{value:u.value.environment,"onUpdate:value":e[4]||(e[4]=r=>u.value.environment=r),placeholder:"è¯·é€‰æ‹©å®éªŒç¯å¢ƒ",options:S.value,loading:ae.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),a(c,{label:"å­¦æ—¶",name:"classHour"},{default:l(()=>[a(Y,{min:0,disabled:"",class:"w-full",value:u.value.classHour,"onUpdate:value":e[5]||(e[5]=r=>u.value.classHour=r),placeholder:"é…ç½®ä»»åŠ¡åè‡ªåŠ¨è®¡ç®—å­¦æ—¶"},null,8,["value"]),e[22]||(e[22]=i("div",{style:{"font-size":"12px",color:"#999","margin-top":"4px"}}," æ­¤å­¦æ—¶ä¸ºå…³å¡æ€»è®¡å­¦æ—¶ï¼Œæ— éœ€å¡«å†™ï¼Œç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ã€‚ ",-1))]),_:1,__:[22]}),a(c,{label:"é¡¶éƒ¨èƒŒæ™¯å›¾",name:"topCover",required:""},{default:l(()=>[i("div",Ot,[i("div",Bt,[a(fe,{"before-upload":He,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[a(I,{loading:O.value},{default:l(()=>[O.value?(m(),y(A,{key:1},[f("ä¸Šä¼ ä¸­...")],64)):(m(),y(A,{key:0},[f("é€‰æ‹©æ–‡ä»¶")],64))]),_:1},8,["loading"])]),_:1}),N.value?(m(),y("div",$t,[i("img",{src:N.value,alt:"é¡¶éƒ¨èƒŒæ™¯å›¾é¢„è§ˆ",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,Gt)])):x("",!0)]),e[23]||(e[23]=i("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ png/jpegç­‰æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡12M,å»ºè®®ä½¿ç”¨290*218åƒç´ ã€‚ ",-1))])]),_:1}),a(c,{label:"å°é¢å›¾",name:"cover",required:""},{default:l(()=>[i("div",Kt,[i("div",Yt,[a(fe,{"before-upload":Fe,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[a(I,{loading:B.value},{default:l(()=>[B.value?(m(),y(A,{key:1},[f("ä¸Šä¼ ä¸­...")],64)):(m(),y(A,{key:0},[f("é€‰æ‹©æ–‡ä»¶")],64))]),_:1},8,["loading"])]),_:1}),z.value?(m(),y("div",Qt,[i("img",{src:z.value,alt:"å°é¢å›¾é¢„è§ˆ",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,Wt)])):x("",!0)]),e[24]||(e[24]=i("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ png/jpegç­‰æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡12M,å»ºè®®ä½¿ç”¨290*218åƒç´ ã€‚ ",-1))])]),_:1}),a(c,{label:"ç®€ä»‹",name:"description"},{default:l(()=>[a(he,{modelValue:u.value.description,"onUpdate:modelValue":e[6]||(e[6]=r=>u.value.description=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e[30]||(e[30]=i("div",{class:"section-title"},[i("h3",null,"åŸ¹è®­å…¬å¼€èŒƒå›´")],-1)),i("div",Xt,[a(D,{ref_key:"trainingScopeFormRef",ref:re,model:u.value,rules:ne,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[a(c,{label:"åŸ¹è®­å…¬å¼€èŒƒå›´",name:"authType",required:""},{default:l(()=>[a(V,{value:u.value.authType,"onUpdate:value":e[7]||(e[7]=r=>u.value.authType=r),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[25]||(e[25]=[f("å®Œå…¨å…¬å¼€")])),_:1,__:[25]}),a(k,{value:2},{default:l(()=>e[26]||(e[26]=[f("å…¨é™¢å…¬å¼€")])),_:1,__:[26]}),a(k,{value:3},{default:l(()=>e[27]||(e[27]=[f("æœ¬å•ä½å…¬å¼€")])),_:1,__:[27]}),a(k,{value:4},{default:l(()=>e[28]||(e[28]=[f("ä¸å…¬å¼€")])),_:1,__:[28]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):x("",!0),g.value===1?(m(),y("div",Zt,[i("div",{class:we(["jupyter-container",{fullscreen:M.value}])},[i("div",ea,[e[31]||(e[31]=i("h3",null,"Jupyter Lab ç¼–è¾‘å™¨",-1)),i("div",ta,[a(Oe,{title:M.value?"é€€å‡ºå…¨å±":"å…¨å±"},{default:l(()=>[a(I,{type:"text",icon:M.value?"fullscreen-exit":"fullscreen",onClick:xe},{default:l(()=>[f(L(M.value?"é€€å‡ºå…¨å±":"å…¨å±"),1)]),_:1},8,["icon"])]),_:1},8,["title"])])]),i("div",aa,[Z.value?(m(),y("div",la,[a(me,{size:"large",tip:"æ­£åœ¨åŠ è½½å®éªŒç¯å¢ƒ..."})])):(m(),y("iframe",{key:1,src:X.value,class:"jupyter-iframe",frameborder:"0",allowfullscreen:""},null,8,oa))])],2)])):x("",!0),g.value===2?(m(),y("div",sa,[a(Ge,{activeKey:ue.value,"onUpdate:activeKey":e[16]||(e[16]=r=>ue.value=r),class:"evaluation-tabs"},{default:l(()=>[a(ge,{key:"settings",tab:"è¯„æµ‹è®¾ç½®"},{default:l(()=>[i("div",ra,[i("div",na,[e[39]||(e[39]=i("div",{class:"block-header"},"è¯„æµ‹æ–‡ä»¶",-1)),i("div",ia,[a(D,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[a(c,{label:"æ˜¯å¦å¯ç”¨è¯„æµ‹åŠŸèƒ½",required:""},{default:l(()=>[a(V,{value:o.value.openTestValidate,"onUpdate:value":e[8]||(e[8]=r=>o.value.openTestValidate=r),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[32]||(e[32]=[f("æ˜¯")])),_:1,__:[32]}),a(k,{value:2},{default:l(()=>e[33]||(e[33]=[f("å¦")])),_:1,__:[33]})]),_:1},8,["value"])]),_:1}),o.value.openTestValidate===1?(m(),y(A,{key:0},[a(c,{label:"è¯„æµ‹æ—¶é•¿é™åˆ¶",required:""},{default:l(()=>[i("div",ua,[a(Y,{value:o.value.timeLimitM,"onUpdate:value":e[9]||(e[9]=r=>o.value.timeLimitM=r),min:1,placeholder:"è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰",style:{width:"580px"}},null,8,["value"]),e[34]||(e[34]=i("span",null,"åˆ†é’Ÿ",-1))])]),_:1}),a(c,{label:"å­¦æ—¶",required:""},{default:l(()=>[a(Y,{value:o.value.classHour,"onUpdate:value":e[10]||(e[10]=r=>o.value.classHour=r),min:0,placeholder:"è¯·è¾“å…¥å­¦æ—¶",style:{width:"600px"}},null,8,["value"])]),_:1}),a(c,{label:"ç³»ç»Ÿè¯„åˆ†è§„åˆ™"},{default:l(()=>[a(V,{value:o.value.scoreRule,"onUpdate:value":e[11]||(e[11]=r=>o.value.scoreRule=r),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[35]||(e[35]=[f(" é€šè¿‡å…¨éƒ¨æµ‹è¯•é›†ï¼ˆä»…å½“æ‰€æœ‰æµ‹è¯•é›†éƒ½æ­£ç¡®æ—¶ï¼Œè·å¾—é¡¹ç›®å­¦æ—¶ï¼‰ ")])),_:1,__:[35]}),a(k,{value:2},{default:l(()=>e[36]||(e[36]=[f(" é€šè¿‡éƒ¨åˆ†æµ‹è¯•é›†ï¼ˆä»»æ„ä¸€ä¸ªæµ‹è¯•é›†æ­£ç¡®æ—¶ï¼Œè·å¾—é¡¹ç›®å­¦æ—¶ï¼‰ ")])),_:1,__:[36]})]),_:1},8,["value"])]),_:1}),a(c,{label:"è¯„æµ‹è®¾ç½®",required:""},{default:l(()=>[a(V,{value:o.value.evaluationSetting,"onUpdate:value":e[12]||(e[12]=r=>o.value.evaluationSetting=r),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[37]||(e[37]=[f(" é€šè¿‡æ‰€æœ‰ä»£ç å—è¯„æµ‹ï¼ˆå¯¹å­¦å‘˜ä»»åŠ¡æ–‡ä»¶çš„æ‰€æœ‰éç©ºä»£ç å—è¿›è¡Œè¯„æµ‹ï¼‰ ")])),_:1,__:[37]}),a(k,{value:2},{default:l(()=>e[38]||(e[38]=[f(" é€šè¿‡æŒ‡å®šä»£ç å—è¯„æµ‹ï¼ˆå¯¹å­¦å‘˜ä»»åŠ¡æ–‡ä»¶çš„æŒ‡å®šéç©ºä»£ç å—è¿›è¡Œè¯„æµ‹ï¼‰ ")])),_:1,__:[38]})]),_:1},8,["value"])]),_:1})],64)):x("",!0)]),_:1})])]),o.value.openTestValidate===1?(m(),y("div",va,[e[41]||(e[41]=i("div",{class:"block-header"},[i("span",null,"æµ‹è¯•é›†")],-1)),i("div",da,[(m(!0),y(A,null,Q(o.value.testSets,r=>(m(),y("div",{key:r.id,class:"test-set-item"},[a(Be,{checked:r.select===1,onChange:H=>Ve(r,H.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),e[40]||(e[40]=i("span",{class:"test-set-label"},"æµ‹è¯•é›†",-1)),a($e,{value:r.answer,"onUpdate:value":H=>r.answer=H,placeholder:"è¯·è¾“å…¥æœŸæœ›è¾“å‡º",class:"test-set-input","auto-size":{minRows:3}},null,8,["value","onUpdate:value"])]))),128))])])):x("",!0),i("div",ca,[a(I,{type:"primary",onClick:Je},{default:l(()=>[f(L(R.value?"æ›´æ–°":"ä¿å­˜"),1)]),_:1})])])]),_:1}),a(ge,{key:"reference",tab:"å‚è€ƒç­”æ¡ˆ"},{default:l(()=>[i("div",pa,[i("div",fa,[e[46]||(e[46]=i("div",{class:"block-header"},"å‚è€ƒç­”æ¡ˆ",-1)),i("div",ma,[a(D,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[a(c,{label:"æ˜¯å¦æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆæ¨¡å—",required:""},{default:l(()=>[a(V,{value:b.value.showAnswer,"onUpdate:value":e[13]||(e[13]=r=>b.value.showAnswer=r),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[42]||(e[42]=[f("æ˜¯")])),_:1,__:[42]}),a(k,{value:2},{default:l(()=>e[43]||(e[43]=[f("å¦")])),_:1,__:[43]})]),_:1},8,["value"])]),_:1}),a(c,{label:"æ˜¯å¦ç¦æ­¢å¤åˆ¶å‚è€ƒç­”æ¡ˆ",required:""},{default:l(()=>[a(V,{value:b.value.prohibitCopyAnswer,"onUpdate:value":e[14]||(e[14]=r=>b.value.prohibitCopyAnswer=r),class:"custom-radio"},{default:l(()=>[a(k,{value:1},{default:l(()=>e[44]||(e[44]=[f("æ˜¯")])),_:1,__:[44]}),a(k,{value:2},{default:l(()=>e[45]||(e[45]=[f("å¦")])),_:1,__:[45]})]),_:1},8,["value"])]),_:1}),a(c,{label:"å‚è€ƒç­”æ¡ˆ"},{default:l(()=>[a(he,{modelValue:b.value.referenceAnswer,"onUpdate:modelValue":e[15]||(e[15]=r=>b.value.referenceAnswer=r)},null,8,["modelValue"])]),_:1})]),_:1})])]),i("div",ga,[a(I,{type:"primary",onClick:Ne},{default:l(()=>[f(L(P.value?"æ›´æ–°":"ä¿å­˜"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):x("",!0),g.value===3?(m(),y("div",ya,[i("div",_a,[e[49]||(e[49]=i("h3",{class:"section-main-title"},"å®éªŒç¯å¢ƒ",-1)),i("div",wa,[i("div",ba,[i("div",ha,[a(d,{value:G.value,"onUpdate:value":e[17]||(e[17]=r=>G.value=r),placeholder:"æœç´¢éœ€è¦çš„å®éªŒç¯å¢ƒ","allow-clear":""},{suffix:l(()=>e[47]||(e[47]=[i("span",{class:"search-icon"},"ğŸ”",-1)])),_:1},8,["value"])]),i("div",ka,[(m(!0),y(A,null,Q(je.value,r=>(m(),y("div",{key:r.value,class:we(["environment-item",{active:T.value===r.value}]),onClick:H=>Re(r.value)},L(r.label),11,Ta))),128))])]),i("div",Sa,[i("div",Ca," å®éªŒç¯å¢ƒ: "+L(Me.value),1),a(D,{model:w.value,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}},{default:l(()=>[a(c,{label:"é™„å¸¦ç¯å¢ƒ"},{default:l(()=>[a(oe,{value:w.value.secondType,"onUpdate:value":e[18]||(e[18]=r=>w.value.secondType=r),placeholder:"è¯·é€‰æ‹©é™„å¸¦ç¯å¢ƒ",options:E(te).options.value,loading:E(te).loading.value},null,8,["value","options","loading"])]),_:1}),a(c,{label:"å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿"},{default:l(()=>[i("div",Aa,[a(Y,{value:w.value.timeLimitM,"onUpdate:value":e[19]||(e[19]=r=>w.value.timeLimitM=r),min:1,placeholder:"è¯·è¾“å…¥å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿",style:{flex:"1"}},null,8,["value"]),e[48]||(e[48]=i("span",null,"åˆ†",-1))])]),_:1})]),_:1},8,["model"])])])])])):x("",!0),i("div",xa,[a(I,{onClick:De},{default:l(()=>[f(L(g.value===0?"è¿”å›":"ä¸Šä¸€æ­¥"),1)]),_:1}),a(I,{type:"primary",loading:j.value,onClick:Ee},{default:l(()=>[f(L(g.value===3?"å®Œæˆ":"ä¸‹ä¸€æ­¥"),1)]),_:1},8,["loading"])])])]),_:1},8,["spinning"]),a(yt,{open:le.value,"onUpdate:open":e[20]||(e[20]=r=>le.value=r),title:"é€‰æ‹©è¯„æµ‹æ–‡ä»¶","git-url":u.value.gitUrl,onConfirm:Ie},null,8,["open","git-url"])])}}}),Da=Ft(La,[["__scopeId","data-v-3ccfa65b"]]);export{Da as default};
