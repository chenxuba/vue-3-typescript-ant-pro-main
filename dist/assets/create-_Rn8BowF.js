import{d as M,ak as P,f as T,c as h,o as F,w as S,_ as f,a1 as c,$ as u,k as o,a7 as r,G as l,ac as y,F as q,a9 as x,a6 as D,u as N}from"./vue-PnzzEkKE.js";import{R as z}from"./RichTextEditor-mZtjkZC3.js";import{a as L,d as G,e as K}from"./dictionary-uNSsWWLq.js";import{a8 as O,a7 as W,z as $,I as A,J as Q,a6 as X,K as Y,H as Z,a1 as _}from"./antd-BAFH3H32.js";import{_ as ee}from"./index-B86OkuRG.js";import"./index-hsiy2P1t.js";import"./dictionary-DoQdUKaY.js";const ae={class:"create-project-page"},te={class:"page-content"},oe={class:"project-type-section"},ne={class:"project-type-desc"},re={class:"project-form-section"},le={class:"form-title"},se={key:0},ue={class:"page-footer"},ie=M({name:"CreateRainingProject",__name:"create",setup(de){const g=P(),j=T(),t=T(1),a=T({name:"",description:"",difficulty:void 0,environment:void 0,secondType:void 0,classHour:"",showTaskRequire:!1}),C={name:[{required:!0,message:"请输入名称",trigger:"blur"}],description:[{required:!0,validator:(v,e)=>{if(!e)return Promise.reject("请输入简介");const i=/<img\s+[^>]*src\s*=\s*["'][^"']+["'][^>]*>/i.test(e),d=e.replace(/<[^>]*>/g,"").trim();return!i&&!d?Promise.reject("请输入简介"):Promise.resolve()},trigger:"blur"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}],secondType:[{required:!0,message:"请选择小类别",trigger:"change"}]},k=L(),R=G(),p=h(()=>K(t.value));F(()=>{k.load(),R.load(),p.value.load()});const V=()=>t.value!==2&&t.value!==3?[]:R.options.value,U=()=>{g.back()},B=async()=>{var m;try{await((m=j.value)==null?void 0:m.validate())}catch{return}if(!a.value.name){_.error("请输入名称");return}const v=a.value.description||"",e=/<img\s+[^>]*src\s*=\s*["'][^"']+["'][^>]*>/i.test(v),i=v.replace(/<[^>]*>/g,"").trim();if(!e&&!i){_.error("请输入简介");return}if(!a.value.difficulty){_.error("请选择难度");return}if(!a.value.environment){_.error("请选择实验环境");return}if((t.value===2||t.value===3)&&!a.value.secondType){_.error("请选择小类别");return}const d={projectType:t.value,name:a.value.name,description:a.value.description,difficulty:a.value.difficulty,environment:a.value.environment,secondType:a.value.secondType,classHour:a.value.classHour,showTaskRequire:a.value.showTaskRequire};t.value===1?g.push({path:"/dashboard/raining-project-management/config-full-stack",state:d}):t.value===2?g.push({path:"/dashboard/raining-project-management/config-jupyter-notebook",state:d}):t.value===3&&g.push({path:"/dashboard/raining-project-management/config-jupyter-lab",state:d})};S(t,()=>{a.value.environment=void 0,a.value.secondType=void 0,a.value.showTaskRequire=!1,p.value.load()});const H=h(()=>({1:"全栈环境",2:"JupyterNotebook环境",3:"JupyterLab环境"})[t.value]||""),I=h(()=>a.value.environment?p.value.getNameByValue(a.value.environment):"");return(v,e)=>{const i=O,d=W,m=A,s=$,E=Q,b=X,J=Y,w=Z;return c(),f("div",ae,[e[14]||(e[14]=u("div",{class:"page-header"},[u("h2",null,"新建实训项目")],-1)),u("div",te,[u("div",oe,[o(d,{value:t.value,"onUpdate:value":e[0]||(e[0]=n=>t.value=n),class:"custom-radio"},{default:r(()=>[o(i,{value:1},{default:r(()=>e[8]||(e[8]=[l("全栈环境实训项目")])),_:1,__:[8]}),o(i,{value:2},{default:r(()=>e[9]||(e[9]=[l("JupyterNotebook环境实训项目")])),_:1,__:[9]}),o(i,{value:3},{default:r(()=>e[10]||(e[10]=[l("JupyterLab环境实训项目")])),_:1,__:[10]})]),_:1},8,["value"])]),u("div",ne,[t.value===1?(c(),f(q,{key:0},[l(" 多功能新型实战项目模式，支持图形化桌面、Web IDE、命令行、提供仿真拟真等种实验场景，适用于各类复杂工程项目研发。 ")],64)):t.value===2?(c(),f(q,{key:1},[l(" 多功能实时交互实验模式，支持实时代码、数学方程、可视化和MarkDown等。 适用于数据清理、数值模拟、统计建模、机器学习等系列实验。 ")],64)):t.value===3?(c(),f(q,{key:2},[l(" 多功能实时交互实验模式，支持实时代码、数学方程、可视化和MarkDown等。 适用于数据清理、数值模拟、统计建模、机器学习等系列实验。 ")],64)):y("",!0)]),u("div",re,[u("div",le,[l(x(H.value)+"实训项目 ",1),a.value.environment?(c(),f("span",se," 实验环境: "+x(I.value),1)):y("",!0)]),o(J,{ref_key:"formRef",ref:j,model:a.value,rules:C,layout:"horizontal","label-col":{span:3},"wrapper-col":{span:18}},{default:r(()=>[o(s,{label:"名称",name:"name",required:""},{default:r(()=>[o(m,{value:a.value.name,"onUpdate:value":e[1]||(e[1]=n=>a.value.name=n),placeholder:"请输入名称"},null,8,["value"])]),_:1}),o(s,{label:"简介",name:"description",required:""},{default:r(()=>[o(z,{modelValue:a.value.description,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.description=n),placeholder:"请输入简介内容",height:200},null,8,["modelValue"])]),_:1}),t.value===2?(c(),D(s,{key:0,label:"任务要求",name:"showTaskRequire"},{default:r(()=>[o(E,{checked:a.value.showTaskRequire,"onUpdate:checked":e[3]||(e[3]=n=>a.value.showTaskRequire=n)},{default:r(()=>e[11]||(e[11]=[l(" 显示任务要求（勾选后，将简介作为任务要求显示在实践项目挑战页面） ")])),_:1,__:[11]},8,["checked"])]),_:1})):y("",!0),o(s,{label:"难度",name:"difficulty",required:""},{default:r(()=>[o(b,{value:a.value.difficulty,"onUpdate:value":e[4]||(e[4]=n=>a.value.difficulty=n),placeholder:"请选择难度",options:N(k).options.value,loading:N(k).loading.value},null,8,["value","options","loading"])]),_:1}),o(s,{label:"实验环境",name:"environment",required:""},{default:r(()=>[o(b,{value:a.value.environment,"onUpdate:value":e[5]||(e[5]=n=>a.value.environment=n),placeholder:"请选择实验环境",options:p.value.options.value,loading:p.value.loading.value},null,8,["value","options","loading"])]),_:1}),t.value===2||t.value===3?(c(),D(s,{key:1,label:"小类别",name:"secondType",required:""},{default:r(()=>[o(b,{value:a.value.secondType,"onUpdate:value":e[6]||(e[6]=n=>a.value.secondType=n),placeholder:"请选择小类别",options:V()},null,8,["value","options"])]),_:1})):y("",!0),o(s,{label:"学时",name:"classHour"},{default:r(()=>[o(m,{value:a.value.classHour,"onUpdate:value":e[7]||(e[7]=n=>a.value.classHour=n),placeholder:"配置任务后自动计算",disabled:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),u("div",ue,[o(w,{onClick:U},{default:r(()=>e[12]||(e[12]=[l("返回")])),_:1,__:[12]}),o(w,{type:"primary",onClick:B},{default:r(()=>e[13]||(e[13]=[l("下一步")])),_:1,__:[13]})])])])}}}),ke=ee(ie,[["__scopeId","data-v-692f371b"]]);export{ke as default};
