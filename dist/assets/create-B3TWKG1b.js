import{d as U,ak as E,f as b,c as k,o as M,w as P,_ as m,a1 as f,$ as s,k as t,a7 as n,G as l,ac as R,F as h,a9 as w,u as x}from"./vue-PnzzEkKE.js";import{R as F}from"./RichTextEditor-DE0ySZe4.js";import{a as J,e as z,d as S}from"./dictionary-B3T7Y7Sv.js";import{a8 as L,a7 as G,z as K,I as W,a6 as $,K as A,H as O,a1 as g}from"./antd-Cme2pY03.js";import{_ as Q}from"./index-CRN7Cu29.js";import"./index-BzdcU38b.js";import"./dictionary-BtudliZb.js";const X={class:"create-project-page"},Y={class:"page-content"},Z={class:"project-type-section"},ee={class:"project-type-desc"},ae={class:"project-form-section"},te={class:"form-title"},oe={key:0},ne={class:"page-footer"},re=U({name:"CreateRainingProject",__name:"create",setup(se){const _=E(),j=b(),o=b(1),a=b({name:"",description:"",difficulty:void 0,environment:void 0,secondType:void 0,classHour:"",showTaskRequire:!0}),D={name:[{required:!0,message:"请输入名称",trigger:"blur"}],description:[{required:!0,validator:(c,e)=>{if(!e)return Promise.reject("请输入简介");const i=/<img\s+[^>]*src\s*=\s*["'][^"']+["'][^>]*>/i.test(e),u=e.replace(/<[^>]*>/g,"").trim();return!i&&!u?Promise.reject("请输入简介"):Promise.resolve()},trigger:"blur"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}]},y=J(),N=z(),p=k(()=>S(o.value));M(()=>{y.load(),N.load(),p.value.load()});const V=()=>{_.back()},C=async()=>{var v;try{await((v=j.value)==null?void 0:v.validate())}catch{return}if(!a.value.name){g.error("请输入名称");return}const c=a.value.description||"",e=/<img\s+[^>]*src\s*=\s*["'][^"']+["'][^>]*>/i.test(c),i=c.replace(/<[^>]*>/g,"").trim();if(!e&&!i){g.error("请输入简介");return}if(!a.value.difficulty){g.error("请选择难度");return}if(!a.value.environment){g.error("请选择实验环境");return}const u={projectType:o.value,name:a.value.name,description:a.value.description,difficulty:a.value.difficulty,environment:a.value.environment,secondType:a.value.secondType,classHour:a.value.classHour,showTaskRequire:a.value.showTaskRequire};o.value===1?_.push({path:"/dashboard/raining-project-management/config-full-stack",state:u}):o.value===2?_.push({path:"/dashboard/raining-project-management/config-jupyter-notebook",state:u}):o.value===3&&_.push({path:"/dashboard/raining-project-management/config-jupyter-lab",state:u})};P(o,()=>{a.value.environment=void 0,a.value.secondType=void 0,a.value.showTaskRequire=!0,p.value.load()});const H=k(()=>({1:"全栈环境",2:"JupyterNotebook环境",3:"JupyterLab环境"})[o.value]||""),B=k(()=>a.value.environment?p.value.getNameByValue(a.value.environment):"");return(c,e)=>{const i=L,u=G,v=W,d=K,T=$,I=A,q=O;return f(),m("div",X,[e[12]||(e[12]=s("div",{class:"page-header"},[s("h2",null,"新建实训项目")],-1)),s("div",Y,[s("div",Z,[t(u,{value:o.value,"onUpdate:value":e[0]||(e[0]=r=>o.value=r),class:"custom-radio"},{default:n(()=>[t(i,{value:1},{default:n(()=>e[6]||(e[6]=[l("全栈环境实训项目")])),_:1,__:[6]}),t(i,{value:2},{default:n(()=>e[7]||(e[7]=[l("JupyterNotebook环境实训项目")])),_:1,__:[7]}),t(i,{value:3},{default:n(()=>e[8]||(e[8]=[l("JupyterLab环境实训项目")])),_:1,__:[8]})]),_:1},8,["value"])]),s("div",ee,[o.value===1?(f(),m(h,{key:0},[l(" 多功能新型实战项目模式，支持图形化桌面、Web IDE、命令行、提供仿真拟真等种实验场景，适用于各类复杂工程项目研发。 ")],64)):o.value===2?(f(),m(h,{key:1},[l(" 多功能实时交互实验模式，支持实时代码、数学方程、可视化和MarkDown等。 适用于数据清理、数值模拟、统计建模、机器学习等系列实验。 ")],64)):o.value===3?(f(),m(h,{key:2},[l(" 多功能实时交互实验模式，支持实时代码、数学方程、可视化和MarkDown等。 适用于数据清理、数值模拟、统计建模、机器学习等系列实验。 ")],64)):R("",!0)]),s("div",ae,[s("div",te,[l(w(H.value)+"实训项目 ",1),a.value.environment?(f(),m("span",oe," 实验环境: "+w(B.value),1)):R("",!0)]),t(I,{ref_key:"formRef",ref:j,model:a.value,rules:D,layout:"horizontal","label-col":{span:3},"wrapper-col":{span:18}},{default:n(()=>[t(d,{label:"名称",name:"name",required:""},{default:n(()=>[t(v,{value:a.value.name,"onUpdate:value":e[1]||(e[1]=r=>a.value.name=r),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(d,{label:"简介",name:"description",required:""},{default:n(()=>[t(F,{modelValue:a.value.description,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.description=r),placeholder:"请输入简介内容",height:200},null,8,["modelValue"])]),_:1}),t(d,{label:"难度",name:"difficulty",required:""},{default:n(()=>[t(T,{value:a.value.difficulty,"onUpdate:value":e[3]||(e[3]=r=>a.value.difficulty=r),placeholder:"请选择难度",options:x(y).options.value,loading:x(y).loading.value},null,8,["value","options","loading"])]),_:1}),t(d,{label:"实验环境",name:"environment",required:""},{default:n(()=>[t(T,{value:a.value.environment,"onUpdate:value":e[4]||(e[4]=r=>a.value.environment=r),placeholder:"请选择实验环境",options:p.value.options.value,loading:p.value.loading.value},null,8,["value","options","loading"])]),_:1}),t(d,{label:"学时",name:"classHour"},{default:n(()=>[t(v,{value:a.value.classHour,"onUpdate:value":e[5]||(e[5]=r=>a.value.classHour=r),placeholder:"配置任务后自动计算",disabled:""},null,8,["value"]),e[9]||(e[9]=s("div",{style:{"font-size":"12px",color:"#999","margin-top":"4px"}}," 此学时为关卡总计学时，无需填写，系统自动计算。 ",-1))]),_:1,__:[9]})]),_:1},8,["model"])]),s("div",ne,[t(q,{onClick:V},{default:n(()=>e[10]||(e[10]=[l("返回")])),_:1,__:[10]}),t(q,{type:"primary",onClick:C},{default:n(()=>e[11]||(e[11]=[l("下一步")])),_:1,__:[11]})])])])}}}),fe=Q(re,[["__scopeId","data-v-e662251b"]]);export{fe as default};
