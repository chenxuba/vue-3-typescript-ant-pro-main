import{d as Ke,ak as Oe,f as v,o as Ye,w as le,c as _e,_ as f,a1 as d,$ as n,k as l,ac as I,a7 as t,F as S,ag as K,u as q,a6 as M,G as i,a9 as R,ab as ye,y as Qe}from"./vue-PnzzEkKE.js";import{R as ke,u as be}from"./RichTextEditor-hPi3EfKs.js";import{b as te,d as We,g as Xe,s as Ze,a as we,c as ea}from"./index-CCqIRe_t.js";import{u as aa,a as la,d as ta}from"./dictionary-rl-yGAYn.js";import{g as oa,a as sa}from"./dictionary-DuOUJmgT.js";import{H as L,j as na,t as ra,x as oe,c as ua,a as ia,m as da,F as va}from"./FileSelectModal-DCxPJXCy.js";import{a1 as r,a2 as ca,a3 as pa,z as fa,I as ma,a4 as ga,a5 as _a,a6 as ya,a7 as ka,a8 as ba,ac as wa,a9 as ha,H as Ta,J as Ca,K as xa,aj as Sa,Y as Ua,s as Ia,ah as qa,af as La,T as Aa}from"./antd-Cme2pY03.js";import{_ as Ra}from"./index-Ce1Nr6w0.js";const ja={class:"config-jupyter-lab-page"},Pa={class:"page-container"},Da={class:"steps-section"},Va={key:0},Ma={class:"form-section"},Fa={class:"flex items-top gap-16px"},Ea={class:"flex flex-col gap-12px"},Ha={key:0,class:"image-preview"},za=["src"],Ja={class:"flex items-top gap-16px"},Ba={class:"flex flex-col gap-12px"},Na={key:0,class:"image-preview"},$a=["src"],Ga={class:"form-section"},Ka={key:1,class:"step-content"},Oa={class:"jupyter-header"},Ya={class:"jupyter-actions"},Qa={class:"jupyter-iframe-wrapper"},Wa={key:0,class:"loading-container"},Xa=["src"],Za={key:2,class:"step-content evaluation-step"},el={class:"evaluation-section"},al={class:"section-block"},ll={class:"block-content"},tl={style:{display:"flex","align-items":"center",gap:"8px"}},ol={key:0,class:"section-block"},sl={class:"block-header"},nl={class:"header-actions"},rl={class:"block-content"},ul={class:"test-set-label"},il={class:"tab-footer-buttons"},dl={class:"reference-section"},vl={class:"section-block"},cl={class:"block-content"},pl={class:"tab-footer-buttons"},fl={key:3,class:"step-content environment-step"},ml={class:"environment-section"},gl={class:"environment-container"},_l={class:"environment-left"},yl={class:"search-box"},kl={class:"environment-list"},bl=["onClick"],wl={class:"environment-right"},hl={class:"environment-config-header"},Tl={style:{display:"flex","align-items":"center",gap:"8px"}},Cl={class:"page-footer"},he="http://101.200.13.193",xl=Ke({name:"ConfigJupyterLab",__name:"config-jupyter-lab",setup(Sl){L.registerLanguage("javascript",na),L.registerLanguage("typescript",ra),L.registerLanguage("xml",oe),L.registerLanguage("html",oe),L.registerLanguage("vue",oe),L.registerLanguage("css",ua),L.registerLanguage("json",ia),L.registerLanguage("markdown",da);const se=Oe(),_=v(0),w=v(null),g=v(null),F=v(),ne=v(),O=v(""),j=v(!1),Y=v(!1),Te=()=>{j.value=!j.value},Q=v(""),W=v(""),E=v(!1),H=v(!1),o=v({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1,enableCodeRepository:!1,repositoryType:"代码仓库",gitUrl:""});Ye(async()=>{var e;X.load(),ue.load(),D.load(),await Ce();const a=history.state;console.log("接收到的路由数据:",a),a&&a.name?(o.value.name=a.name||"",o.value.description=a.description||"",o.value.difficulty=a.difficulty||1,o.value.environment=a.environment,o.value.secondType=a.secondType,o.value.classHour=a.classHour||"",o.value.showTaskRequire=a.showTaskRequire||!1,console.log("已自动填充表单数据:",{name:o.value.name,description:o.value.description,descriptionLength:((e=o.value.description)==null?void 0:e.length)||0,difficulty:o.value.difficulty,environment:o.value.environment,secondType:o.value.secondType,classHour:o.value.classHour,showTaskRequire:o.value.showTaskRequire})):console.log("未接收到路由数据")}),le(_,async(a,e)=>{a===1&&e===0&&!g.value&&w.value&&(console.log("进入第二步（实验内容），自动创建任务..."),await Ve()),a===1&&g.value&&await ve()});const re={name:[{required:!0,message:"请输入名称",trigger:"blur"}],tag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],fieldType:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}],secondType:[{required:!0,message:"请选择小类别",trigger:"change"}],classHour:[{required:!0,message:"请输入学时",trigger:"blur"}],topCover:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],authType:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},X=aa(),ue=la(),D=ta(),T=v([]),Z=v(!1),Ce=async()=>{try{Z.value=!0;const a=oa(3),e=await sa({code:a});e&&e.list&&(T.value=e.list.map(c=>({label:c.name,value:String(c.value)})),console.log("加载环境选项:",{environmentOptions:T.value,currentEnvironment:o.value.environment}),o.value.environment?(C.value=String(o.value.environment),b.value.dockerImage=String(o.value.environment),console.log("使用第一步的环境:",o.value.environment)):!C.value&&T.value.length>0&&(C.value=T.value[0].value,b.value.dockerImage=T.value[0].value,o.value.environment=T.value[0].value,console.log("默认选中第一个环境:",T.value[0])))}catch(a){console.error("加载实验环境选项失败：",a),r.error("加载实验环境选项失败")}finally{Z.value=!1}},xe=[{title:"基本信息"},{title:"实验内容"},{title:"评测设置"},{title:"实验环境"}],ee=v(!1),Se=async a=>{var m;if(!(a.size/1024/1024<12))return r.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return r.error("只能上传 JPG/PNG 格式的图片!"),!1;try{E.value=!0;const y=await be(a);Q.value=he+y,o.value.topCover=y,(m=F.value)==null||m.validateFields(["topCover"]),r.success("顶部背景图上传成功")}catch{r.error("顶部背景图上传失败")}finally{E.value=!1}return!1},Ue=async a=>{var m;if(!(a.size/1024/1024<12))return r.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return r.error("只能上传 JPG/PNG 格式的图片!"),!1;try{H.value=!0;const y=await be(a);W.value=he+y,o.value.cover=y,(m=F.value)==null||m.validateFields(["cover"]),r.success("封面图上传成功")}catch{r.error("封面图上传失败")}finally{H.value=!1}return!1},ie=v("settings"),u=v({openTestValidate:1,testValidateFiles:"",testValidateSh:"",timeLimitM:"",scoreRule:1,evaluationSetting:1,testSets:[{id:1,arg:"",answer:"",select:1},{id:2,arg:"",answer:"",select:1}]}),h=v({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),z=v(!1),J=v(!1);let Ie=3;const qe=()=>{u.value.testSets.push({id:Ie++,arg:"",answer:"",select:1})},Le=a=>{if(u.value.testSets.length===1){r.warning("至少保留一个测试集");return}u.value.testSets=u.value.testSets.filter(e=>e.id!==a),r.success("删除成功")},Ae=(a,e)=>{a.select=e?1:2},Re=v([]),je=a=>{Re.value=a.map(c=>({uid:c.uid,name:c.name,status:"done",url:c.path}));const e=a.map(c=>c.path).join(",");u.value.testValidateFiles=e,r.success(`已选择 ${a.length} 个文件`),ee.value=!1},de=()=>{_.value===0?se.back():(_.value--,U())},Pe=async()=>{try{const a={projectType:3,environment:o.value.environment,name:o.value.name,tag:o.value.tag,fieldType:o.value.fieldType,difficulty:o.value.difficulty,classHour:o.value.classHour,topCover:o.value.topCover,cover:o.value.cover,description:o.value.description,showTaskRequire:o.value.showTaskRequire?1:2,authType:o.value.authType,enableCodeRepository:o.value.enableCodeRepository,secondType:o.value.secondType};o.value.enableCodeRepository&&(a.repositoryType=o.value.repositoryType,a.gitUrl=o.value.gitUrl),console.log("提交项目数据：",a);let e;w.value?(a.id=w.value,e=await we(a),r.success("项目更新成功！"),console.log("更新成功：",e)):(e=await ea(a),e&&e.id&&(w.value=e.id,console.log("项目ID已保存：",w.value)),r.success("项目创建成功！"),console.log("创建成功：",e)),_.value=1,U()}catch(a){console.error("操作失败：",a),r.error(w.value?"项目更新失败，请稍后重试":"项目创建失败，请稍后重试"),U()}},De=async()=>{var a,e;if(_.value===0)try{await Promise.all([(a=F.value)==null?void 0:a.validate(),(e=ne.value)==null?void 0:e.validate()]),console.log("表单数据：",o.value),await Pe()}catch{r.error("请完善必填信息"),U()}else if(_.value===1)g.value&&await Me(),_.value=2,U();else if(_.value===2){if(!z.value){r.error("请先保存评测设置后再进行下一步"),U();return}if(!J.value){r.error("请先保存参考答案后再进行下一步"),U();return}_.value=3,U()}},Ve=async()=>{try{if(!w.value){console.error("项目ID不存在，无法创建任务");return}const a={type:4,projectId:w.value,name:"JupyterLab环境实训任务"};console.log("自动提交任务数据：",a);const e=await We(a);e&&e.taskId&&(g.value=e.taskId,console.log("任务ID已保存：",g.value),r.success("任务创建成功！"),await ve())}catch(a){console.error("任务创建失败：",a),r.error("任务创建失败，请稍后重试")}},ve=async()=>{if(!g.value){console.log("taskId不存在，无法获取Pod配置");return}try{Y.value=!0,console.log("正在获取Pod配置，taskId:",g.value);const a=await Xe({taskId:g.value});console.log("获取到Pod数据：",a),a&&a.config&&a.config.url?(O.value=a.config.url,console.log("更新Jupyter URL为：",O.value),r.success("实验环境加载成功！")):(console.error("Pod配置中没有url字段"),r.warning("未获取到实验环境URL"))}catch(a){console.error("获取Pod配置失败：",a),r.error("获取实验环境失败，请稍后重试")}finally{Y.value=!1}},Me=async()=>{if(!g.value){console.log("taskId不存在，无法停止Pod");return}try{console.log("正在停止Pod，taskId:",g.value),await Ze({taskId:g.value}),console.log("Pod停止成功"),r.success("实验环境已停止")}catch(a){console.error("停止Pod失败：",a),r.error("停止实验环境失败，请稍后重试")}},Fe=async()=>{try{if(!g.value){r.error("任务ID不存在，请重新创建任务");return}if(u.value.openTestValidate===1){if(!u.value.timeLimitM){r.error("请输入评测时长限制");return}if(!u.value.testSets||u.value.testSets.length===0){r.error("请至少添加一个测试集");return}const c=u.value.testSets.filter(m=>m.select===1);if(c.length===0){r.error("请至少选中一个测试集");return}for(let m=0;m<c.length;m++){const y=c[m];if(!y.arg||y.arg.trim()===""){r.error(`测试集${m+1}的输入内容不能为空`);return}if(!y.answer||y.answer.trim()===""){r.error(`测试集${m+1}的期望输出不能为空`);return}}}const a=u.value.testSets.map(c=>({arg:c.arg,answer:c.answer,select:c.select})),e={taskId:g.value,projectId:w.value,openTestValidate:u.value.openTestValidate,testValidateFiles:u.value.testValidateFiles,testValidateSh:u.value.testValidateSh,timeLimitM:u.value.timeLimitM,scoreRule:u.value.scoreRule,evaluationSetting:u.value.evaluationSetting,testContent:JSON.stringify(a)};console.log("保存评测设置数据：",e),await te(e),z.value=!0,r.success("评测设置保存成功！")}catch(a){console.error("评测设置保存失败：",a),r.error("评测设置保存失败，请重试")}},Ee=async()=>{try{if(!g.value){r.error("任务ID不存在，请重新创建任务");return}if(!h.value.referenceAnswer||h.value.referenceAnswer.trim()===""){r.error("请输入参考答案内容");return}if(!h.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){r.error("请输入参考答案内容");return}const e={taskId:g.value,projectId:w.value,showAnswer:h.value.showAnswer,prohibitCopyAnswer:h.value.prohibitCopyAnswer,referenceAnswer:h.value.referenceAnswer};console.log("保存参考答案数据：",e),await te(e),J.value=!0,r.success("参考答案保存成功！")}catch(a){console.error("参考答案保存失败：",a),r.error("参考答案保存失败，请重试")}},He=async()=>{try{if(!w.value){r.error("项目ID不存在，请重新创建项目");return}if(!g.value){r.error("任务ID不存在，请重新创建任务");return}if(!z.value){r.error("请先保存评测设置后再完成创建");return}if(!J.value){r.error("请先保存参考答案后再完成创建");return}if(!b.value.dockerImage){r.error("请选择实验环境");return}if(!b.value.timeLimitM){r.error("请输入实验环境使用时长");return}await te({taskId:g.value,projectId:w.value,dockerImage:b.value.dockerImage,secondType:b.value.secondType,timeLimitM:b.value.timeLimitM}),await we({id:w.value,status:10}),r.success("项目创建成功！"),setTimeout(()=>{se.push("/dashboard/analysis")},500)}catch(a){console.error("完成创建失败：",a),r.error("完成创建失败，请重试")}},C=v(""),B=v(""),ze=_e(()=>B.value?T.value.filter(a=>a.label.toLowerCase().includes(B.value.toLowerCase())):T.value),Je=_e(()=>{const a=T.value.find(e=>e.value===C.value);return a?a.label:"未选择"}),b=v({dockerImage:"",secondType:"Css",timeLimitM:""}),Be=a=>{C.value=a,b.value.dockerImage=a,o.value.environment!==a&&(o.value.environment=a)};le(()=>o.value.environment,a=>{console.log("formData.environment 变化:",a,"当前 selectedEnvironment:",C.value),a&&String(a)!==C.value&&(C.value=String(a),b.value.dockerImage=String(a),console.log("已同步到第四步:",C.value))}),le(()=>C.value,a=>{console.log("selectedEnvironment 变化为:",a)});const U=()=>{Qe(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const a=document.querySelector(".page-content");a&&(a.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(m=>{m.scrollTop>0&&(m.scrollTop=0)})})};return(a,e)=>{const c=ca,m=pa,y=ma,p=fa,N=_a,$=ya,ce=ga,k=ba,A=ka,ae=wa,x=Ta,pe=ha,fe=Ca,V=xa,Ne=Sa,$e=Ua,me=qa,ge=Ia,Ge=Aa;return d(),f("div",ja,[e[54]||(e[54]=n("div",{class:"page-header"},[n("h2",null,"JupyterLab环境实训项目配置")],-1)),n("div",Pa,[n("div",Da,[l(m,{current:_.value,class:"custom-steps"},{default:t(()=>[(d(),f(S,null,K(xe,(s,G)=>l(c,{key:G,title:s.title},null,8,["title"])),64))]),_:1},8,["current"])]),_.value===0?(d(),f("div",Va,[e[29]||(e[29]=n("div",{class:"section-title"},[n("h3",null,"基本信息")],-1)),n("div",Ma,[l(V,{ref_key:"formRef",ref:F,model:o.value,rules:re,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:t(()=>[l(p,{label:"名称",name:"name",required:""},{default:t(()=>[l(y,{value:o.value.name,"onUpdate:value":e[0]||(e[0]=s=>o.value.name=s),placeholder:"请输入名称"},null,8,["value"])]),_:1}),l(ce,null,{default:t(()=>[l(N,{span:12},{default:t(()=>[l(p,{label:"技能标签",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:t(()=>[l(y,{value:o.value.tag,"onUpdate:value":e[1]||(e[1]=s=>o.value.tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),l(N,{span:12},{default:t(()=>[l(p,{label:"领域类别",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:t(()=>[l($,{value:o.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>o.value.fieldType=s),placeholder:"请选择领域类别",options:q(X).options.value,loading:q(X).loading.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),l(p,{label:"难度",name:"difficulty",required:""},{default:t(()=>[l(A,{value:o.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>o.value.difficulty=s),class:"custom-radio"},{default:t(()=>[(d(!0),f(S,null,K(q(ue).data.value,s=>(d(),M(k,{key:s.value,value:Number(s.value)},{default:t(()=>[i(R(s.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),l(ce,null,{default:t(()=>[l(N,{span:12},{default:t(()=>[l(p,{label:"实验环境",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:t(()=>[l($,{value:o.value.environment,"onUpdate:value":e[4]||(e[4]=s=>o.value.environment=s),placeholder:"请选择实验环境",options:T.value,loading:Z.value},null,8,["value","options","loading"])]),_:1})]),_:1}),l(N,{span:12},{default:t(()=>[l(p,{label:"小类别",name:"secondType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:t(()=>[l($,{value:o.value.secondType,"onUpdate:value":e[5]||(e[5]=s=>o.value.secondType=s),placeholder:"请选择小类别",options:q(D).options.value,loading:q(D).loading.value},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1}),l(p,{label:"学时",name:"classHour",required:""},{default:t(()=>[l(ae,{min:0,class:"w-full",value:o.value.classHour,"onUpdate:value":e[6]||(e[6]=s=>o.value.classHour=s),placeholder:"请输入学时"},null,8,["value"])]),_:1}),l(p,{label:"顶部背景图",name:"topCover",required:""},{default:t(()=>[n("div",Fa,[n("div",Ea,[l(pe,{"before-upload":Se,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:t(()=>[l(x,{loading:E.value},{default:t(()=>[E.value?(d(),f(S,{key:1},[i("上传中...")],64)):(d(),f(S,{key:0},[i("选择文件")],64))]),_:1},8,["loading"])]),_:1}),Q.value?(d(),f("div",Ha,[n("img",{src:Q.value,alt:"顶部背景图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,za)])):I("",!0)]),e[22]||(e[22]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),l(p,{label:"封面图",name:"cover",required:""},{default:t(()=>[n("div",Ja,[n("div",Ba,[l(pe,{"before-upload":Ue,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:t(()=>[l(x,{loading:H.value},{default:t(()=>[H.value?(d(),f(S,{key:1},[i("上传中...")],64)):(d(),f(S,{key:0},[i("选择文件")],64))]),_:1},8,["loading"])]),_:1}),W.value?(d(),f("div",Na,[n("img",{src:W.value,alt:"封面图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,$a)])):I("",!0)]),e[23]||(e[23]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),l(p,{label:"简介",name:"description"},{default:t(()=>[l(ke,{modelValue:o.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.description=s)},null,8,["modelValue"])]),_:1}),l(p,{label:"任务要求",name:"showTaskRequire"},{default:t(()=>[l(fe,{checked:o.value.showTaskRequire,"onUpdate:checked":e[8]||(e[8]=s=>o.value.showTaskRequire=s)},{default:t(()=>e[24]||(e[24]=[i(" 显示任务要求（勾选后，将帮作为任务要求显示在任务项目政策面） ")])),_:1,__:[24]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[30]||(e[30]=n("div",{class:"section-title"},[n("h3",null,"培训公开范围")],-1)),n("div",Ga,[l(V,{ref_key:"trainingScopeFormRef",ref:ne,model:o.value,rules:re,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:t(()=>[l(p,{label:"培训公开范围",name:"authType",required:""},{default:t(()=>[l(A,{value:o.value.authType,"onUpdate:value":e[9]||(e[9]=s=>o.value.authType=s),class:"custom-radio"},{default:t(()=>[l(k,{value:1},{default:t(()=>e[25]||(e[25]=[i("完全公开")])),_:1,__:[25]}),l(k,{value:2},{default:t(()=>e[26]||(e[26]=[i("全院公开")])),_:1,__:[26]}),l(k,{value:3},{default:t(()=>e[27]||(e[27]=[i("本单位公开")])),_:1,__:[27]}),l(k,{value:4},{default:t(()=>e[28]||(e[28]=[i("不公开")])),_:1,__:[28]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):I("",!0),_.value===1?(d(),f("div",Ka,[n("div",{class:ye(["jupyter-container",{fullscreen:j.value}])},[n("div",Oa,[e[31]||(e[31]=n("h3",null,"Jupyter Lab 编辑器",-1)),n("div",Ya,[l(Ne,{title:j.value?"退出全屏":"全屏"},{default:t(()=>[l(x,{type:"text",icon:j.value?"fullscreen-exit":"fullscreen",onClick:Te},{default:t(()=>[i(R(j.value?"退出全屏":"全屏"),1)]),_:1},8,["icon"])]),_:1},8,["title"])])]),n("div",Qa,[Y.value?(d(),f("div",Wa,[l($e,{size:"large",tip:"正在加载实验环境..."})])):(d(),f("iframe",{key:1,src:O.value,class:"jupyter-iframe",frameborder:"0",allowfullscreen:""},null,8,Xa))])],2)])):I("",!0),_.value===2?(d(),f("div",Za,[l(Ge,{activeKey:ie.value,"onUpdate:activeKey":e[17]||(e[17]=s=>ie.value=s),class:"evaluation-tabs"},{default:t(()=>[l(ge,{key:"settings",tab:"评测设置"},{default:t(()=>[n("div",el,[n("div",al,[e[39]||(e[39]=n("div",{class:"block-header"},"评测文件",-1)),n("div",ll,[l(V,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:t(()=>[l(p,{label:"是否启用评测功能",required:""},{default:t(()=>[l(A,{value:u.value.openTestValidate,"onUpdate:value":e[10]||(e[10]=s=>u.value.openTestValidate=s),class:"custom-radio"},{default:t(()=>[l(k,{value:1},{default:t(()=>e[32]||(e[32]=[i("是")])),_:1,__:[32]}),l(k,{value:2},{default:t(()=>e[33]||(e[33]=[i("否")])),_:1,__:[33]})]),_:1},8,["value"])]),_:1}),u.value.openTestValidate===1?(d(),f(S,{key:0},[l(p,{label:"评测时长限制",required:""},{default:t(()=>[n("div",tl,[l(ae,{value:u.value.timeLimitM,"onUpdate:value":e[11]||(e[11]=s=>u.value.timeLimitM=s),min:1,placeholder:"请输入评测时长（分钟）",style:{width:"580px"}},null,8,["value"]),e[34]||(e[34]=n("span",null,"分钟",-1))])]),_:1}),l(p,{label:"系统评分规则"},{default:t(()=>[l(A,{value:u.value.scoreRule,"onUpdate:value":e[12]||(e[12]=s=>u.value.scoreRule=s),class:"custom-radio"},{default:t(()=>[l(k,{value:1},{default:t(()=>e[35]||(e[35]=[i(" 通过全部测试集（仅当所有测试集都正确时，获得项目学时） ")])),_:1,__:[35]}),l(k,{value:2},{default:t(()=>e[36]||(e[36]=[i(" 通过部分测试集（任意一个测试集正确时，获得项目学时） ")])),_:1,__:[36]})]),_:1},8,["value"])]),_:1}),l(p,{label:"评测设置",required:""},{default:t(()=>[l(A,{value:u.value.evaluationSetting,"onUpdate:value":e[13]||(e[13]=s=>u.value.evaluationSetting=s),class:"custom-radio"},{default:t(()=>[l(k,{value:1},{default:t(()=>e[37]||(e[37]=[i(" 通过所有代码块评测（对学员任务文件的所有非空代码块进行评测） ")])),_:1,__:[37]}),l(k,{value:2},{default:t(()=>e[38]||(e[38]=[i(" 通过指定代码块评测（对学员任务文件的指定非空代码块进行评测） ")])),_:1,__:[38]})]),_:1},8,["value"])]),_:1})],64)):I("",!0)]),_:1})])]),u.value.openTestValidate===1?(d(),f("div",ol,[n("div",sl,[e[41]||(e[41]=n("span",null,"测试集",-1)),n("div",nl,[l(x,{onClick:qe},{default:t(()=>e[40]||(e[40]=[i("新增测试集")])),_:1,__:[40]})])]),n("div",rl,[(d(!0),f(S,null,K(u.value.testSets,(s,G)=>(d(),f("div",{key:s.id,class:"test-set-item"},[l(fe,{checked:s.select===1,onChange:P=>Ae(s,P.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),n("span",ul,"测试集"+R(G+1),1),l(me,{value:s.arg,"onUpdate:value":P=>s.arg=P,placeholder:"请输入输入内容",class:"test-set-input","auto-size":{minRows:3}},null,8,["value","onUpdate:value"]),l(me,{value:s.answer,"onUpdate:value":P=>s.answer=P,placeholder:"请输入期望输出",class:"test-set-input","auto-size":{minRows:3}},null,8,["value","onUpdate:value"]),l(q(La),{class:"delete-test-set-icon",onClick:P=>Le(s.id)},null,8,["onClick"])]))),128))])])):I("",!0),n("div",il,[l(x,{type:"primary",onClick:Fe},{default:t(()=>[i(R(z.value?"更新":"保存"),1)]),_:1})])])]),_:1}),l(ge,{key:"reference",tab:"参考答案"},{default:t(()=>[n("div",dl,[n("div",vl,[e[46]||(e[46]=n("div",{class:"block-header"},"参考答案",-1)),n("div",cl,[l(V,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:t(()=>[l(p,{label:"是否显示参考答案模块",required:""},{default:t(()=>[l(A,{value:h.value.showAnswer,"onUpdate:value":e[14]||(e[14]=s=>h.value.showAnswer=s),class:"custom-radio"},{default:t(()=>[l(k,{value:1},{default:t(()=>e[42]||(e[42]=[i("是")])),_:1,__:[42]}),l(k,{value:2},{default:t(()=>e[43]||(e[43]=[i("否")])),_:1,__:[43]})]),_:1},8,["value"])]),_:1}),l(p,{label:"是否禁止复制参考答案",required:""},{default:t(()=>[l(A,{value:h.value.prohibitCopyAnswer,"onUpdate:value":e[15]||(e[15]=s=>h.value.prohibitCopyAnswer=s),class:"custom-radio"},{default:t(()=>[l(k,{value:1},{default:t(()=>e[44]||(e[44]=[i("是")])),_:1,__:[44]}),l(k,{value:2},{default:t(()=>e[45]||(e[45]=[i("否")])),_:1,__:[45]})]),_:1},8,["value"])]),_:1}),l(p,{label:"参考答案",required:""},{default:t(()=>[l(ke,{modelValue:h.value.referenceAnswer,"onUpdate:modelValue":e[16]||(e[16]=s=>h.value.referenceAnswer=s)},null,8,["modelValue"])]),_:1})]),_:1})])]),n("div",pl,[l(x,{type:"primary",onClick:Ee},{default:t(()=>[i(R(J.value?"更新":"保存"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):I("",!0),_.value===3?(d(),f("div",fl,[n("div",ml,[e[49]||(e[49]=n("h3",{class:"section-main-title"},"实验环境",-1)),n("div",gl,[n("div",_l,[n("div",yl,[l(y,{value:B.value,"onUpdate:value":e[18]||(e[18]=s=>B.value=s),placeholder:"搜索需要的实验环境","allow-clear":""},{suffix:t(()=>e[47]||(e[47]=[n("span",{class:"search-icon"},"🔍",-1)])),_:1},8,["value"])]),n("div",kl,[(d(!0),f(S,null,K(ze.value,s=>(d(),f("div",{key:s.value,class:ye(["environment-item",{active:C.value===s.value}]),onClick:G=>Be(s.value)},R(s.label),11,bl))),128))])]),n("div",wl,[n("div",hl," 实验环境: "+R(Je.value),1),l(V,{model:b.value,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}},{default:t(()=>[l(p,{label:"附带环境"},{default:t(()=>[l($,{value:b.value.secondType,"onUpdate:value":e[19]||(e[19]=s=>b.value.secondType=s),placeholder:"请选择附带环境",options:q(D).options.value,loading:q(D).loading.value},null,8,["value","options","loading"])]),_:1}),l(p,{label:"实验环境使用时长"},{default:t(()=>[n("div",Tl,[l(ae,{value:b.value.timeLimitM,"onUpdate:value":e[20]||(e[20]=s=>b.value.timeLimitM=s),min:1,placeholder:"请输入实验环境使用时长",style:{flex:"1"}},null,8,["value"]),e[48]||(e[48]=n("span",null,"分",-1))])]),_:1})]),_:1},8,["model"])])])])])):I("",!0),n("div",Cl,[_.value===0?(d(),M(x,{key:0,onClick:de},{default:t(()=>e[50]||(e[50]=[i("返回")])),_:1,__:[50]})):(d(),M(x,{key:1,onClick:de},{default:t(()=>e[51]||(e[51]=[i("上一步")])),_:1,__:[51]})),_.value===3?(d(),M(x,{key:2,type:"primary",onClick:He},{default:t(()=>e[52]||(e[52]=[i("完成创建")])),_:1,__:[52]})):(d(),M(x,{key:3,type:"primary",onClick:De},{default:t(()=>e[53]||(e[53]=[i("下一步")])),_:1,__:[53]}))])]),l(va,{open:ee.value,"onUpdate:open":e[21]||(e[21]=s=>ee.value=s),title:"选择评测文件","git-url":o.value.gitUrl,onConfirm:je},null,8,["open","git-url"])])}}}),Dl=Ra(xl,[["__scopeId","data-v-c8e71f94"]]);export{Dl as default};
