import{d as oe,ab as se,f as c,o as ne,a0 as _,a3 as p,a1 as o,af as b,k as l,a9 as a,F as j,aj as L,G as n,ae as ue,ac as F,a8 as T,y as ie}from"./vue-CLfcZxUN.js";import{R as $}from"./RichTextEditor-CQdbV8pa.js";import{ab as re,ac as de,Q as pe,U as ve,ad as fe,ae as _e,v as ce,af as me,ag as ge,ah as ke,G as be,Z as ye,$ as qe,t as we,J as Ce,T as Te,aa as y}from"./antd-Du2BR_SQ.js";import{_ as Ue}from"./index-B_E_Ii-4.js";const Re={class:"config-jupyter-notebook-page"},Se={class:"page-container"},xe={class:"steps-section"},je={key:0},Fe={class:"form-section"},Ne={class:"flex items-top gap-16px"},Ie={class:"flex items-top gap-16px"},Ve={class:"form-section"},he={key:1,class:"step-content"},He={class:"jupyter-header"},Be={class:"jupyter-actions"},Ee={key:2,class:"step-content evaluation-step"},De={class:"evaluation-section"},Je={class:"section-block"},ze={class:"block-content"},Le={class:"flex items-center gap-16px"},$e={key:0,class:"file-name"},Me={key:0,class:"section-block"},Ae={class:"block-header"},Ke={class:"header-actions"},Ge={class:"block-content"},We={class:"test-set-label"},Oe={class:"reference-section"},Pe={class:"section-block"},Qe={class:"block-content"},Ze={class:"page-footer"},Xe="http://101.200.13.193:8888/jupyter3a88a3/lab?token=jupyter3a88a3",Ye=oe({name:"ConfigJupyterNotebook",__name:"config-jupyter-notebook",setup(el){const N=se(),v=c(0),I=c(),V=c(),k=c(!1),M=()=>{k.value=!k.value},h=c("settings"),i=c({enableEvaluation:!0,defaultFile:null,defaultFileName:"",timeLimit:"",scoringRule:"通过全部测试集",evaluationSetting:"通过所有代码块评测",testSets:[{id:1,checked:!1,content:""},{id:2,checked:!1,content:""}]}),m=c({hideReference:!0,disableCopy:!0,content:""});let H=3;const A=()=>{i.value.testSets.push({id:H++,checked:!1,content:""})},K=()=>{if(!i.value.testSets.some(e=>e.checked)){y.warning("请勾选要删除的测试集");return}i.value.testSets=i.value.testSets.filter(e=>!e.checked),i.value.testSets.length===0&&(y.warning("至少保留一个测试集"),i.value.testSets.push({id:H++,checked:!1,content:""}))},G=u=>(i.value.defaultFile=u,i.value.defaultFileName=u.name,y.success(`已选择文件: ${u.name}`),!1),s=c({name:"",skillTag:"",domainCategory:void 0,difficulty:"简单",studyHours:"",backgroundImage:null,coverImage:null,description:"",showTaskRequirement:!1,trainingScope:"完全公开"});ne(()=>{var e;const u=history.state;if(console.log("接收到的路由数据:",u),u&&u.name){const w={1:"简单",2:"适中",3:"困难"};s.value.name=u.name||"",s.value.description=u.description||"",s.value.difficulty=w[u.difficulty]||"简单",s.value.studyHours=u.classHour||"",s.value.showTaskRequirement=u.showTaskRequire||!1,console.log("已自动填充表单数据:",{name:s.value.name,description:s.value.description,descriptionLength:((e=s.value.description)==null?void 0:e.length)||0,difficulty:s.value.difficulty,studyHours:s.value.studyHours,showTaskRequirement:s.value.showTaskRequirement})}else console.log("未接收到路由数据")});const B={name:[{required:!0,message:"请输入名称",trigger:"blur"}],skillTag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],domainCategory:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],backgroundImage:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],coverImage:[{required:!0,message:"请上传封面图",trigger:"change"}],trainingScope:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},W=[{label:"人工智能",value:"人工智能"},{label:"大数据",value:"大数据"},{label:"云计算",value:"云计算"},{label:"Web开发",value:"Web开发"}],O=[{title:"基本信息"},{title:"实验内容"},{title:"评测设置"}],E=()=>{v.value===0?N.back():(v.value--,U())},P=async()=>{var u,e;if(v.value===0)try{await Promise.all([(u=I.value)==null?void 0:u.validate(),(e=V.value)==null?void 0:e.validate()]),console.log("表单数据：",s.value),v.value=1,U()}catch{y.error("请完善必填信息"),v.value=1}else v.value===1&&(v.value=2,U())},Q=async()=>{try{const u={type:"JupyterNotebook",basicInfo:s.value,evaluation:i.value,referenceAnswer:m.value};console.log("保存项目数据：",u),y.success("项目创建成功！"),setTimeout(()=>{N.push("/dashboard/analysis")},500)}catch(u){console.error("保存失败：",u),y.error("保存失败，请重试")}},U=()=>{ie(()=>{window.scrollTo({top:0,behavior:"smooth"})})},Z=u=>(s.value.backgroundImage=u,!1),X=u=>(s.value.coverImage=u,!1);return(u,e)=>{const w=re,Y=de,q=ve,r=pe,D=_e,ee=ce,le=fe,d=ge,g=me,f=be,R=ke,J=ye,C=qe,ae=we,z=Ce,te=Te;return p(),_("div",Re,[e[51]||(e[51]=o("div",{class:"page-header"},[o("h2",null,"JupyterNotebook环境实训项目配置")],-1)),o("div",Se,[o("div",xe,[l(Y,{current:v.value,class:"custom-steps"},{default:a(()=>[(p(),_(j,null,L(O,(t,S)=>l(w,{key:S,title:t.title},null,8,["title"])),64))]),_:1},8,["current"])]),v.value===0?(p(),_("div",je,[e[28]||(e[28]=o("div",{class:"section-title"},[o("h3",null,"基本信息")],-1)),o("div",Fe,[l(C,{ref_key:"formRef",ref:I,model:s.value,rules:B,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:a(()=>[l(r,{label:"名称",name:"name",required:""},{default:a(()=>[l(q,{value:s.value.name,"onUpdate:value":e[0]||(e[0]=t=>s.value.name=t),placeholder:"请输入名称"},null,8,["value"])]),_:1}),l(le,null,{default:a(()=>[l(D,{span:12},{default:a(()=>[l(r,{label:"技能标签",name:"skillTag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:a(()=>[l(q,{value:s.value.skillTag,"onUpdate:value":e[1]||(e[1]=t=>s.value.skillTag=t),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),l(D,{span:12},{default:a(()=>[l(r,{label:"领域类别",name:"domainCategory",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:a(()=>[l(ee,{value:s.value.domainCategory,"onUpdate:value":e[2]||(e[2]=t=>s.value.domainCategory=t),placeholder:"请选择领域类别",options:W},null,8,["value"])]),_:1})]),_:1})]),_:1}),l(r,{label:"难度",name:"difficulty",required:""},{default:a(()=>[l(g,{value:s.value.difficulty,"onUpdate:value":e[3]||(e[3]=t=>s.value.difficulty=t),class:"custom-radio"},{default:a(()=>[l(d,{value:"简单"},{default:a(()=>e[16]||(e[16]=[n("简单")])),_:1,__:[16]}),l(d,{value:"适中"},{default:a(()=>e[17]||(e[17]=[n("适中")])),_:1,__:[17]}),l(d,{value:"困难"},{default:a(()=>e[18]||(e[18]=[n("困难")])),_:1,__:[18]})]),_:1},8,["value"])]),_:1}),l(r,{label:"学时",name:"studyHours"},{default:a(()=>[l(q,{value:s.value.studyHours,"onUpdate:value":e[4]||(e[4]=t=>s.value.studyHours=t),placeholder:"请输入学时"},null,8,["value"])]),_:1}),l(r,{label:"顶部背景图",name:"backgroundImage",required:""},{default:a(()=>[o("div",Ne,[l(R,{"before-upload":Z,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:a(()=>[l(f,null,{default:a(()=>e[19]||(e[19]=[n("选择文件")])),_:1,__:[19]})]),_:1}),e[20]||(e[20]=o("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素；如不上传，默认使用系统图片。 ",-1))])]),_:1}),l(r,{label:"封面图",name:"coverImage",required:""},{default:a(()=>[o("div",Ie,[l(R,{"before-upload":X,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:a(()=>[l(f,null,{default:a(()=>e[21]||(e[21]=[n("选择文件")])),_:1,__:[21]})]),_:1}),e[22]||(e[22]=o("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素；如不上传，默认使用系统图片。 ",-1))])]),_:1}),l(r,{label:"简介",name:"description"},{default:a(()=>[l($,{modelValue:s.value.description,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.description=t)},null,8,["modelValue"])]),_:1}),l(r,{label:"任务要求",name:"showTaskRequirement"},{default:a(()=>[l(J,{checked:s.value.showTaskRequirement,"onUpdate:checked":e[6]||(e[6]=t=>s.value.showTaskRequirement=t)},{default:a(()=>e[23]||(e[23]=[n(" 显示任务要求（勾选后，将简介作为任务要求显示在实践项目挑战页面） ")])),_:1,__:[23]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[29]||(e[29]=o("div",{class:"section-title"},[o("h3",null,"培训公开范围")],-1)),o("div",Ve,[l(C,{ref_key:"trainingScopeFormRef",ref:V,model:s.value,rules:B,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:a(()=>[l(r,{label:"培训公开范围",name:"trainingScope",required:""},{default:a(()=>[l(g,{value:s.value.trainingScope,"onUpdate:value":e[7]||(e[7]=t=>s.value.trainingScope=t),class:"custom-radio"},{default:a(()=>[l(d,{value:"完全公开"},{default:a(()=>e[24]||(e[24]=[n("完全公开")])),_:1,__:[24]}),l(d,{value:"全院公开"},{default:a(()=>e[25]||(e[25]=[n("全院公开")])),_:1,__:[25]}),l(d,{value:"本单位公开"},{default:a(()=>e[26]||(e[26]=[n("本单位公开")])),_:1,__:[26]}),l(d,{value:"不公开"},{default:a(()=>e[27]||(e[27]=[n("不公开")])),_:1,__:[27]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):b("",!0),v.value===1?(p(),_("div",he,[o("div",{class:ue(["jupyter-container",{fullscreen:k.value}])},[o("div",He,[e[30]||(e[30]=o("h3",null,"Jupyter Notebook 编辑器",-1)),o("div",Be,[l(ae,{title:k.value?"退出全屏":"全屏"},{default:a(()=>[l(f,{type:"text",icon:k.value?"fullscreen-exit":"fullscreen",onClick:M},{default:a(()=>[n(F(k.value?"退出全屏":"全屏"),1)]),_:1},8,["icon"])]),_:1},8,["title"])])]),o("div",{class:"jupyter-iframe-wrapper"},[o("iframe",{src:Xe,class:"jupyter-iframe",frameborder:"0",allowfullscreen:""})])],2)])):b("",!0),v.value===2?(p(),_("div",Ee,[l(te,{activeKey:h.value,"onUpdate:activeKey":e[15]||(e[15]=t=>h.value=t),class:"evaluation-tabs"},{default:a(()=>[l(z,{key:"settings",tab:"评测设置"},{default:a(()=>[o("div",De,[o("div",Je,[e[38]||(e[38]=o("div",{class:"block-header"},"评测文件",-1)),o("div",ze,[l(C,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:a(()=>[l(r,{label:"是否启用评测功能",required:""},{default:a(()=>[l(g,{value:i.value.enableEvaluation,"onUpdate:value":e[8]||(e[8]=t=>i.value.enableEvaluation=t),class:"custom-radio"},{default:a(()=>[l(d,{value:!0},{default:a(()=>e[31]||(e[31]=[n("是")])),_:1,__:[31]}),l(d,{value:!1},{default:a(()=>e[32]||(e[32]=[n("否")])),_:1,__:[32]})]),_:1},8,["value"])]),_:1}),i.value.enableEvaluation?(p(),_(j,{key:0},[l(r,{label:"评测文件",required:""},{default:a(()=>[o("div",Le,[l(R,{"before-upload":G,"show-upload-list":!1,accept:".py,.ipynb"},{default:a(()=>[l(f,{type:"primary"},{default:a(()=>e[33]||(e[33]=[n("点击选择评测文件")])),_:1,__:[33]})]),_:1}),i.value.defaultFileName?(p(),_("span",$e,F(i.value.defaultFileName),1)):b("",!0)])]),_:1}),l(r,{label:"评测时长限制",required:""},{default:a(()=>[l(q,{value:i.value.timeLimit,"onUpdate:value":e[9]||(e[9]=t=>i.value.timeLimit=t),placeholder:"请输入评测时长（秒）",style:{width:"600px"}},null,8,["value"])]),_:1}),l(r,{label:"系统评分规则"},{default:a(()=>[l(g,{value:i.value.scoringRule,"onUpdate:value":e[10]||(e[10]=t=>i.value.scoringRule=t),class:"custom-radio"},{default:a(()=>[l(d,{value:"通过全部测试集"},{default:a(()=>e[34]||(e[34]=[n(" 通过全部测试集（仅当所有测试集都正确时，获得项目学时） ")])),_:1,__:[34]}),l(d,{value:"通过部分测试集"},{default:a(()=>e[35]||(e[35]=[n(" 通过部分测试集（任意一个测试集正确时，获得项目学时） ")])),_:1,__:[35]})]),_:1},8,["value"])]),_:1}),l(r,{label:"评测设置",required:""},{default:a(()=>[l(g,{value:i.value.evaluationSetting,"onUpdate:value":e[11]||(e[11]=t=>i.value.evaluationSetting=t),class:"custom-radio"},{default:a(()=>[l(d,{value:"通过所有代码块评测"},{default:a(()=>e[36]||(e[36]=[n(" 通过所有代码块评测（对学员任务文件的所有非空代码块进行评测） ")])),_:1,__:[36]}),l(d,{value:"通过指定代码块评测"},{default:a(()=>e[37]||(e[37]=[n(" 通过指定代码块评测（对学员任务文件的指定非空代码块进行评测） ")])),_:1,__:[37]})]),_:1},8,["value"])]),_:1})],64)):b("",!0)]),_:1})])]),i.value.enableEvaluation?(p(),_("div",Me,[o("div",Ae,[e[41]||(e[41]=o("span",null,"测试集",-1)),o("div",Ke,[l(f,{onClick:A},{default:a(()=>e[39]||(e[39]=[n("新增测试集")])),_:1,__:[39]}),l(f,{onClick:K},{default:a(()=>e[40]||(e[40]=[n("删除测试集")])),_:1,__:[40]})])]),o("div",Ge,[(p(!0),_(j,null,L(i.value.testSets,(t,S)=>(p(),_("div",{key:t.id,class:"test-set-item"},[l(J,{checked:t.checked,"onUpdate:checked":x=>t.checked=x},null,8,["checked","onUpdate:checked"]),o("span",We,"测试集"+F(S+1),1),l(q,{value:t.content,"onUpdate:value":x=>t.content=x,placeholder:"请输入预期输出内容",class:"test-set-input"},null,8,["value","onUpdate:value"])]))),128))])])):b("",!0)])]),_:1}),l(z,{key:"reference",tab:"参考答案"},{default:a(()=>[o("div",Oe,[o("div",Pe,[e[46]||(e[46]=o("div",{class:"block-header"},"参考答案",-1)),o("div",Qe,[l(C,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:a(()=>[l(r,{label:"是否隐藏参考答案模块",required:""},{default:a(()=>[l(g,{value:m.value.hideReference,"onUpdate:value":e[12]||(e[12]=t=>m.value.hideReference=t),class:"custom-radio"},{default:a(()=>[l(d,{value:!0},{default:a(()=>e[42]||(e[42]=[n("是")])),_:1,__:[42]}),l(d,{value:!1},{default:a(()=>e[43]||(e[43]=[n("否")])),_:1,__:[43]})]),_:1},8,["value"])]),_:1}),l(r,{label:"是否禁止复制参考答案",required:""},{default:a(()=>[l(g,{value:m.value.disableCopy,"onUpdate:value":e[13]||(e[13]=t=>m.value.disableCopy=t),class:"custom-radio"},{default:a(()=>[l(d,{value:!0},{default:a(()=>e[44]||(e[44]=[n("是")])),_:1,__:[44]}),l(d,{value:!1},{default:a(()=>e[45]||(e[45]=[n("否")])),_:1,__:[45]})]),_:1},8,["value"])]),_:1}),l(r,{label:"参考答案",required:""},{default:a(()=>[l($,{modelValue:m.value.content,"onUpdate:modelValue":e[14]||(e[14]=t=>m.value.content=t)},null,8,["modelValue"])]),_:1})]),_:1})])])])]),_:1})]),_:1},8,["activeKey"])])):b("",!0),o("div",Ze,[v.value===0?(p(),T(f,{key:0,onClick:E},{default:a(()=>e[47]||(e[47]=[n("返回")])),_:1,__:[47]})):(p(),T(f,{key:1,onClick:E},{default:a(()=>e[48]||(e[48]=[n("上一步")])),_:1,__:[48]})),v.value===2?(p(),T(f,{key:2,type:"primary",onClick:Q},{default:a(()=>e[49]||(e[49]=[n("保存")])),_:1,__:[49]})):(p(),T(f,{key:3,type:"primary",onClick:P},{default:a(()=>e[50]||(e[50]=[n("下一步")])),_:1,__:[50]}))])])])}}}),sl=Ue(Ye,[["__scopeId","data-v-6d7dce9f"]]);export{sl as default};
