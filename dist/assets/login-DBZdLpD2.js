var ae=Object.defineProperty;var re=(c,r,d)=>r in c?ae(c,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[r]=d;var v=(c,r,d)=>re(c,typeof r!="symbol"?r+"":r,d);import{a as ie,_ as le}from"./index.vue_vue_type_style_index_0_lang-BtxR8Ggj.js";import{_ as W,g as j,j as ce,u as de,k as ue,f as pe,m as me,n as _e,A as ge}from"./index-D6cQR864.js";import{_ as b,a1 as g,$ as n,d as D,a6 as P,a7 as l,k as o,u as e,G as w,S as he,a9 as fe,r as ve,s as z,f as be,al as we,o as xe,j as ye,aa as _,ad as $,F as A}from"./vue-C8C4cLDH.js";import{c as ke,f as Ce,D as Le,Q as Me,F as ze,T as $e,J as Ae,G as qe,U as Ue,V as Ee,W as Te,X as Pe,Y as V,Z as Fe,H as Ie,$ as Re,a0 as Ne,a1 as Se,a2 as Ve,a3 as Be}from"./antd-BOMTo3h8.js";var He=async(c=0)=>new Promise(r=>{const d=setTimeout(()=>{r(!0),clearTimeout(d)},c)});const We={name:"CarbonTranslate"},je={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"};function De(c,r,d,h,m,u){return g(),b("svg",je,r[0]||(r[0]=[n("path",{fill:"currentColor",d:"M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6l2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"},null,-1)]))}const Oe=W(We,[["render",De]]),Ye={hover:"bg-[var(--hover-color)]",flex:"","items-center":"","h-48px":"","px-12px":"","text-16px":"","cursor-pointer":"",class:"transition-all-300"},Ge=D({__name:"index",setup(c){const{locale:r,setLocale:d}=j();function h({key:m}){d(m)}return(m,u)=>{const q=Oe,s=Ce,i=ke,x=Le;return g(),P(x,null,{overlay:l(()=>[o(i,{"selected-keys":[e(r)],onClick:h},{default:l(()=>[o(s,{key:"zh-CN"},{icon:l(()=>u[0]||(u[0]=[n("span",null," 🇨🇳 ",-1)])),default:l(()=>[u[1]||(u[1]=w(" 简体中文 "))]),_:1,__:[1]}),o(s,{key:"en-US"},{icon:l(()=>u[2]||(u[2]=[n("span",null," 🇺🇸 ",-1)])),default:l(()=>[u[3]||(u[3]=w(" English "))]),_:1,__:[3]})]),_:1},8,["selected-keys"])]),default:l(()=>[n("span",Ye,[o(q,{class:"anticon"})])]),_:1})}}}),Qe=""+new URL("../logo.svg",import.meta.url).href,Je=""+new URL("login-left-YYnMV6bm.png",import.meta.url).href;function Ke(c,r=""){var m;const d=((m=ce.currentRoute.value)==null?void 0:m.query)??{},h=Me(d,c)??r;return decodeURIComponent(h)}const t={width:0,height:0,canvas:null,ctx:null,circles:[],animate:!0,requestId:null},Xe=function(c){if(!t||!c)throw new Error("no canvasInstance");t.width=window.innerWidth,t.height=window.innerHeight,t.canvas=c,t.canvas.width=t.width,t.canvas.height=t.height,t.ctx=t.canvas.getContext("2d"),t.circles=[];for(let r=0;r<t.width*.5;r++){const d=new Ze;t.circles.push(d)}G(),et()};function O(){t.animate=!(document.body.scrollTop>t.height)}function Y(){t.width=window.innerWidth,t.height=window.innerHeight,t.canvas.width=t.width,t.canvas.height=t.height}function G(){if(t.animate){t.ctx.clearRect(0,0,t.width,t.height);for(const c in t.circles)t.circles[c].draw()}t.requestId=requestAnimationFrame(G)}class Ze{constructor(){v(this,"pos");v(this,"alpha");v(this,"scale");v(this,"velocity");v(this,"draw");this.pos={x:Math.random()*t.width,y:t.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random();const r=Math.random()*255,d=Math.random()*255,h=Math.random()*255;this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,t.ctx.beginPath(),t.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),t.ctx.fillStyle=`rgba(${r},${d},${h},${this.alpha})`,t.ctx.fill()}}}function et(){window.addEventListener("scroll",O),window.addEventListener("resize",Y)}function tt(){window.removeEventListener("scroll",O),window.removeEventListener("resize",Y),cancelAnimationFrame(t.requestId)}const B={init:Xe,removeListeners:tt},ot={class:"login-container"},nt={"h-screen":"","w-screen":"",absolute:"","z-10":""},st={class:"login-content flex-center"},at={class:"ant-pro-form-login-main rounded"},rt={class:"flex-between h-15 px-4 mb-[2px]"},it={class:"flex-end"},lt={class:"ant-pro-form-login-desc"},ct={class:"login-lang flex-center relative z-11"},dt={class:"box-border flex min-h-[520px]"},ut={class:"ant-pro-form-login-main-right px-5 w-[335px] flex-center flex-col relative z-11"},pt={class:"text-center py-6 text-2xl"},mt={flex:"","items-center":""},_t={class:"mb-24px flex-between"},gt={class:"text-slate-500"},ht={class:"ant-pro-form-login-other"},ft=["data-theme"],H=60,vt=D({__name:"login",setup(c){const r=de(),d=ue(),h=pe(),{layoutSetting:m}=he(h),u=fe(),q=me(),s=ve({username:void 0,password:void 0,mobile:void 0,code:void 0,type:"account",remember:!0}),{t:i}=j(),x=z(),L=z(!1),U=z(!1),E=z(!1),F=be(),{counter:Q,pause:J,reset:K,resume:X,isActive:I}=we(1e3,{controls:!0,immediate:!1,callback(f){f&&f===H&&J()}});async function Z(){L.value=!0;try{await x.value.validate(["mobile"]),setTimeout(()=>{K(),X(),L.value=!1,r.success("验证码是：123456")},3e3)}catch{L.value=!1}}async function y(){var f;U.value=!0;try{await((f=x.value)==null?void 0:f.validate());let a;s.type==="account"?a={username:s.username,password:s.password}:a={mobile:s.mobile,code:s.code,type:"mobile"};const{data:k}=await _e(a);q.value=(k==null?void 0:k.token)??null,d.success({message:"登录成功",description:"欢迎回来！",duration:3});const C=Ke("redirect","/");u.push({path:C,replace:!0})}catch(a){a instanceof ge&&(E.value=!0),U.value=!1}}return xe(async()=>{await He(300),B.init(e(F))}),ye(()=>{B.removeListeners()}),(f,a)=>{const k=Ge,C=ze,R=Ae,ee=$e,N=qe,T=Ee,M=Ue,te=Pe,S=Ie,oe=Re,ne=Ne,se=ie;return g(),b("div",ot,[n("div",nt,[n("canvas",{ref_key:"bubbleCanvas",ref:F},null,512)]),n("div",st,[n("div",at,[n("div",rt,[n("div",it,[a[6]||(a[6]=n("span",{class:"ant-pro-form-login-logo"},[n("img",{"w-full":"","h-full":"","object-cover":"",src:Qe})],-1)),a[7]||(a[7]=n("span",{class:"ant-pro-form-login-title"}," Antdv Pro ",-1)),n("span",lt,_(e(i)("pages.layouts.userLayout.title")),1)]),n("div",ct,[o(k)])]),o(C,{"m-0":""}),n("div",dt,[a[8]||(a[8]=n("div",{class:"ant-pro-form-login-main-left min-h-[520px] flex-center bg-[var(--bg-color-container)]"},[n("img",{src:Je,class:"h-5/6 w-5/6"})],-1)),o(C,{"m-0":"",type:"vertical",class:"ant-pro-login-divider min-h-[520px]"}),n("div",ut,[n("div",pt,_(e(i)("pages.login.tips")),1),o(ne,{ref_key:"formRef",ref:x,model:e(s)},{default:l(()=>[o(ee,{"active-key":e(s).type,"onUpdate:activeKey":a[0]||(a[0]=p=>e(s).type=p),centered:""},{default:l(()=>[o(R,{key:"account",tab:e(i)("pages.login.accountLogin.tab")},null,8,["tab"]),o(R,{key:"mobile",tab:e(i)("pages.login.phoneLogin.tab")},null,8,["tab"])]),_:1},8,["active-key"]),e(E)&&e(s).type==="account"?(g(),P(N,{key:0,"mb-24px":"",message:e(i)("pages.login.accountLogin.errorMessage"),type:"error","show-icon":""},null,8,["message"])):$("",!0),e(E)&&e(s).type==="mobile"?(g(),P(N,{key:1,"mb-24px":"",message:e(i)("pages.login.phoneLogin.errorMessage"),type:"error","show-icon":""},null,8,["message"])):$("",!0),e(s).type==="account"?(g(),b(A,{key:2},[o(M,{name:"username",rules:[{required:!0,message:e(i)("pages.login.username.required")}]},{default:l(()=>[o(T,{value:e(s).username,"onUpdate:value":a[1]||(a[1]=p=>e(s).username=p),"allow-clear":"",autocomplete:"off",placeholder:e(i)("pages.login.username.placeholder"),size:"large",onPressEnter:y},{prefix:l(()=>[o(e(Te))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),o(M,{name:"password",rules:[{required:!0,message:e(i)("pages.login.password.required")}]},{default:l(()=>[o(te,{value:e(s).password,"onUpdate:value":a[2]||(a[2]=p=>e(s).password=p),"allow-clear":"",placeholder:e(i)("pages.login.password.placeholder"),size:"large",onPressEnter:y},{prefix:l(()=>[o(e(V))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"])],64)):$("",!0),e(s).type==="mobile"?(g(),b(A,{key:3},[o(M,{name:"mobile",rules:[{required:!0,message:e(i)("pages.login.phoneNumber.required")},{pattern:/^(86)?1([38][0-9]|4[579]|5[0-35-9]|6[6]|7[0135678]|9[89])[0-9]{8}$/,message:e(i)("pages.login.phoneNumber.invalid")}]},{default:l(()=>[o(T,{value:e(s).mobile,"onUpdate:value":a[3]||(a[3]=p=>e(s).mobile=p),"allow-clear":"",placeholder:e(i)("pages.login.phoneNumber.placeholder"),size:"large",onPressEnter:y},{prefix:l(()=>[o(e(Fe))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),o(M,{name:"code",rules:[{required:!0,message:e(i)("pages.login.captcha.required")}]},{default:l(()=>[n("div",mt,[o(T,{value:e(s).code,"onUpdate:value":a[4]||(a[4]=p=>e(s).code=p),style:{flex:"1 1 0%",transition:"width 0.3s ease 0s","margin-right":"8px"},"allow-clear":"",placeholder:e(i)("pages.login.captcha.placeholder"),size:"large",onPressEnter:y},{prefix:l(()=>[o(e(V))]),_:1},8,["value","placeholder"]),o(S,{loading:e(L),disabled:e(I),size:"large",onClick:Z},{default:l(()=>[e(I)?(g(),b(A,{key:1},[w(_(H-e(Q))+" "+_(e(i)("pages.getCaptchaSecondText")),1)],64)):(g(),b(A,{key:0},[w(_(e(i)("pages.login.phoneLogin.getVerificationCode")),1)],64))]),_:1},8,["loading","disabled"])])]),_:1},8,["rules"])],64)):$("",!0),n("div",_t,[o(oe,{checked:e(s).remember,"onUpdate:checked":a[5]||(a[5]=p=>e(s).remember=p)},{default:l(()=>[w(_(e(i)("pages.login.rememberMe")),1)]),_:1},8,["checked"]),n("a",null,_(e(i)("pages.login.forgotPassword")),1)]),o(S,{type:"primary",block:"",loading:e(U),size:"large",onClick:y},{default:l(()=>[w(_(e(i)("pages.login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["model"]),o(C,null,{default:l(()=>[n("span",gt,_(e(i)("pages.login.loginWith")),1)]),_:1}),n("div",ht,[o(e(Se),{class:"icon"}),o(e(Ve),{class:"icon"}),o(e(Be),{class:"icon"})])])])])]),n("div",{"py-24px":"","px-50px":"",fixed:"","bottom-0":"","z-11":"","w-screen":"","data-theme":e(m).theme,"text-14px":""},[o(le,{copyright:e(m).copyright,icp:"鲁ICP备2023021414号-2"},{renderFooterLinks:l(()=>[o(se)]),_:1},8,["copyright"])],8,ft)])}}}),Ct=W(vt,[["__scopeId","data-v-b385fdf8"]]);export{Ct as default};
