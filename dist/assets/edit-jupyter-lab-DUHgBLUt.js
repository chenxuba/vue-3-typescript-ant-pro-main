import{d as _t,a9 as bt,am as wt,f,c as kt,w as ht,y as Re,o as Tt,_ as y,a1 as m,$ as n,k as a,a7 as l,ad as k,F as R,ah as ue,G as d,a6 as de,u as F,H as Ct,aa as q,ac as Ut}from"./vue-C8C4cLDH.js";import{R as xe,u as pe}from"./RichTextEditor-DLxZnIKk.js";import{e as Rt,f as xt,a as Lt,d as ve}from"./index-j719aqKG.js";import{g as St,a as Ft}from"./dictionary-CZnWnUC9.js";import{H as x,j as qt,t as At,x as ce,c as Mt,a as Pt,m as jt,u as It,F as Vt,b as Nt,R as Dt,N as Jt,d as Et}from"./useFileTree-Dt2IO33Z.js";import{a7 as r,a9 as Bt,a8 as Ht,a0 as Ot,U as $t,V as zt,aa as Kt,ab as Gt,w as Wt,ac as Qt,ad as Xt,ah as Yt,ae as Zt,H as ea,$ as ta,y as aa,D as la,af as sa,c as oa,f as na,T as ra,K as ia,ag as ua,x as da,al as pa}from"./antd-BIZT1SGM.js";import{_ as va}from"./index-Bov35lb3.js";const ca={class:"edit-jupyter-lab-page"},fa={class:"page-container"},ma={class:"steps-section"},ya={key:0},ga={class:"form-section"},_a={class:"flex items-top gap-16px"},ba={class:"flex flex-col gap-12px"},wa={key:0,class:"image-preview"},ka=["src"],ha={class:"flex items-top gap-16px"},Ta={class:"flex flex-col gap-12px"},Ca={key:0,class:"image-preview"},Ua=["src"],Ra={class:"form-section"},xa={key:1},La={class:"form-section repository-section"},Sa={class:"repository-top-bar flex items-center gap-16px justify-between"},Fa={class:"repository-url-group"},qa={class:"repository-main-area"},Aa={class:"repository-left"},Ma={class:"repository-switch-box flex items-center justify-between"},Pa={class:"flex items-center gap-12px"},ja={key:1,class:"repository-tips"},Ia={class:"repository-right"},Va={key:1,class:"empty-area"},Na={key:2,class:"step-content evaluation-step"},Da={class:"evaluation-section"},Ja={class:"section-block"},Ea={class:"block-content"},Ba={style:{display:"flex","align-items":"center",gap:"8px"}},Ha={key:0,class:"section-block"},Oa={class:"block-header"},$a={class:"header-actions"},za={class:"block-content"},Ka={class:"test-set-label"},Ga={class:"tab-footer-buttons"},Wa={class:"reference-section"},Qa={class:"section-block"},Xa={class:"block-content"},Ya={class:"tab-footer-buttons"},Za={key:3,class:"step-content environment-step"},el={class:"environment-section"},tl={class:"environment-container"},al={class:"environment-left"},ll={class:"search-box"},sl={class:"environment-list"},ol=["onClick"],nl={class:"environment-right"},rl={class:"environment-config-header"},il={style:{display:"flex","align-items":"center",gap:"8px"}},ul={class:"page-footer"},Z="http://101.200.13.193",dl=_t({name:"EditJupyterLab",__name:"edit-jupyter-lab",setup(pl){x.registerLanguage("javascript",qt),x.registerLanguage("typescript",At),x.registerLanguage("xml",ce),x.registerLanguage("html",ce),x.registerLanguage("vue",ce),x.registerLanguage("css",Mt),x.registerLanguage("json",Pt),x.registerLanguage("markdown",jt);const j=bt(),Le=wt(),h=f(null),L=f(null),_=f(0),A=f(!1),E=f(),fe=f(),o=f({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1,enableCodeRepository:!1,repositoryType:"ä»£ç ä»“åº“",gitUrl:""}),B=f(""),H=f(""),O=f(!1),$=f(!1),me={name:[{required:!0,message:"è¯·è¾“å…¥åç§°",trigger:"blur"}],tag:[{required:!0,message:"è¯·è¾“å…¥æŠ€èƒ½æ ‡ç­¾",trigger:"blur"}],fieldType:[{required:!0,message:"è¯·é€‰æ‹©é¢†åŸŸç±»åˆ«",trigger:"change"}],difficulty:[{required:!0,message:"è¯·é€‰æ‹©éš¾åº¦",trigger:"change"}],environment:[{required:!0,message:"è¯·é€‰æ‹©å®éªŒç¯å¢ƒ",trigger:"change"}],secondType:[{required:!0,message:"è¯·é€‰æ‹©å°ç±»åˆ«",trigger:"change"}],classHour:[{required:!0,message:"è¯·è¾“å…¥å­¦æ—¶",trigger:"blur"}],topCover:[{required:!0,message:"è¯·ä¸Šä¼ é¡¶éƒ¨èƒŒæ™¯å›¾",trigger:"change"}],cover:[{required:!0,message:"è¯·ä¸Šä¼ å°é¢å›¾",trigger:"change"}],authType:[{required:!0,message:"è¯·é€‰æ‹©åŸ¹è®­å…¬å¼€èŒƒå›´",trigger:"change"}]},Se=[{label:"äººå·¥æ™ºèƒ½",value:1},{label:"å¤§æ•°æ®",value:2},{label:"äº‘è®¡ç®—",value:3},{label:"Webå¼€å‘",value:4}],ye=f([]),ee=f(!1),Fe=async()=>{try{ee.value=!0;const t=St(3),e=await Ft({code:t});e&&e.list&&(ye.value=e.list.map(i=>({label:i.name,value:i.value})))}catch(t){console.error("åŠ è½½å®éªŒç¯å¢ƒé€‰é¡¹å¤±è´¥ï¼š",t),r.error("åŠ è½½å®éªŒç¯å¢ƒé€‰é¡¹å¤±è´¥")}finally{ee.value=!1}},qe=[{label:"Bwapp",value:1},{label:"CSS",value:2},{label:"DataTurks",value:3}],Ae=[{label:"åˆ‡æ¢ä»“åº“",value:"åˆ‡æ¢ä»“åº“"},{label:"ä»£ç ä»“åº“",value:"ä»£ç ä»“åº“"},{label:"ç§å¯†ä»£ç ä»“åº“",value:"ç§å¯†ä»£ç ä»“åº“"}],M=f(!1),Me=[{title:"åŸºæœ¬ä¿¡æ¯"},{title:"ä»£ç ä»“åº“"},{title:"è¯„æµ‹è®¾ç½®"},{title:"å®éªŒç¯å¢ƒ"}],{fileTreeData:Pe,expandedKeys:te,selectedFile:je,highlightedCode:Ie,handleSelectFile:Ve,getNodePath:Ne,addFileToTree:De,addFolderToTree:Je,handleRenameNode:Ee,handleCopyPath:Be,handleDeleteNode:He}=It(),I=f(!1),z=f(!1),K=f(!1),ae=f("/"),le=f("/"),ge=f("settings"),v=f({openTestValidate:1,testValidateFiles:"",timeLimitM:"",scoreRule:1,evaluationSetting:"é€šè¿‡æ‰€æœ‰ä»£ç å—è¯„æµ‹",testSets:[]}),w=f({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),V=f(!1),N=f(!1);let se=1;const Oe=()=>{v.value.testSets.push({id:se++,arg:"",answer:"",select:1})},$e=t=>{if(v.value.testSets.length===1){r.warning("è‡³å°‘ä¿ç•™ä¸€ä¸ªæµ‹è¯•é›†");return}v.value.testSets=v.value.testSets.filter(e=>e.id!==t),r.success("åˆ é™¤æˆåŠŸ")},ze=(t,e)=>{t.select=e?1:2},G=f([]),Ke=t=>{const{onSuccess:e}=t;setTimeout(()=>{e("ok")},0)},Ge=async t=>{const{fileList:e}=t,i=e.filter(u=>u.status==="uploading"||u.status==="done"||!u.status);G.value=i;const p=i.filter(u=>u.originFileObj&&!u.url).map(async u=>{try{const c=await pe(u.originFileObj);return u.url=c,c}catch(c){return console.error("æ–‡ä»¶ä¸Šä¼ å¤±è´¥:",c),r.error(`æ–‡ä»¶ ${u.name} ä¸Šä¼ å¤±è´¥`),null}});if(p.length>0){const c=(await Promise.all(p)).filter(U=>U!==null);if(c.length>0){const U=i.filter(T=>T.url).map(T=>T.url).join(",");v.value.testValidateFiles=U,r.success(`æˆåŠŸä¸Šä¼  ${c.length} ä¸ªæ–‡ä»¶`)}}},W=[{id:"1",name:"Python3/JupyterLab",value:"1"},{id:"2",name:"R4.2/Jupyterlab",value:"2"},{id:"3",name:"Python3-tensorflow2.6/JupyterLab",value:"3"},{id:"4",name:"Python3.7/Jupyterlab",value:"4"},{id:"5",name:"Python3.7-TensorFlow1.13/JupyterLab",value:"5"},{id:"6",name:"Python3.8/JupyterLab",value:"6"},{id:"7",name:"Python3.10/Jupyterlab",value:"7"},{id:"8",name:"Python3.11/JupyterLab",value:"8"},{id:"9",name:"Python3.10-ultralytics/JupyterLab",value:"9"}],Q=f("1"),X=f(""),We=kt(()=>X.value?W.filter(t=>t.name.toLowerCase().includes(X.value.toLowerCase())):W),b=f({dockerImage:"1",secondType:"Css",timeLimitM:""}),Qe=t=>{Q.value=t;const e=W.find(i=>i.value===t);e&&(b.value.dockerImage=e.id)},Xe=async()=>{if(!h.value){r.error("ç¼ºå°‘é¡¹ç›®ID"),j.back();return}try{A.value=!0;const t=await Rt({id:h.value});o.value={name:t.name||"",tag:t.tag||"",fieldType:t.fieldType,difficulty:t.difficulty||1,environment:t.environment,secondType:t.secondType,classHour:t.classHour||"",topCover:t.topCover||"",cover:t.cover||"",description:t.description||"",showTaskRequire:t.showTaskRequire===1,authType:t.authType||1,enableCodeRepository:t.gitUrl?!0:t.enableCodeRepository||!1,repositoryType:t.repositoryType||"ä»£ç ä»“åº“",gitUrl:t.gitUrl||""},t.topCover&&(B.value=Z+t.topCover),t.cover&&(H.value=Z+t.cover),t.gitUrl&&(M.value=!0),await Ye()}catch(t){console.error("è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥ï¼š",t),r.error(t.message||"è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥"),j.back()}finally{A.value=!1}},Ye=async()=>{if(h.value)try{const t=await xt({projectId:h.value});let e=[];if(Array.isArray(t)?e=t:t&&typeof t=="object"&&(e=t.list||t.data||t.tasks||[]),e&&e.length>0){const i=e[0];if(i){if(L.value=i.taskId,v.value={openTestValidate:i.openTestValidate||1,testValidateFiles:i.testValidateFiles||"",timeLimitM:i.timeLimitM||"",scoreRule:i.scoreRule||1,evaluationSetting:"é€šè¿‡æ‰€æœ‰ä»£ç å—è¯„æµ‹",testSets:[]},i.testContent)try{const p=JSON.parse(i.testContent);v.value.testSets=p.map((u,c)=>({id:c+1,arg:u.arg||"",answer:u.answer||"",select:u.select||1})),se=v.value.testSets.length+1}catch(p){console.error("è§£ææµ‹è¯•é›†å¤±è´¥:",p)}if(v.value.testSets.length===0&&(v.value.testSets=[{id:1,arg:"",answer:"",select:1},{id:2,arg:"",answer:"",select:1}],se=3),i.testValidateFiles&&(G.value=i.testValidateFiles.split(",").map((p,u)=>({uid:`${u}`,name:p.split("/").pop()||`æ–‡ä»¶${u+1}`,status:"done",url:p,response:p}))),w.value={showAnswer:i.showAnswer||1,prohibitCopyAnswer:i.prohibitCopyAnswer||1,referenceAnswer:i.referenceAnswer||""},i.dockerImage){const p=W.find(u=>u.id===String(i.dockerImage));p&&(Q.value=p.value),b.value.dockerImage=String(i.dockerImage)}i.secondType&&(b.value.secondType=i.secondType),i.timeLimitM&&(b.value.timeLimitM=i.timeLimitM),V.value=!0,N.value=!0}}}catch(t){console.error("è·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥ï¼š",t)}},Ze=async t=>{var p;if(!(t.size/1024/1024<12))return r.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 12MB!"),!1;if(!(t.type==="image/jpeg"||t.type==="image/png"))return r.error("åªèƒ½ä¸Šä¼  JPG/PNG æ ¼å¼çš„å›¾ç‰‡!"),!1;try{O.value=!0;const u=await pe(t);B.value=Z+u,o.value.topCover=u,(p=E.value)==null||p.validateFields(["topCover"]),r.success("é¡¶éƒ¨èƒŒæ™¯å›¾ä¸Šä¼ æˆåŠŸ")}catch{r.error("é¡¶éƒ¨èƒŒæ™¯å›¾ä¸Šä¼ å¤±è´¥")}finally{O.value=!1}return!1},et=async t=>{var p;if(!(t.size/1024/1024<12))return r.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 12MB!"),!1;if(!(t.type==="image/jpeg"||t.type==="image/png"))return r.error("åªèƒ½ä¸Šä¼  JPG/PNG æ ¼å¼çš„å›¾ç‰‡!"),!1;try{$.value=!0;const u=await pe(t);H.value=Z+u,o.value.cover=u,(p=E.value)==null||p.validateFields(["cover"]),r.success("å°é¢å›¾ä¸Šä¼ æˆåŠŸ")}catch{r.error("å°é¢å›¾ä¸Šä¼ å¤±è´¥")}finally{$.value=!1}return!1},tt=t=>{(typeof t=="boolean"?t:!!t)?I.value=!0:o.value.enableCodeRepository=!1},_e=async()=>{try{r.loading("æ­£åœ¨æŸ¥è¯¢ä»“åº“æ–‡ä»¶...",1),await new Promise(t=>setTimeout(t,1e3)),r.success("ä»“åº“æ–‡ä»¶æŸ¥è¯¢æˆåŠŸ")}catch{r.error("ä»“åº“æ–‡ä»¶æŸ¥è¯¢å¤±è´¥")}},at=async()=>{if(!o.value.gitUrl||!o.value.gitUrl.trim()){r.error("è¯·å…ˆé…ç½®ä»“åº“åœ°å€"),be();return}o.value.enableCodeRepository=!0,I.value=!1,M.value=!0,await _e()},be=()=>{o.value.enableCodeRepository=!1,I.value=!1};ht(()=>o.value.repositoryType,t=>{t==="åˆ‡æ¢ä»“åº“"&&o.value.enableCodeRepository&&(M.value=!1,r.info("å·²è§£é”ä»“åº“åœ°å€ï¼Œè¯·é‡æ–°è¾“å…¥"),Re(()=>{o.value.repositoryType="ä»£ç ä»“åº“"}))});const lt=()=>{var t;o.value.enableCodeRepository&&!M.value&&((t=o.value.gitUrl)!=null&&t.trim())&&(M.value=!0,_e())},st=t=>{switch(String(t.key)){case"newFile":we();break;case"newFolder":ke();break;case"upload":r.info("ä¸Šä¼ åŠŸèƒ½å¼€å‘ä¸­...");break}},ot=(t,e)=>{const i=String(t.key),p=Ne(e.key);switch(i){case"newFile":we(p);break;case"newFolder":ke(p);break;case"upload":r.info("ä¸Šä¼ åŠŸèƒ½å¼€å‘ä¸­...");break;case"rename":Ee(e);break;case"copyPath":Be(e);break;case"delete":He(e);break}},we=(t="/")=>{z.value=!0,ae.value=t},nt=t=>{De(t.fileName,t.fileContent,ae.value),r.success("æ–‡ä»¶åˆ›å»ºæˆåŠŸ"),z.value=!1},ke=(t="/")=>{K.value=!0,le.value=t},rt=t=>{Je(t.folderName,le.value),r.success("æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ"),K.value=!1},D=()=>{Re(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const t=document.querySelector(".page-content");t&&(t.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(p=>{p.scrollTop>0&&(p.scrollTop=0)})})},it=()=>{_.value>0?(_.value--,D()):j.back()},ut=async()=>{var t,e;if(_.value===0)try{await Promise.all([(t=E.value)==null?void 0:t.validate(),(e=fe.value)==null?void 0:e.validate()]),_.value=1,D()}catch{r.error("è¯·å®Œå–„å¿…å¡«ä¿¡æ¯"),D()}else if(_.value===1){if(o.value.enableCodeRepository&&(!o.value.gitUrl||o.value.gitUrl.trim()==="")){r.error("è¯·è¾“å…¥ä»“åº“åœ°å€");return}await he(!1),_.value=2,D()}else if(_.value===2){if(!V.value){r.error("è¯·å…ˆä¿å­˜è¯„æµ‹è®¾ç½®åå†è¿›è¡Œä¸‹ä¸€æ­¥");return}if(!N.value){r.error("è¯·å…ˆä¿å­˜å‚è€ƒç­”æ¡ˆåå†è¿›è¡Œä¸‹ä¸€æ­¥");return}_.value=3,D()}else _.value===3&&await vt()},he=async(t=!1)=>{try{A.value=!0;const e={id:h.value,projectType:3,environment:o.value.environment,name:o.value.name,tag:o.value.tag,fieldType:o.value.fieldType,difficulty:o.value.difficulty,classHour:o.value.classHour,topCover:o.value.topCover,cover:o.value.cover,description:o.value.description,showTaskRequire:o.value.showTaskRequire?1:2,authType:o.value.authType,enableCodeRepository:o.value.enableCodeRepository,secondType:o.value.secondType};o.value.enableCodeRepository&&(e.repositoryType=o.value.repositoryType,e.gitUrl=o.value.gitUrl),await Lt(e),t?(r.success("é¡¹ç›®æ›´æ–°æˆåŠŸï¼"),setTimeout(()=>{j.push("/dashboard/analysis")},500)):r.success("ä¿å­˜æˆåŠŸï¼")}catch(e){throw console.error("æ›´æ–°å¤±è´¥ï¼š",e),r.error(e.message||"é¡¹ç›®æ›´æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"),e}finally{A.value=!1}},dt=async()=>{try{if(!L.value){r.error("ä»»åŠ¡IDä¸å­˜åœ¨");return}if(v.value.openTestValidate===1){if(!v.value.testValidateFiles||v.value.testValidateFiles.trim()===""){r.error("è¯·ä¸Šä¼ è¯„æµ‹æ–‡ä»¶");return}if(!v.value.timeLimitM){r.error("è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿é™åˆ¶");return}if(!v.value.testSets||v.value.testSets.length===0){r.error("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†");return}const i=v.value.testSets.filter(p=>p.select===1);if(i.length===0){r.error("è¯·è‡³å°‘é€‰ä¸­ä¸€ä¸ªæµ‹è¯•é›†");return}for(let p=0;p<i.length;p++){const u=i[p];if(!u.arg||u.arg.trim()===""){r.error(`æµ‹è¯•é›†${p+1}çš„è¾“å…¥å†…å®¹ä¸èƒ½ä¸ºç©º`);return}if(!u.answer||u.answer.trim()===""){r.error(`æµ‹è¯•é›†${p+1}çš„æœŸæœ›è¾“å‡ºä¸èƒ½ä¸ºç©º`);return}}}const t=v.value.testSets.map(i=>({arg:i.arg,answer:i.answer,select:i.select})),e={taskId:L.value,projectId:h.value,openTestValidate:v.value.openTestValidate,testValidateFiles:v.value.testValidateFiles,timeLimitM:v.value.timeLimitM,scoreRule:v.value.scoreRule,testContent:JSON.stringify(t)};await ve(e),V.value=!0,r.success("è¯„æµ‹è®¾ç½®ä¿å­˜æˆåŠŸï¼")}catch(t){console.error("è¯„æµ‹è®¾ç½®ä¿å­˜å¤±è´¥ï¼š",t),r.error("è¯„æµ‹è®¾ç½®ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},pt=async()=>{try{if(!L.value){r.error("ä»»åŠ¡IDä¸å­˜åœ¨");return}if(!w.value.referenceAnswer||w.value.referenceAnswer.trim()===""){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹");return}if(!w.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){r.error("è¯·è¾“å…¥å‚è€ƒç­”æ¡ˆå†…å®¹");return}const e={taskId:L.value,projectId:h.value,showAnswer:w.value.showAnswer,prohibitCopyAnswer:w.value.prohibitCopyAnswer,referenceAnswer:w.value.referenceAnswer};await ve(e),N.value=!0,r.success("å‚è€ƒç­”æ¡ˆä¿å­˜æˆåŠŸï¼")}catch(t){console.error("å‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼š",t),r.error("å‚è€ƒç­”æ¡ˆä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},vt=async()=>{try{if(!h.value||!L.value){r.error("é¡¹ç›®IDæˆ–ä»»åŠ¡IDä¸å­˜åœ¨");return}if(!V.value){r.error("è¯·å…ˆä¿å­˜è¯„æµ‹è®¾ç½®åå†å®Œæˆæ›´æ–°");return}if(!N.value){r.error("è¯·å…ˆä¿å­˜å‚è€ƒç­”æ¡ˆåå†å®Œæˆæ›´æ–°");return}if(!b.value.dockerImage){r.error("è¯·é€‰æ‹©å®éªŒç¯å¢ƒ");return}if(!b.value.timeLimitM){r.error("è¯·è¾“å…¥å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿");return}await ve({taskId:L.value,projectId:h.value,dockerImage:b.value.dockerImage,secondType:b.value.secondType,timeLimitM:b.value.timeLimitM}),await he(!0)}catch(t){console.error("å®Œæˆæ›´æ–°å¤±è´¥ï¼š",t),r.error("å®Œæˆæ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•")}};return Tt(async()=>{await Fe();const t=Le.query.id;t?(h.value=Number(t),Xe()):(r.error("ç¼ºå°‘é¡¹ç›®ID"),j.back())}),(t,e)=>{const i=Ht,p=Bt,u=zt,c=$t,U=Gt,T=Wt,Te=Kt,g=Xt,S=Qt,oe=Yt,C=ea,ne=Zt,Ce=ta,J=Ot,ct=aa,re=na,ft=oa,mt=la,Ue=ia,yt=ra,ie=da,gt=pa;return m(),y("div",ca,[e[70]||(e[70]=n("div",{class:"page-header"},[n("h2",null,"ç¼–è¾‘JupyterLabç¯å¢ƒå®è®­é¡¹ç›®")],-1)),a(gt,{spinning:A.value},{default:l(()=>[n("div",fa,[n("div",ma,[a(p,{current:_.value,class:"custom-steps"},{default:l(()=>[(m(),y(R,null,ue(Me,(s,Y)=>a(i,{key:Y,title:s.title},null,8,["title"])),64))]),_:1},8,["current"])]),_.value===0?(m(),y("div",ya,[e[38]||(e[38]=n("div",{class:"section-title"},[n("h3",null,"åŸºæœ¬ä¿¡æ¯")],-1)),n("div",ga,[a(J,{ref_key:"formRef",ref:E,model:o.value,rules:me,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[a(c,{label:"åç§°",name:"name",required:""},{default:l(()=>[a(u,{value:o.value.name,"onUpdate:value":e[0]||(e[0]=s=>o.value.name=s),placeholder:"è¯·è¾“å…¥åç§°"},null,8,["value"])]),_:1}),a(Te,null,{default:l(()=>[a(U,{span:12},{default:l(()=>[a(c,{label:"æŠ€èƒ½æ ‡ç­¾",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(u,{value:o.value.tag,"onUpdate:value":e[1]||(e[1]=s=>o.value.tag=s),placeholder:"è¯·è¾“å…¥æŠ€èƒ½æ ‡ç­¾"},null,8,["value"])]),_:1})]),_:1}),a(U,{span:12},{default:l(()=>[a(c,{label:"é¢†åŸŸç±»åˆ«",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[a(T,{value:o.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>o.value.fieldType=s),placeholder:"è¯·é€‰æ‹©é¢†åŸŸç±»åˆ«",options:Se},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(c,{label:"éš¾åº¦",name:"difficulty",required:""},{default:l(()=>[a(S,{value:o.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>o.value.difficulty=s),class:"custom-radio"},{default:l(()=>[a(g,{value:1},{default:l(()=>e[28]||(e[28]=[d("ç®€å•")])),_:1,__:[28]}),a(g,{value:2},{default:l(()=>e[29]||(e[29]=[d("é€‚ä¸­")])),_:1,__:[29]}),a(g,{value:3},{default:l(()=>e[30]||(e[30]=[d("å›°éš¾")])),_:1,__:[30]})]),_:1},8,["value"])]),_:1}),a(Te,null,{default:l(()=>[a(U,{span:12},{default:l(()=>[a(c,{label:"å®éªŒç¯å¢ƒ",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(T,{value:o.value.environment,"onUpdate:value":e[4]||(e[4]=s=>o.value.environment=s),placeholder:"è¯·é€‰æ‹©å®éªŒç¯å¢ƒ",options:ye.value,loading:ee.value},null,8,["value","options","loading"])]),_:1})]),_:1}),a(U,{span:12},{default:l(()=>[a(c,{label:"å°ç±»åˆ«",name:"secondType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[a(T,{value:o.value.secondType,"onUpdate:value":e[5]||(e[5]=s=>o.value.secondType=s),placeholder:"è¯·é€‰æ‹©å°ç±»åˆ«",options:qe},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(c,{label:"å­¦æ—¶",name:"classHour",required:""},{default:l(()=>[a(oe,{min:0,class:"w-full",value:o.value.classHour,"onUpdate:value":e[6]||(e[6]=s=>o.value.classHour=s),placeholder:"è¯·è¾“å…¥å­¦æ—¶"},null,8,["value"])]),_:1}),a(c,{label:"é¡¶éƒ¨èƒŒæ™¯å›¾",name:"topCover",required:""},{default:l(()=>[n("div",_a,[n("div",ba,[a(ne,{"before-upload":Ze,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[a(C,{loading:O.value},{default:l(()=>[O.value?(m(),y(R,{key:1},[d("ä¸Šä¼ ä¸­...")],64)):(m(),y(R,{key:0},[d("é€‰æ‹©æ–‡ä»¶")],64))]),_:1},8,["loading"])]),_:1}),B.value?(m(),y("div",wa,[n("img",{src:B.value,alt:"é¡¶éƒ¨èƒŒæ™¯å›¾é¢„è§ˆ",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,ka)])):k("",!0)]),e[31]||(e[31]=n("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ png/jpegç­‰æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡12M,å»ºè®®ä½¿ç”¨290*218åƒç´ ã€‚ ",-1))])]),_:1}),a(c,{label:"å°é¢å›¾",name:"cover",required:""},{default:l(()=>[n("div",ha,[n("div",Ta,[a(ne,{"before-upload":et,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[a(C,{loading:$.value},{default:l(()=>[$.value?(m(),y(R,{key:1},[d("ä¸Šä¼ ä¸­...")],64)):(m(),y(R,{key:0},[d("é€‰æ‹©æ–‡ä»¶")],64))]),_:1},8,["loading"])]),_:1}),H.value?(m(),y("div",Ca,[n("img",{src:H.value,alt:"å°é¢å›¾é¢„è§ˆ",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,Ua)])):k("",!0)]),e[32]||(e[32]=n("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ png/jpegç­‰æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡12M,å»ºè®®ä½¿ç”¨290*218åƒç´ ã€‚ ",-1))])]),_:1}),a(c,{label:"ç®€ä»‹",name:"description"},{default:l(()=>[a(xe,{modelValue:o.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.description=s)},null,8,["modelValue"])]),_:1}),a(c,{label:"ä»»åŠ¡è¦æ±‚",name:"showTaskRequire"},{default:l(()=>[a(Ce,{checked:o.value.showTaskRequire,"onUpdate:checked":e[8]||(e[8]=s=>o.value.showTaskRequire=s)},{default:l(()=>e[33]||(e[33]=[d(" æ˜¾ç¤ºä»»åŠ¡è¦æ±‚ï¼ˆå‹¾é€‰åï¼Œå°†å¸®ä½œä¸ºä»»åŠ¡è¦æ±‚æ˜¾ç¤ºåœ¨ä»»åŠ¡é¡¹ç›®æ”¿ç­–é¢ï¼‰ ")])),_:1,__:[33]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[39]||(e[39]=n("div",{class:"section-title"},[n("h3",null,"åŸ¹è®­å…¬å¼€èŒƒå›´")],-1)),n("div",Ra,[a(J,{ref_key:"trainingScopeFormRef",ref:fe,model:o.value,rules:me,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[a(c,{label:"åŸ¹è®­å…¬å¼€èŒƒå›´",name:"authType",required:""},{default:l(()=>[a(S,{value:o.value.authType,"onUpdate:value":e[9]||(e[9]=s=>o.value.authType=s),class:"custom-radio"},{default:l(()=>[a(g,{value:1},{default:l(()=>e[34]||(e[34]=[d("å®Œå…¨å…¬å¼€")])),_:1,__:[34]}),a(g,{value:2},{default:l(()=>e[35]||(e[35]=[d("å…¨é™¢å…¬å¼€")])),_:1,__:[35]}),a(g,{value:3},{default:l(()=>e[36]||(e[36]=[d("æœ¬å•ä½å…¬å¼€")])),_:1,__:[36]}),a(g,{value:4},{default:l(()=>e[37]||(e[37]=[d("ä¸å…¬å¼€")])),_:1,__:[37]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):k("",!0),_.value===1?(m(),y("div",xa,[n("div",La,[n("div",Sa,[a(T,{value:o.value.repositoryType,"onUpdate:value":e[10]||(e[10]=s=>o.value.repositoryType=s),options:Ae,class:"repository-type-select"},null,8,["value"]),n("div",Fa,[e[40]||(e[40]=n("span",{class:"url-label"},"ä»“åº“åœ°å€ï¼š",-1)),a(u,{value:o.value.gitUrl,"onUpdate:value":e[11]||(e[11]=s=>o.value.gitUrl=s),placeholder:"è¯·è¾“å…¥ä»“åº“åœ°å€",class:"url-input",disabled:M.value,onBlur:lt},null,8,["value","disabled"])])]),n("div",qa,[n("div",Aa,[n("div",Ma,[n("div",Pa,[e[41]||(e[41]=n("span",{class:"switch-label"},"ä»£ç ä»“åº“",-1)),a(ct,{checked:o.value.enableCodeRepository,disabled:o.value.enableCodeRepository,onChange:tt},null,8,["checked","disabled"])]),o.value.enableCodeRepository?(m(),de(mt,{key:0},{overlay:l(()=>[a(ft,{onClick:st},{default:l(()=>[a(re,{key:"newFile"},{default:l(()=>e[42]||(e[42]=[d("æ–°å»ºæ–‡ä»¶")])),_:1,__:[42]}),a(re,{key:"newFolder"},{default:l(()=>e[43]||(e[43]=[d("æ–°å»ºæ–‡ä»¶å¤¹")])),_:1,__:[43]}),a(re,{key:"upload"},{default:l(()=>e[44]||(e[44]=[d("ä¸Šä¼ ")])),_:1,__:[44]})]),_:1})]),default:l(()=>[a(C,{type:"primary",size:"small"},{default:l(()=>[a(F(sa)),e[45]||(e[45]=d(" æ–°å»º "))]),_:1,__:[45]})]),_:1})):k("",!0)]),o.value.enableCodeRepository?(m(),de(Vt,{key:0,"file-tree-data":F(Pe),"expanded-keys":F(te),"onUpdate:expandedKeys":e[12]||(e[12]=s=>Ct(te)?te.value=s:null),onSelect:F(Ve),onMenuClick:ot},null,8,["file-tree-data","expanded-keys","onSelect"])):k("",!0),o.value.enableCodeRepository?(m(),y("div",ja,e[46]||(e[46]=[n("div",{class:"tips-title"},"æç¤ºï¼š",-1),n("div",{class:"tips-content"}," æ­¤å¤„å­˜æ”¾æœ¬å®è®­æ‰€éœ€çš„æ‰€æœ‰ä»£ç ç­‰ç›¸å…³æ–‡ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ï¼š ",-1),n("div",{class:"tips-list"},[d(" 1ã€"),n("a",{href:"#",class:"tips-link"},"Giteeå®¢æˆ·ç«¯"),d(" ä¸Šä¼ å·²æœ‰æ–‡ä»¶æ¥å¼€å§‹ä½¿ç”¨ã€‚ ")],-1),n("div",{class:"tips-list"}," 2ã€ç›´æ¥åœ¨å¹³å°ä¸Šåˆ›å»ºæ–‡ä»¶ç›®å½•ä»¥åŠç›¸å…³ä»£ç æ–‡ä»¶ã€‚ ",-1)]))):k("",!0)]),n("div",Ia,[o.value.enableCodeRepository?(m(),de(Nt,{key:0,"selected-file":F(je),"highlighted-code":F(Ie)},null,8,["selected-file","highlighted-code"])):(m(),y("div",Va," åœ¨å·¦ä¾§ä»£ç ä»“åº“åŒºåŸŸç‚¹å‡»ç›®å½•æ‰“å¼€æ–‡ä»¶ "))])])])])):k("",!0),_.value===2?(m(),y("div",Na,[a(yt,{activeKey:ge.value,"onUpdate:activeKey":e[21]||(e[21]=s=>ge.value=s),class:"evaluation-tabs"},{default:l(()=>[a(Ue,{key:"settings",tab:"è¯„æµ‹è®¾ç½®"},{default:l(()=>[n("div",Da,[n("div",Ja,[e[56]||(e[56]=n("div",{class:"block-header"},"è¯„æµ‹æ–‡ä»¶",-1)),n("div",Ea,[a(J,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[a(c,{label:"æ˜¯å¦å¯ç”¨è¯„æµ‹åŠŸèƒ½",required:""},{default:l(()=>[a(S,{value:v.value.openTestValidate,"onUpdate:value":e[13]||(e[13]=s=>v.value.openTestValidate=s),class:"custom-radio"},{default:l(()=>[a(g,{value:1},{default:l(()=>e[47]||(e[47]=[d("æ˜¯")])),_:1,__:[47]}),a(g,{value:2},{default:l(()=>e[48]||(e[48]=[d("å¦")])),_:1,__:[48]})]),_:1},8,["value"])]),_:1}),v.value.openTestValidate===1?(m(),y(R,{key:0},[a(c,{label:"è¯„æµ‹æ–‡ä»¶",required:""},{default:l(()=>[a(ne,{"file-list":G.value,"onUpdate:fileList":e[14]||(e[14]=s=>G.value=s),"custom-request":Ke,onChange:Ge,"max-count":10},{default:l(()=>[a(C,{type:"primary"},{default:l(()=>e[49]||(e[49]=[d("ç‚¹å‡»ä¸Šä¼ ")])),_:1,__:[49]})]),_:1},8,["file-list"]),e[50]||(e[50]=n("div",{class:"upload-hint"}," è¯´æ˜ï¼šæ”¯æŒä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡500Mã€‚ ",-1))]),_:1,__:[50]}),a(c,{label:"è¯„æµ‹æ—¶é•¿é™åˆ¶",required:""},{default:l(()=>[n("div",Ba,[a(oe,{value:v.value.timeLimitM,"onUpdate:value":e[15]||(e[15]=s=>v.value.timeLimitM=s),min:1,placeholder:"è¯·è¾“å…¥è¯„æµ‹æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰",style:{width:"580px"}},null,8,["value"]),e[51]||(e[51]=n("span",null,"åˆ†é’Ÿ",-1))])]),_:1}),a(c,{label:"ç³»ç»Ÿè¯„åˆ†è§„åˆ™"},{default:l(()=>[a(S,{value:v.value.scoreRule,"onUpdate:value":e[16]||(e[16]=s=>v.value.scoreRule=s),class:"custom-radio"},{default:l(()=>[a(g,{value:1},{default:l(()=>e[52]||(e[52]=[d(" é€šè¿‡å…¨éƒ¨æµ‹è¯•é›†ï¼ˆä»…å½“æ‰€æœ‰æµ‹è¯•é›†éƒ½æ­£ç¡®æ—¶ï¼Œè·å¾—é¡¹ç›®å­¦æ—¶ï¼‰ ")])),_:1,__:[52]}),a(g,{value:2},{default:l(()=>e[53]||(e[53]=[d(" é€šè¿‡éƒ¨åˆ†æµ‹è¯•é›†ï¼ˆä»»æ„ä¸€ä¸ªæµ‹è¯•é›†æ­£ç¡®æ—¶ï¼Œè·å¾—é¡¹ç›®å­¦æ—¶ï¼‰ ")])),_:1,__:[53]})]),_:1},8,["value"])]),_:1}),a(c,{label:"è¯„æµ‹è®¾ç½®",required:""},{default:l(()=>[a(S,{value:v.value.evaluationSetting,"onUpdate:value":e[17]||(e[17]=s=>v.value.evaluationSetting=s),class:"custom-radio"},{default:l(()=>[a(g,{value:"é€šè¿‡æ‰€æœ‰ä»£ç å—è¯„æµ‹"},{default:l(()=>e[54]||(e[54]=[d(" é€šè¿‡æ‰€æœ‰ä»£ç å—è¯„æµ‹ï¼ˆå¯¹å­¦å‘˜ä»»åŠ¡æ–‡ä»¶çš„æ‰€æœ‰éç©ºä»£ç å—è¿›è¡Œè¯„æµ‹ï¼‰ ")])),_:1,__:[54]}),a(g,{value:"é€šè¿‡æŒ‡å®šä»£ç å—è¯„æµ‹"},{default:l(()=>e[55]||(e[55]=[d(" é€šè¿‡æŒ‡å®šä»£ç å—è¯„æµ‹ï¼ˆå¯¹å­¦å‘˜ä»»åŠ¡æ–‡ä»¶çš„æŒ‡å®šéç©ºä»£ç å—è¿›è¡Œè¯„æµ‹ï¼‰ ")])),_:1,__:[55]})]),_:1},8,["value"])]),_:1})],64)):k("",!0)]),_:1})])]),v.value.openTestValidate===1?(m(),y("div",Ha,[n("div",Oa,[e[58]||(e[58]=n("span",null,"æµ‹è¯•é›†",-1)),n("div",$a,[a(C,{onClick:Oe},{default:l(()=>e[57]||(e[57]=[d("æ–°å¢æµ‹è¯•é›†")])),_:1,__:[57]})])]),n("div",za,[(m(!0),y(R,null,ue(v.value.testSets,(s,Y)=>(m(),y("div",{key:s.id,class:"test-set-item"},[a(Ce,{checked:s.select===1,onChange:P=>ze(s,P.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),n("span",Ka,"æµ‹è¯•é›†"+q(Y+1),1),a(u,{value:s.arg,"onUpdate:value":P=>s.arg=P,placeholder:"è¯·è¾“å…¥è¾“å…¥å†…å®¹",class:"test-set-input"},null,8,["value","onUpdate:value"]),a(u,{value:s.answer,"onUpdate:value":P=>s.answer=P,placeholder:"è¯·è¾“å…¥æœŸæœ›è¾“å‡º",class:"test-set-input"},null,8,["value","onUpdate:value"]),a(F(ua),{class:"delete-test-set-icon",onClick:P=>$e(s.id)},null,8,["onClick"])]))),128))])])):k("",!0),n("div",Ga,[a(C,{type:"primary",onClick:dt},{default:l(()=>[d(q(V.value?"æ›´æ–°":"ä¿å­˜"),1)]),_:1})])])]),_:1}),a(Ue,{key:"reference",tab:"å‚è€ƒç­”æ¡ˆ"},{default:l(()=>[n("div",Wa,[n("div",Qa,[e[63]||(e[63]=n("div",{class:"block-header"},"å‚è€ƒç­”æ¡ˆ",-1)),n("div",Xa,[a(J,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[a(c,{label:"æ˜¯å¦æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆæ¨¡å—",required:""},{default:l(()=>[a(S,{value:w.value.showAnswer,"onUpdate:value":e[18]||(e[18]=s=>w.value.showAnswer=s),class:"custom-radio"},{default:l(()=>[a(g,{value:1},{default:l(()=>e[59]||(e[59]=[d("æ˜¯")])),_:1,__:[59]}),a(g,{value:2},{default:l(()=>e[60]||(e[60]=[d("å¦")])),_:1,__:[60]})]),_:1},8,["value"])]),_:1}),a(c,{label:"æ˜¯å¦ç¦æ­¢å¤åˆ¶å‚è€ƒç­”æ¡ˆ",required:""},{default:l(()=>[a(S,{value:w.value.prohibitCopyAnswer,"onUpdate:value":e[19]||(e[19]=s=>w.value.prohibitCopyAnswer=s),class:"custom-radio"},{default:l(()=>[a(g,{value:1},{default:l(()=>e[61]||(e[61]=[d("æ˜¯")])),_:1,__:[61]}),a(g,{value:2},{default:l(()=>e[62]||(e[62]=[d("å¦")])),_:1,__:[62]})]),_:1},8,["value"])]),_:1}),a(c,{label:"å‚è€ƒç­”æ¡ˆ",required:""},{default:l(()=>[a(xe,{modelValue:w.value.referenceAnswer,"onUpdate:modelValue":e[20]||(e[20]=s=>w.value.referenceAnswer=s)},null,8,["modelValue"])]),_:1})]),_:1})])]),n("div",Ya,[a(C,{type:"primary",onClick:pt},{default:l(()=>[d(q(N.value?"æ›´æ–°":"ä¿å­˜"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):k("",!0),_.value===3?(m(),y("div",Za,[n("div",el,[e[69]||(e[69]=n("h3",{class:"section-main-title"},"å®éªŒç¯å¢ƒ",-1)),n("div",tl,[n("div",al,[n("div",ll,[a(u,{value:X.value,"onUpdate:value":e[22]||(e[22]=s=>X.value=s),placeholder:"æœç´¢éœ€è¦çš„å®éªŒç¯å¢ƒ","allow-clear":""},{suffix:l(()=>e[64]||(e[64]=[n("span",{class:"search-icon"},"ğŸ”",-1)])),_:1},8,["value"])]),n("div",sl,[(m(!0),y(R,null,ue(We.value,s=>(m(),y("div",{key:s.id,class:Ut(["environment-item",{active:Q.value===s.value}]),onClick:Y=>Qe(s.value)},q(s.name),11,ol))),128))])]),n("div",nl,[n("div",rl," å®éªŒç¯å¢ƒ: "+q(Q.value),1),a(J,{model:b.value,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}},{default:l(()=>[a(c,{label:"é™„å¸¦ç¯å¢ƒ"},{default:l(()=>[a(T,{value:b.value.secondType,"onUpdate:value":e[23]||(e[23]=s=>b.value.secondType=s),placeholder:"è¯·é€‰æ‹©é™„å¸¦ç¯å¢ƒ"},{default:l(()=>[a(ie,{value:1},{default:l(()=>e[65]||(e[65]=[d("Bwapp")])),_:1,__:[65]}),a(ie,{value:2},{default:l(()=>e[66]||(e[66]=[d("Css")])),_:1,__:[66]}),a(ie,{value:3},{default:l(()=>e[67]||(e[67]=[d("DataTurks")])),_:1,__:[67]})]),_:1},8,["value"])]),_:1}),a(c,{label:"å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿"},{default:l(()=>[n("div",il,[a(oe,{value:b.value.timeLimitM,"onUpdate:value":e[24]||(e[24]=s=>b.value.timeLimitM=s),min:1,placeholder:"è¯·è¾“å…¥å®éªŒç¯å¢ƒä½¿ç”¨æ—¶é•¿",style:{flex:"1"}},null,8,["value"]),e[68]||(e[68]=n("span",null,"åˆ†",-1))])]),_:1})]),_:1},8,["model"])])])])])):k("",!0),n("div",ul,[a(C,{onClick:it},{default:l(()=>[d(q(_.value===0?"è¿”å›":"ä¸Šä¸€æ­¥"),1)]),_:1}),a(C,{type:"primary",loading:A.value,onClick:ut},{default:l(()=>[d(q(_.value===3?"å®Œæˆ":"ä¸‹ä¸€æ­¥"),1)]),_:1},8,["loading"])])])]),_:1},8,["spinning"]),a(Dt,{open:I.value,"onUpdate:open":e[25]||(e[25]=s=>I.value=s),onConfirm:at,onCancel:be},null,8,["open"]),a(Jt,{open:z.value,"onUpdate:open":e[26]||(e[26]=s=>z.value=s),"parent-path":ae.value,onConfirm:nt},null,8,["open","parent-path"]),a(Et,{open:K.value,"onUpdate:open":e[27]||(e[27]=s=>K.value=s),"parent-path":le.value,onConfirm:rt},null,8,["open","parent-path"])])}}}),bl=va(dl,[["__scopeId","data-v-7c8a08e4"]]);export{bl as default};
