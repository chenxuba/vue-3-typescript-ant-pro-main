import{d as Le,a9 as Me,am as Pe,f,w as De,o as Ne,_ as g,a1 as m,$ as n,k as t,a7 as l,ad as A,F as q,ah as ue,G as c,ac as Be,aa as E,u as $e,a6 as H,y as Ee}from"./vue-C8C4cLDH.js";import{R as ie,u as W}from"./RichTextEditor-Cbgd4Efe.js";import{e as He,f as Je,a as Oe,s as ze,b as de,g as Ge}from"./index-DSGWGCOl.js";import{a as Ke}from"./dictionary-C9x8Yr5D.js";import{ad as o,Z as We,Y as Ye,K as Ze,B as Qe,I as Xe,$ as et,a0 as tt,a1 as at,a2 as lt,a3 as st,a7 as ot,a4 as rt,H as nt,J as ut,ae as it,af as dt,T as vt,t as pt,ab as ct}from"./antd-BsIzK5uT.js";import{_ as ft}from"./index-DLVpMS9m.js";const mt={class:"edit-jupyter-notebook-page"},_t={class:"page-container"},gt={class:"steps-section"},yt={key:0},wt={class:"form-section"},bt={class:"flex items-top gap-16px"},kt={class:"flex flex-col gap-12px"},ht={key:0,class:"image-preview"},Tt=["src"],Ct={class:"flex items-top gap-16px"},St={class:"flex flex-col gap-12px"},At={key:0,class:"image-preview"},qt=["src"],Vt={class:"form-section"},Ut={key:1,class:"step-content"},xt={class:"jupyter-header"},jt={class:"jupyter-actions"},Rt={class:"jupyter-iframe-wrapper"},Ft={key:0,class:"loading-container"},It=["src"],Lt={key:2,class:"step-content evaluation-step"},Mt={class:"evaluation-section"},Pt={class:"section-block"},Dt={class:"block-content"},Nt={key:0,class:"section-block"},Bt={class:"block-header"},$t={class:"header-actions"},Et={class:"block-content"},Ht={class:"test-set-label"},Jt={class:"tab-footer-buttons"},Ot={class:"reference-section"},zt={class:"section-block"},Gt={class:"block-content"},Kt={class:"tab-footer-buttons"},Wt={class:"page-footer"},J="http://101.200.13.193",Yt=Le({name:"EditJupyterNotebook",__name:"edit-jupyter-notebook",setup(Zt){const x=Me(),ve=Pe(),h=f(null),b=f(null),w=f(0),j=f(!1),R=f(),Y=f(),Z=f(""),V=f(!1),O=f(!1),pe=()=>{V.value=!V.value},Q=f("settings"),r=f({openTestValidate:1,testValidateFiles:"",testValidateSh:"",timeLimitM:"",scoreRule:1,evaluationSetting:"通过所有代码块评测",testSets:[{id:1,arg:"",answer:"",select:1},{id:2,arg:"",answer:"",select:1}]}),y=f({showAnswer:1,prohibitCopyAnswer:1,referenceAnswer:""}),F=f(!1),I=f(!1);let X=3;const ce=()=>{r.value.testSets.push({id:X++,arg:"",answer:"",select:1})},fe=a=>{if(r.value.testSets.length===1){o.warning("至少保留一个测试集");return}r.value.testSets=r.value.testSets.filter(e=>e.id!==a),o.success("删除成功")},me=(a,e)=>{a.select=e?1:2},L=f([]),_e=a=>{const{onSuccess:e}=a;setTimeout(()=>{e("ok")},0)},ge=async a=>{const{fileList:e}=a,d=e.filter(u=>u.status==="uploading"||u.status==="done"||!u.status);L.value=d;const p=d.filter(u=>u.originFileObj&&!u.url).map(async u=>{try{const v=await W(u.originFileObj);return u.url=v,v}catch{return o.error(`文件 ${u.name} 上传失败`),null}});if(p.length>0){const v=(await Promise.all(p)).filter(T=>T!==null);if(v.length>0){const T=d.filter(C=>C.url).map(C=>C.url).join(",");r.value.testValidateFiles=T,o.success(`成功上传 ${v.length} 个文件`)}}},i=f({name:"",tag:"",fieldType:void 0,difficulty:1,environment:void 0,secondType:void 0,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1}),M=f(""),P=f(""),D=f(!1),N=f(!1),ee={name:[{required:!0,message:"请输入名称",trigger:"blur"}],tag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],fieldType:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}],secondType:[{required:!0,message:"请选择小类别",trigger:"change"}],classHour:[{required:!0,message:"请输入学时",trigger:"blur"}],topCover:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],authType:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},ye=[{label:"人工智能",value:1},{label:"大数据",value:2},{label:"云计算",value:3},{label:"Web开发",value:4}],te=f([]),z=f(!1),we=async()=>{try{z.value=!0;const a=await Ke({code:"project#environment_2"});a&&a.list&&(te.value=a.list.map(e=>({label:e.name,value:e.value})))}catch{o.error("加载实验环境选项失败")}finally{z.value=!1}},be=[{label:"Bwapp",value:1},{label:"CSS",value:2},{label:"DataTurks",value:3}],ke=[{title:"基本信息"},{title:"实验内容"},{title:"评测设置"}],he=async()=>{if(!h.value){o.error("缺少项目ID"),x.back();return}try{j.value=!0;const a=await He({id:h.value});i.value={name:a.name||"",tag:a.tag||"",fieldType:a.fieldType,difficulty:a.difficulty||1,environment:a.environment,secondType:a.secondType,classHour:a.classHour||"",topCover:a.topCover||"",cover:a.cover||"",description:a.description||"",showTaskRequire:a.showTaskRequire===1,authType:a.authType||1},a.topCover&&(M.value=J+a.topCover),a.cover&&(P.value=J+a.cover),await Te()}catch(a){o.error(a.message||"获取项目详情失败"),x.back()}finally{j.value=!1}},Te=async()=>{if(h.value)try{const a=await Je({projectId:h.value});let e=[];if(Array.isArray(a)?e=a:a&&typeof a=="object"&&(e=a.list||a.data||a.tasks||[]),e&&e.length>0){const d=e.find(p=>p.type===4)||e[0];if(d){if(b.value=d.taskId,r.value.openTestValidate=d.openTestValidate||1,r.value.testValidateSh=d.testValidateSh||"",r.value.timeLimitM=d.timeLimitM?String(d.timeLimitM):"",r.value.scoreRule=d.scoreRule||1,r.value.evaluationSetting=d.evaluationSetting||"通过所有代码块评测",d.testValidateFiles){r.value.testValidateFiles=d.testValidateFiles;const p=d.testValidateFiles.split(",");L.value=p.map((u,v)=>({uid:`${v}`,name:u.split("/").pop()||`文件${v+1}`,status:"done",url:u}))}if(d.testContent)try{const p=JSON.parse(d.testContent);Array.isArray(p)&&p.length>0&&(r.value.testSets=p.map((u,v)=>({id:v+1,arg:u.arg||"",answer:u.answer||"",select:u.select||1})),X=p.length+1)}catch{}y.value.showAnswer=d.showAnswer||1,y.value.prohibitCopyAnswer=d.prohibitCopyAnswer||1,y.value.referenceAnswer=d.referenceAnswer||"",d.openTestValidate&&(F.value=!0),d.referenceAnswer&&(I.value=!0)}}}catch(a){o.warning(a.message||"获取任务列表失败")}};De(w,async a=>{a===1&&b.value&&await Ce()});const Ce=async()=>{if(b.value)try{O.value=!0;const a=await Ge({taskId:b.value});a&&a.config&&a.config.url?(Z.value=a.config.url,o.success("实验环境加载成功！")):o.warning("未获取到实验环境URL")}catch{o.error("获取实验环境失败，请稍后重试")}finally{O.value=!1}},ae=()=>{w.value===0?x.back():(w.value--,B())},le=async()=>{var a,e;if(w.value===0)try{await Promise.all([(a=R.value)==null?void 0:a.validate(),(e=Y.value)==null?void 0:e.validate()]),await Se(),w.value=1,B()}catch{o.error("请完善必填信息"),B()}else w.value===1?(b.value&&await Ae(),w.value=2,B()):w.value===2&&await Ue()},Se=async()=>{try{j.value=!0;const a={id:h.value,projectType:2,environment:i.value.environment,secondType:i.value.secondType,name:i.value.name,tag:i.value.tag,fieldType:i.value.fieldType,difficulty:i.value.difficulty,classHour:i.value.classHour,topCover:i.value.topCover,cover:i.value.cover,description:i.value.description,showTaskRequire:i.value.showTaskRequire?1:2,authType:i.value.authType};await Oe(a),o.success("保存成功！")}catch(a){throw o.error(a.message||"项目更新失败，请稍后重试"),a}finally{j.value=!1}},Ae=async()=>{if(b.value)try{await ze({taskId:b.value}),o.success("实验环境已停止")}catch{o.error("停止实验环境失败，请稍后重试")}},qe=async()=>{try{if(!b.value){o.error("任务ID不存在，请重新创建任务");return}if(r.value.openTestValidate===1){if(!r.value.testValidateFiles||r.value.testValidateFiles.trim()===""){o.error("请上传评测文件");return}if(!r.value.testValidateSh||r.value.testValidateSh.trim()===""){o.error("请输入评测执行命令");return}if(!r.value.timeLimitM||r.value.timeLimitM.trim()===""){o.error("请输入评测时长限制");return}if(!r.value.testSets||r.value.testSets.length===0){o.error("请至少添加一个测试集");return}const d=r.value.testSets.filter(p=>p.select===1);if(d.length===0){o.error("请至少选中一个测试集");return}for(let p=0;p<d.length;p++){const u=d[p];if(!u.arg||u.arg.trim()===""){o.error(`测试集${p+1}的输入内容不能为空`);return}if(!u.answer||u.answer.trim()===""){o.error(`测试集${p+1}的期望输出不能为空`);return}}}const a=r.value.testSets.map(d=>({arg:d.arg,answer:d.answer,select:d.select})),e={taskId:b.value,projectId:h.value,openTestValidate:r.value.openTestValidate,testValidateFiles:r.value.testValidateFiles,testValidateSh:r.value.testValidateSh,timeLimitM:r.value.timeLimitM,scoreRule:r.value.scoreRule,testContent:JSON.stringify(a)};await de(e),F.value=!0,o.success("评测设置保存成功！")}catch{o.error("评测设置保存失败，请重试")}},Ve=async()=>{try{if(!b.value){o.error("任务ID不存在，请重新创建任务");return}if(!y.value.referenceAnswer||y.value.referenceAnswer.trim()===""){o.error("请输入参考答案内容");return}if(!y.value.referenceAnswer.replace(/<[^>]*>/g,"").trim()){o.error("请输入参考答案内容");return}const e={taskId:b.value,projectId:h.value,showAnswer:y.value.showAnswer,prohibitCopyAnswer:y.value.prohibitCopyAnswer,referenceAnswer:y.value.referenceAnswer};await de(e),I.value=!0,o.success("参考答案保存成功！")}catch{o.error("参考答案保存失败，请重试")}},Ue=async()=>{try{if(!h.value){o.error("项目ID不存在，请重新创建项目");return}if(!F.value){o.error("请先保存评测设置后再完成更新");return}if(!I.value){o.error("请先保存参考答案后再完成更新");return}o.success("项目更新成功！"),setTimeout(()=>{x.push("/dashboard/analysis")},500)}catch{o.error("完成更新失败，请重试")}},B=()=>{Ee(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const a=document.querySelector(".page-content");a&&(a.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(p=>{p.scrollTop>0&&(p.scrollTop=0)})})},xe=async a=>{var p;if(!(a.size/1024/1024<12))return o.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return o.error("只能上传 JPG/PNG 格式的图片!"),!1;try{D.value=!0;const u=await W(a);M.value=J+u,i.value.topCover=u,(p=R.value)==null||p.validateFields(["topCover"]),o.success("顶部背景图上传成功")}catch{o.error("顶部背景图上传失败")}finally{D.value=!1}return!1},je=async a=>{var p;if(!(a.size/1024/1024<12))return o.error("图片大小不能超过 12MB!"),!1;if(!(a.type==="image/jpeg"||a.type==="image/png"))return o.error("只能上传 JPG/PNG 格式的图片!"),!1;try{N.value=!0;const u=await W(a);P.value=J+u,i.value.cover=u,(p=R.value)==null||p.validateFields(["cover"]),o.success("封面图上传成功")}catch{o.error("封面图上传失败")}finally{N.value=!1}return!1};return Ne(async()=>{await we();const a=ve.query.id;a?(h.value=Number(a),he()):(o.error("缺少项目ID"),x.back())}),(a,e)=>{const d=Ye,p=We,u=Xe,v=Qe,T=tt,C=at,se=et,_=st,S=lt,Re=ot,k=nt,G=rt,oe=ut,$=Ze,Fe=it,re=dt,ne=pt,Ie=vt;return m(),g("div",mt,[e[54]||(e[54]=n("div",{class:"page-header"},[n("h2",null,"编辑JupyterNotebook环境实训项目")],-1)),t(re,{spinning:j.value},{default:l(()=>[n("div",_t,[n("div",gt,[t(p,{current:w.value,class:"custom-steps"},{default:l(()=>[(m(),g(q,null,ue(ke,(s,K)=>t(d,{key:K,title:s.title},null,8,["title"])),64))]),_:1},8,["current"])]),w.value===0?(m(),g("div",yt,[e[30]||(e[30]=n("div",{class:"section-title"},[n("h3",null,"基本信息")],-1)),n("div",wt,[t($,{ref_key:"formRef",ref:R,model:i.value,rules:ee,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[t(v,{label:"名称",name:"name",required:""},{default:l(()=>[t(u,{value:i.value.name,"onUpdate:value":e[0]||(e[0]=s=>i.value.name=s),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(se,null,{default:l(()=>[t(T,{span:12},{default:l(()=>[t(v,{label:"技能标签",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(u,{value:i.value.tag,"onUpdate:value":e[1]||(e[1]=s=>i.value.tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(v,{label:"领域类别",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[t(C,{value:i.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>i.value.fieldType=s),placeholder:"请选择领域类别",options:ye},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(v,{label:"难度",name:"difficulty",required:""},{default:l(()=>[t(S,{value:i.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>i.value.difficulty=s),class:"custom-radio"},{default:l(()=>[t(_,{value:1},{default:l(()=>e[20]||(e[20]=[c("简单")])),_:1,__:[20]}),t(_,{value:2},{default:l(()=>e[21]||(e[21]=[c("适中")])),_:1,__:[21]}),t(_,{value:3},{default:l(()=>e[22]||(e[22]=[c("困难")])),_:1,__:[22]})]),_:1},8,["value"])]),_:1}),t(se,null,{default:l(()=>[t(T,{span:12},{default:l(()=>[t(v,{label:"实验环境",name:"environment",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(C,{value:i.value.environment,"onUpdate:value":e[4]||(e[4]=s=>i.value.environment=s),placeholder:"请选择实验环境",options:te.value,loading:z.value},null,8,["value","options","loading"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(v,{label:"小类别",name:"secondType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[t(C,{value:i.value.secondType,"onUpdate:value":e[5]||(e[5]=s=>i.value.secondType=s),placeholder:"请选择小类别",options:be},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(v,{label:"学时",name:"classHour",required:""},{default:l(()=>[t(Re,{min:0,class:"w-full",value:i.value.classHour,"onUpdate:value":e[6]||(e[6]=s=>i.value.classHour=s),placeholder:"请输入学时"},null,8,["value"])]),_:1}),t(v,{label:"顶部背景图",name:"topCover",required:""},{default:l(()=>[n("div",bt,[n("div",kt,[t(G,{"before-upload":xe,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[t(k,{loading:D.value},{default:l(()=>[D.value?(m(),g(q,{key:1},[c("上传中...")],64)):(m(),g(q,{key:0},[c("选择文件")],64))]),_:1},8,["loading"])]),_:1}),M.value?(m(),g("div",ht,[n("img",{src:M.value,alt:"顶部背景图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,Tt)])):A("",!0)]),e[23]||(e[23]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(v,{label:"封面图",name:"cover",required:""},{default:l(()=>[n("div",Ct,[n("div",St,[t(G,{"before-upload":je,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:l(()=>[t(k,{loading:N.value},{default:l(()=>[N.value?(m(),g(q,{key:1},[c("上传中...")],64)):(m(),g(q,{key:0},[c("选择文件")],64))]),_:1},8,["loading"])]),_:1}),P.value?(m(),g("div",At,[n("img",{src:P.value,alt:"封面图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,qt)])):A("",!0)]),e[24]||(e[24]=n("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(v,{label:"简介",name:"description"},{default:l(()=>[t(ie,{modelValue:i.value.description,"onUpdate:modelValue":e[7]||(e[7]=s=>i.value.description=s)},null,8,["modelValue"])]),_:1}),t(v,{label:"任务要求",name:"showTaskRequire"},{default:l(()=>[t(oe,{checked:i.value.showTaskRequire,"onUpdate:checked":e[8]||(e[8]=s=>i.value.showTaskRequire=s)},{default:l(()=>e[25]||(e[25]=[c(" 显示任务要求（勾选后，将简介作为任务要求显示在实践项目挑战页面） ")])),_:1,__:[25]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[31]||(e[31]=n("div",{class:"section-title"},[n("h3",null,"培训公开范围")],-1)),n("div",Vt,[t($,{ref_key:"trainingScopeFormRef",ref:Y,model:i.value,rules:ee,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:l(()=>[t(v,{label:"培训公开范围",name:"authType",required:""},{default:l(()=>[t(S,{value:i.value.authType,"onUpdate:value":e[9]||(e[9]=s=>i.value.authType=s),class:"custom-radio"},{default:l(()=>[t(_,{value:1},{default:l(()=>e[26]||(e[26]=[c("完全公开")])),_:1,__:[26]}),t(_,{value:2},{default:l(()=>e[27]||(e[27]=[c("全院公开")])),_:1,__:[27]}),t(_,{value:3},{default:l(()=>e[28]||(e[28]=[c("本单位公开")])),_:1,__:[28]}),t(_,{value:4},{default:l(()=>e[29]||(e[29]=[c("不公开")])),_:1,__:[29]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):A("",!0),w.value===1?(m(),g("div",Ut,[n("div",{class:Be(["jupyter-container",{fullscreen:V.value}])},[n("div",xt,[e[32]||(e[32]=n("h3",null,"Jupyter Notebook 编辑器",-1)),n("div",jt,[t(Fe,{title:V.value?"退出全屏":"全屏"},{default:l(()=>[t(k,{type:"text",icon:V.value?"fullscreen-exit":"fullscreen",onClick:pe},{default:l(()=>[c(E(V.value?"退出全屏":"全屏"),1)]),_:1},8,["icon"])]),_:1},8,["title"])])]),n("div",Rt,[O.value?(m(),g("div",Ft,[t(re,{size:"large",tip:"正在加载实验环境..."})])):(m(),g("iframe",{key:1,src:Z.value,class:"jupyter-iframe",frameborder:"0",allowfullscreen:""},null,8,It))])],2)])):A("",!0),w.value===2?(m(),g("div",Lt,[t(Ie,{activeKey:Q.value,"onUpdate:activeKey":e[19]||(e[19]=s=>Q.value=s),class:"evaluation-tabs"},{default:l(()=>[t(ne,{key:"settings",tab:"评测设置"},{default:l(()=>[n("div",Mt,[n("div",Pt,[e[42]||(e[42]=n("div",{class:"block-header"},"评测文件",-1)),n("div",Dt,[t($,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[t(v,{label:"是否启用评测功能",required:""},{default:l(()=>[t(S,{value:r.value.openTestValidate,"onUpdate:value":e[10]||(e[10]=s=>r.value.openTestValidate=s),class:"custom-radio"},{default:l(()=>[t(_,{value:1},{default:l(()=>e[33]||(e[33]=[c("是")])),_:1,__:[33]}),t(_,{value:2},{default:l(()=>e[34]||(e[34]=[c("否")])),_:1,__:[34]})]),_:1},8,["value"])]),_:1}),r.value.openTestValidate===1?(m(),g(q,{key:0},[t(v,{label:"评测文件",required:""},{default:l(()=>[t(G,{"file-list":L.value,"onUpdate:fileList":e[11]||(e[11]=s=>L.value=s),"custom-request":_e,onChange:ge,"max-count":10},{default:l(()=>[t(k,{type:"primary"},{default:l(()=>e[35]||(e[35]=[c("点击上传")])),_:1,__:[35]})]),_:1},8,["file-list"]),e[36]||(e[36]=n("div",{class:"upload-hint"}," 说明：支持上传多个文件，每个文件大小不能超过500M。 ",-1))]),_:1,__:[36]}),t(v,{label:"评测执行命令",required:""},{default:l(()=>[t(u,{value:r.value.testValidateSh,"onUpdate:value":e[12]||(e[12]=s=>r.value.testValidateSh=s),placeholder:"请输入评测执行命令，例如：python main.py"},null,8,["value"]),e[37]||(e[37]=n("div",{class:"upload-hint"}," （执行评测文件的命令，如：python main.py、node index.js、java Main 等） ",-1))]),_:1,__:[37]}),t(v,{label:"评测时长限制",required:""},{default:l(()=>[t(u,{value:r.value.timeLimitM,"onUpdate:value":e[13]||(e[13]=s=>r.value.timeLimitM=s),placeholder:"请输入评测时长（分钟）",style:{width:"600px"}},null,8,["value"])]),_:1}),t(v,{label:"系统评分规则"},{default:l(()=>[t(S,{value:r.value.scoreRule,"onUpdate:value":e[14]||(e[14]=s=>r.value.scoreRule=s),class:"custom-radio"},{default:l(()=>[t(_,{value:1},{default:l(()=>e[38]||(e[38]=[c(" 通过全部测试集（仅当所有测试集都正确时，获得项目学时） ")])),_:1,__:[38]}),t(_,{value:2},{default:l(()=>e[39]||(e[39]=[c(" 通过部分测试集（任意一个测试集正确时，获得项目学时） ")])),_:1,__:[39]})]),_:1},8,["value"])]),_:1}),t(v,{label:"评测设置",required:""},{default:l(()=>[t(S,{value:r.value.evaluationSetting,"onUpdate:value":e[15]||(e[15]=s=>r.value.evaluationSetting=s),class:"custom-radio"},{default:l(()=>[t(_,{value:"通过所有代码块评测"},{default:l(()=>e[40]||(e[40]=[c(" 通过所有代码块评测（对学员任务文件的所有非空代码块进行评测） ")])),_:1,__:[40]}),t(_,{value:"通过指定代码块评测"},{default:l(()=>e[41]||(e[41]=[c(" 通过指定代码块评测（对学员任务文件的指定非空代码块进行评测） ")])),_:1,__:[41]})]),_:1},8,["value"])]),_:1})],64)):A("",!0)]),_:1})])]),r.value.openTestValidate===1?(m(),g("div",Nt,[n("div",Bt,[e[44]||(e[44]=n("span",null,"测试集",-1)),n("div",$t,[t(k,{onClick:ce},{default:l(()=>e[43]||(e[43]=[c("新增测试集")])),_:1,__:[43]})])]),n("div",Et,[(m(!0),g(q,null,ue(r.value.testSets,(s,K)=>(m(),g("div",{key:s.id,class:"test-set-item"},[t(oe,{checked:s.select===1,onChange:U=>me(s,U.target.checked),class:"test-set-checkbox"},null,8,["checked","onChange"]),n("span",Ht,"测试集"+E(K+1),1),t(u,{value:s.arg,"onUpdate:value":U=>s.arg=U,placeholder:"请输入输入内容",class:"test-set-input"},null,8,["value","onUpdate:value"]),t(u,{value:s.answer,"onUpdate:value":U=>s.answer=U,placeholder:"请输入期望输出",class:"test-set-input"},null,8,["value","onUpdate:value"]),t($e(ct),{class:"delete-test-set-icon",onClick:U=>fe(s.id)},null,8,["onClick"])]))),128))])])):A("",!0),n("div",Jt,[t(k,{type:"primary",onClick:qe},{default:l(()=>[c(E(F.value?"更新":"保存"),1)]),_:1})])])]),_:1}),t(ne,{key:"reference",tab:"参考答案"},{default:l(()=>[n("div",Ot,[n("div",zt,[e[49]||(e[49]=n("div",{class:"block-header"},"参考答案",-1)),n("div",Gt,[t($,{layout:"horizontal","label-col":{span:3},"wrapper-col":{span:20}},{default:l(()=>[t(v,{label:"是否显示参考答案模块",required:""},{default:l(()=>[t(S,{value:y.value.showAnswer,"onUpdate:value":e[16]||(e[16]=s=>y.value.showAnswer=s),class:"custom-radio"},{default:l(()=>[t(_,{value:1},{default:l(()=>e[45]||(e[45]=[c("是")])),_:1,__:[45]}),t(_,{value:2},{default:l(()=>e[46]||(e[46]=[c("否")])),_:1,__:[46]})]),_:1},8,["value"])]),_:1}),t(v,{label:"是否禁止复制参考答案",required:""},{default:l(()=>[t(S,{value:y.value.prohibitCopyAnswer,"onUpdate:value":e[17]||(e[17]=s=>y.value.prohibitCopyAnswer=s),class:"custom-radio"},{default:l(()=>[t(_,{value:1},{default:l(()=>e[47]||(e[47]=[c("是")])),_:1,__:[47]}),t(_,{value:2},{default:l(()=>e[48]||(e[48]=[c("否")])),_:1,__:[48]})]),_:1},8,["value"])]),_:1}),t(v,{label:"参考答案",required:""},{default:l(()=>[t(ie,{modelValue:y.value.referenceAnswer,"onUpdate:modelValue":e[18]||(e[18]=s=>y.value.referenceAnswer=s)},null,8,["modelValue"])]),_:1})]),_:1})])]),n("div",Kt,[t(k,{type:"primary",onClick:Ve},{default:l(()=>[c(E(I.value?"更新":"保存"),1)]),_:1})])])]),_:1})]),_:1},8,["activeKey"])])):A("",!0),n("div",Wt,[w.value===0?(m(),H(k,{key:0,onClick:ae},{default:l(()=>e[50]||(e[50]=[c("返回")])),_:1,__:[50]})):(m(),H(k,{key:1,onClick:ae},{default:l(()=>e[51]||(e[51]=[c("上一步")])),_:1,__:[51]})),w.value===2?(m(),H(k,{key:2,type:"primary",onClick:le},{default:l(()=>e[52]||(e[52]=[c("完成更新")])),_:1,__:[52]})):(m(),H(k,{key:3,type:"primary",onClick:le},{default:l(()=>e[53]||(e[53]=[c("下一步")])),_:1,__:[53]}))])])]),_:1},8,["spinning"])])}}}),sa=ft(Yt,[["__scopeId","data-v-9c20a582"]]);export{sa as default};
