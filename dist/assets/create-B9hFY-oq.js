import{d as S,ab as F,f as p,o as J,w as G,c as R,a0 as m,a3 as v,a1 as i,k as o,a9 as l,G as u,af as b,F as h,ac as x,a8 as C}from"./vue-CHyeelTQ.js";import{R as I}from"./RichTextEditor-CtF3t4Fk.js";import{g as L,a as $}from"./dictionary-BIcoBOuF.js";import{ag as z,af as A,Q,U as W,Z,v as K,$ as X,G as Y,aa as c}from"./antd-BwFVEnje.js";import{_ as ee}from"./index-COmLMnDR.js";const ae={class:"create-project-page"},te={class:"page-content"},oe={class:"project-type-section"},ne={class:"project-type-desc"},le={class:"project-form-section"},re={class:"form-title"},se={key:0},ue={class:"page-footer"},ie=S({name:"CreateRainingProject",__name:"create",setup(de){const f=F(),q=p(),t=p(1),a=p({name:"",description:"",difficulty:void 0,environment:void 0,secondType:void 0,classHour:"",showTaskRequire:!1}),D={name:[{required:!0,message:"请输入名称",trigger:"blur"}],description:[{required:!0,validator:(s,e)=>!e||!e.replace(/<[^>]*>/g,"").trim()?Promise.reject("请输入简介"):Promise.resolve(),trigger:"blur"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],environment:[{required:!0,message:"请选择实验环境",trigger:"change"}],secondType:[{required:!0,message:"请选择小类别",trigger:"change"}]},N=[{label:"简单",value:1},{label:"适中",value:2},{label:"困难",value:3}],_=p({1:[],2:[],3:[]}),k=p(!1),U=()=>(_.value[t.value]||[]).map(e=>({label:e.name,value:e.value})),j=async s=>{if(!(_.value[s].length>0))try{k.value=!0;const e=L(s);if(!e)return;const r=await $({code:e});r&&r.list&&(_.value[s]=r.list)}catch(e){console.error("加载实验环境选项失败：",e),c.error("加载实验环境选项失败")}finally{k.value=!1}};J(()=>{j(t.value)});const E=()=>t.value!==2&&t.value!==3?[]:[{label:"Bwapp",value:1},{label:"CSS",value:2},{label:"DataTurks",value:3}],B=()=>{f.back()},V=async()=>{var r,g;try{await((r=q.value)==null?void 0:r.validate())}catch(y){console.log("表单验证失败",y);return}if(!a.value.name){c.error("请输入名称");return}if(!(((g=a.value.description)==null?void 0:g.replace(/<[^>]*>/g,"").trim())||"")){c.error("请输入简介");return}if(!a.value.difficulty){c.error("请选择难度");return}if(!a.value.environment){c.error("请选择实验环境");return}if((t.value===2||t.value===3)&&!a.value.secondType){c.error("请选择小类别");return}console.log("下一步",{projectType:t.value,...a.value});const e={projectType:t.value,name:a.value.name,description:a.value.description,difficulty:a.value.difficulty,environment:a.value.environment,secondType:a.value.secondType,classHour:a.value.classHour,showTaskRequire:a.value.showTaskRequire};t.value===1?f.push({path:"/dashboard/raining-project-management/config-full-stack",state:e}):t.value===2?f.push({path:"/dashboard/raining-project-management/config-jupyter-notebook",state:e}):t.value===3&&f.push({path:"/dashboard/raining-project-management/config-jupyter-lab",state:e})};G(t,s=>{a.value.environment=void 0,a.value.secondType=void 0,a.value.showTaskRequire=!1,j(s)});const H=R(()=>({1:"全栈环境",2:"JupyterNotebook环境",3:"JupyterLab环境"})[t.value]||""),M=R(()=>{if(!a.value.environment)return"";const e=(_.value[t.value]||[]).find(r=>r.value===a.value.environment);return(e==null?void 0:e.name)||""});return(s,e)=>{const r=z,g=A,y=W,d=Q,O=Z,T=K,P=X,w=Y;return v(),m("div",ae,[e[14]||(e[14]=i("div",{class:"page-header"},[i("h2",null,"新建实训项目")],-1)),i("div",te,[i("div",oe,[o(g,{value:t.value,"onUpdate:value":e[0]||(e[0]=n=>t.value=n),class:"custom-radio"},{default:l(()=>[o(r,{value:1},{default:l(()=>e[8]||(e[8]=[u("全栈环境实训项目")])),_:1,__:[8]}),o(r,{value:2},{default:l(()=>e[9]||(e[9]=[u("JupyterNotebook环境实训项目")])),_:1,__:[9]}),o(r,{value:3},{default:l(()=>e[10]||(e[10]=[u("JupyterLab环境实训项目")])),_:1,__:[10]})]),_:1},8,["value"])]),i("div",ne,[t.value===1?(v(),m(h,{key:0},[u(" 多功能新型实战项目模式，支持图形化桌面、Web IDE、命令行、提供仿真拟真等种实验场景，适用于各类复杂工程项目研发。 ")],64)):t.value===2?(v(),m(h,{key:1},[u(" 多功能实时交互实验模式，支持实时代码、数学方程、可视化和MarkDown等。 适用于数据清理、数值模拟、统计建模、机器学习等系列实验。 ")],64)):t.value===3?(v(),m(h,{key:2},[u(" 多功能实时交互实验模式，支持实时代码、数学方程、可视化和MarkDown等。 适用于数据清理、数值模拟、统计建模、机器学习等系列实验。 ")],64)):b("",!0)]),i("div",le,[i("div",re,[u(x(H.value)+"实训项目 ",1),a.value.environment?(v(),m("span",se," 实验环境: "+x(M.value),1)):b("",!0)]),o(P,{ref_key:"formRef",ref:q,model:a.value,rules:D,layout:"horizontal","label-col":{span:3},"wrapper-col":{span:18}},{default:l(()=>[o(d,{label:"名称",name:"name",required:""},{default:l(()=>[o(y,{value:a.value.name,"onUpdate:value":e[1]||(e[1]=n=>a.value.name=n),placeholder:"请输入名称"},null,8,["value"])]),_:1}),o(d,{label:"简介",name:"description",required:""},{default:l(()=>[o(I,{modelValue:a.value.description,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.description=n),placeholder:"请输入简介内容",height:200},null,8,["modelValue"])]),_:1}),t.value===2?(v(),C(d,{key:0,label:"任务要求",name:"showTaskRequire"},{default:l(()=>[o(O,{checked:a.value.showTaskRequire,"onUpdate:checked":e[3]||(e[3]=n=>a.value.showTaskRequire=n)},{default:l(()=>e[11]||(e[11]=[u(" 显示任务要求（勾选后，将简介作为任务要求显示在实践项目挑战页面） ")])),_:1,__:[11]},8,["checked"])]),_:1})):b("",!0),o(d,{label:"难度",name:"difficulty",required:""},{default:l(()=>[o(T,{value:a.value.difficulty,"onUpdate:value":e[4]||(e[4]=n=>a.value.difficulty=n),placeholder:"请选择难度",options:N},null,8,["value"])]),_:1}),o(d,{label:"实验环境",name:"environment",required:""},{default:l(()=>[o(T,{value:a.value.environment,"onUpdate:value":e[5]||(e[5]=n=>a.value.environment=n),placeholder:"请选择实验环境",options:U(),loading:k.value},null,8,["value","options","loading"])]),_:1}),t.value===2||t.value===3?(v(),C(d,{key:1,label:"小类别",name:"secondType",required:""},{default:l(()=>[o(T,{value:a.value.secondType,"onUpdate:value":e[6]||(e[6]=n=>a.value.secondType=n),placeholder:"请选择小类别",options:E()},null,8,["value","options"])]),_:1})):b("",!0),o(d,{label:"学时",name:"classHour"},{default:l(()=>[o(y,{value:a.value.classHour,"onUpdate:value":e[7]||(e[7]=n=>a.value.classHour=n),placeholder:"配置任务后自动计算",disabled:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),i("div",ue,[o(w,{onClick:B},{default:l(()=>e[12]||(e[12]=[u("返回")])),_:1,__:[12]}),o(w,{type:"primary",onClick:V},{default:l(()=>e[13]||(e[13]=[u("下一步")])),_:1,__:[13]})])])])}}}),ge=ee(ie,[["__scopeId","data-v-b52d21d9"]]);export{ge as default};
