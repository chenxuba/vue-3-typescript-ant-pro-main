import{d as cl,ab as vl,ao as fl,f as _,c as ml,w as gl,y as Ue,o as yl,a0 as g,a3 as d,a1 as i,k as t,a9 as a,af as k,G as u,F as P,a8 as R,u as n,H as de,ac as x,aj as H,ae as O,B as Xe,ah as _l}from"./vue-CHyeelTQ.js";import{u as Ye}from"./file-BZr-hbPB.js";import{e as kl,a as bl,u as Tl,f as hl}from"./index-CIFBU6iq.js";import{H as j,j as wl,t as Cl,x as qe,c as Ul,a as ql,m as Il,u as xl,F as Rl,b as Pl,R as Fl,N as Sl,d as Ll}from"./useFileTree-BMhEZUhw.js";import{R as Ie}from"./RichTextEditor-DzAN3D0d.js";import{u as jl,Q as El}from"./useTaskLevel-7gQPZDys.js";import{a7 as m,a9 as Nl,a8 as Vl,a0 as Ml,U as Bl,V as Dl,aa as $l,ab as Al,w as Hl,ac as Ol,ad as Ql,ae as Kl,H as zl,$ as Jl,y as Gl,D as Wl,af as Ze,c as Xl,f as Yl,ag as pe,T as Zl,K as ea,ah as ta,ai as la,aj as aa,ak as et,x as sa,J as oa,al as na}from"./antd-CtyD9qUH.js";import{_ as ia}from"./index-DxV6Ufq3.js";const ra={class:"edit-full-stack-page"},ua={class:"page-content"},da={class:"steps-container"},pa={key:0},ca={class:"form-section"},va={class:"flex items-top gap-16px"},fa={class:"flex flex-col gap-12px"},ma={key:0,class:"image-preview"},ga=["src"],ya={class:"flex items-top gap-16px"},_a={class:"flex flex-col gap-12px"},ka={key:0,class:"image-preview"},ba=["src"],Ta={class:"form-section"},ha={key:1},wa={class:"form-section repository-section"},Ca={class:"repository-top-bar flex items-center gap-16px justify-between"},Ua={class:"repository-url-group"},qa={class:"repository-main-area"},Ia={class:"repository-left"},xa={class:"repository-switch-box flex items-center justify-between"},Ra={class:"flex items-center gap-12px"},Pa={key:1,class:"repository-tips"},Fa={class:"repository-right"},Sa={key:1,class:"empty-area"},La={key:2},ja={class:"task-level-section"},Ea={class:"task-level-header"},Na={class:"header-buttons"},Va={class:"task-level-main"},Ma={class:"task-level-list"},Ba={class:"list-title"},Da={class:"list-items"},$a=["onClick"],Aa={class:"item-name"},Ha={class:"task-level-detail"},Oa={key:0,class:"detail-content"},Qa={key:0,class:"questions-content"},Ka={key:1,class:"questions-list"},za=["onDragstart","onDrop"],Ja={class:"question-header"},Ga={class:"question-number-with-drag"},Wa={class:"question-number"},Xa={class:"action-icons"},Ya={class:"question-title"},Za={key:0,class:"flex"},es=["innerHTML"],ts={key:1,style:{color:"#bfbfbf"}},ls={class:"question-options"},as={class:"option-label"},ss={class:"option-content"},os={key:0,class:"correct-tag"},ns={class:"question-explanation"},is={class:"explanation-content"},rs={key:0},us={key:1,style:{color:"#bfbfbf"}},ds={class:"evaluation-content"},ps={class:"evaluation-section"},cs={class:"evaluation-section"},vs={class:"evaluation-section"},fs={class:"case-type-row"},ms={key:0,class:"test-case-buttons"},gs={key:0,class:"test-cases-list"},ys={class:"test-case-label"},_s={key:0,class:"form-footer-buttons"},ks={key:1,class:"empty-detail"},bs={key:3,class:"step-content"},Ts={class:"content-card"},hs={class:"environment-header"},ws={class:"environment-actions"},Cs={class:"tab-label"},Us=["onDblclick"],qs={class:"experiment-image-info"},Is={class:"experiment-interfaces"},xs={key:0,style:{color:"#999"}},Rs={key:1,style:{color:"#999"}},Ps={class:"page-footer"},ce="http://101.200.13.193",Fs=cl({name:"EditFullStack",__name:"edit-full-stack",setup(Ss){j.registerLanguage("javascript",wl),j.registerLanguage("typescript",Cl),j.registerLanguage("xml",qe),j.registerLanguage("html",qe),j.registerLanguage("vue",qe),j.registerLanguage("css",Ul),j.registerLanguage("json",ql),j.registerLanguage("markdown",Il);const Q=vl(),tt=fl(),F=_(null),q=_(0),D=_(!1),Y=_(),xe=_(),Z=_(),r=_({name:"",tag:"",fieldType:void 0,difficulty:1,classHour:"",topCover:"",cover:"",description:"",showTaskRequire:!1,authType:1,enableCodeRepository:!1,repositoryType:"代码仓库",gitUrl:"",environment:void 0}),ee=_(""),te=_(""),le=_(!1),ae=_(!1),$=_(void 0),w=_([]),E=_("1"),K=_(""),lt={dockerImage:[{required:!0,message:"请选择实验镜像",trigger:"change"}],viewTypes:[{required:!0,type:"array",min:1,message:"请至少选择一个实验界面",trigger:"change"}],secondType:[{required:!0,message:"请选择附带环境",trigger:"change"}],taskId:[{required:!0,message:"请选择任务关卡",trigger:"change"}],codeType:[{required:!0,message:"请选择编程语言",trigger:"change"}],shellBegin:[{required:!0,message:"请输入开启时触发命令",trigger:"blur"}],containerPort:[{required:!0,message:"请输入容器端口",trigger:"blur"}]},Re=ml(()=>{var e;const l=w.value.find(c=>c.id===E.value);return(l==null?void 0:l.config)||((e=w.value[0])==null?void 0:e.config)}),Pe={name:[{required:!0,message:"请输入名称",trigger:"blur"}],tag:[{required:!0,message:"请输入技能标签",trigger:"blur"}],fieldType:[{required:!0,message:"请选择领域类别",trigger:"change"}],difficulty:[{required:!0,message:"请选择难度",trigger:"change"}],topCover:[{required:!0,message:"请上传顶部背景图",trigger:"change"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],authType:[{required:!0,message:"请选择培训公开范围",trigger:"change"}]},at=[{label:"人工智能",value:1},{label:"大数据",value:2},{label:"云计算",value:3},{label:"Web开发",value:4}],st=[{label:"切换仓库",value:"切换仓库"},{label:"代码仓库",value:"代码仓库"},{label:"私密代码仓库",value:"私密代码仓库"}],A=_(!1),{fileTreeData:ot,expandedKeys:ve,selectedFile:nt,highlightedCode:it,handleSelectFile:rt,getNodePath:ut,addFileToTree:dt,addFolderToTree:pt,handleRenameNode:ct,handleCopyPath:vt,handleDeleteNode:ft}=xl(),{taskLevels:L,selectedTaskLevelId:Fe,currentTab:se,taskLevelFormRef:fe,evaluationFormRef:mt,taskLevelFormData:y,evaluationFormData:C,learningResourceFileList:me,taskLevelFormRules:gt,evaluationFormRules:yt,isKernelTask:_t,isChoiceTask:ge,isProgrammingTask:Se,addTaskLevel:ye,deleteTaskLevel:kt,selectTaskLevel:Le,saveTaskLevel:bt,resetTaskLevel:Tt,handleLearningResourceCustomRequest:_e,handleLearningResourceUpload:ht,handleUserFilesUpload:wt,handleTestValidateFilesUpload:Ct,userFileList:ke,testValidateFileList:be,addTestCase:Ut,removeTestCase:qt,clearAllTestCases:It,downloadTemplate:xt,batchUploadTestCases:Rt,getCurrentQuestions:oe,addQuestion:Pt,deleteQuestion:Ft,updateQuestion:St,updateQuestionsOrder:Lt,loadQuestions:je,saveQuestionsOrder:jt}=jl(F),z=_(!1),ne=_(!1),ie=_(!1),re=_(!1),J=_(null),Te=_("/"),he=_("/"),Et=()=>({1:"Python3.6",2:"Python3.13",3:"Python3.12/VNC"})[$.value||1]||"Python3.6",Ee=()=>{w.value.length===0&&(w.value=[{id:"1",name:"实验环境1",isEditing:!1,isSaved:!1,config:{dockerImage:$.value||1,viewTypes:[],secondType:void 0,taskId:void 0,codeType:void 0,shellBegin:void 0,containerPort:void 0,containerPath:void 0}}])},Nt=async()=>{if(F.value)try{const l=await hl({projectId:F.value});let e=[];Array.isArray(l)?e=l:l&&typeof l=="object"&&(e=l.list||l.data||l.tasks||[]),e&&e.length>0&&(L.value=e.map(o=>{let v="programming";o.type===4?v="kernel":o.type===2?v="choice":o.type===1&&(v="programming");const p=o.source?o.source.split(",").map((T,S)=>({uid:`${S}`,name:T.split("/").pop()||`文件${S+1}`,status:"done",url:T,response:T})):[];let U=[];if(o.testContent)try{U=JSON.parse(o.testContent)}catch(T){console.error("解析测试集内容失败:",T)}return{id:String(o.taskId),name:o.name,type:v,source:o.source,require:o.require,referenceAnswer:o.referenceAnswer,difficulty:o.difficulty,tag:o.tag,classHour:o.classHour,jumpUrl:o.jumpUrl,taskId:o.taskId,formData:{name:o.name,source:p,require:o.require,referenceAnswer:o.referenceAnswer,difficulty:o.difficulty,tag:o.tag,classHour:o.classHour,jumpUrl:o.jumpUrl,taskId:o.taskId},evaluationSettings:o.type===1?{timeLimitM:o.timeLimitM,userFiles:o.userFiles?o.userFiles.split(",").map((T,S)=>({uid:`${S}`,name:T.split("/").pop()||`文件${S+1}`,status:"done",url:T,response:T})):[],testValidateFiles:o.testValidateFiles?o.testValidateFiles.split(",").map((T,S)=>({uid:`${S}`,name:T.split("/").pop()||`文件${S+1}`,status:"done",url:T,response:T})):[],testValidateSh:o.testValidateSh,passType:o.passType||1,blankCode:o.blankCode||1,scoreRule:o.scoreRule||1,testValidateType:o.testValidateType||1,testContent:U}:void 0,questions:o.questions||[]}}),L.value.length>0&&Le(L.value[0].id));let c=[];e&&e.length>0&&e.forEach((o,v)=>{if(o.envIsDel===0||o.envIsDel===void 0||o.envIsDel===null){const p={id:o.id||o.taskId,title:o.title||o.name||`实验环境${v+1}`,dockerImage:o.dockerImage,viewTypes:o.viewTypes,secondType:o.secondType,taskId:o.taskId,codeType:o.codeType,shellBegin:o.shellBegin,containerPort:o.containerPort,containerPath:o.containerPath,envIsDel:o.envIsDel};c.push(p)}}),c.length>0?(w.value=c.map((o,v)=>{let p=[];return o.viewTypes&&(typeof o.viewTypes=="string"?p=o.viewTypes.split(",").map(U=>Number(U.trim())).filter(U=>!isNaN(U)):Array.isArray(o.viewTypes)&&(p=o.viewTypes.map(U=>Number(U)))),{id:String(o.id||Date.now()+v),name:o.title||o.name||`实验环境${v+1}`,isEditing:!1,isSaved:!0,config:{dockerImage:Number(o.dockerImage)||$.value||1,viewTypes:p,secondType:o.secondType?o.secondType:void 0,taskId:o.taskId?String(o.taskId):void 0,codeType:o.codeType?String(o.codeType):void 0,shellBegin:o.shellBegin?String(o.shellBegin):void 0,containerPort:o.containerPort?String(o.containerPort):void 0,containerPath:o.containerPath?String(o.containerPath):void 0}}}),w.value.length>0&&(E.value=w.value[0].id)):Ee()}catch(l){m.warning(l.message||"获取任务关卡列表失败"),Ee()}},Vt=async()=>{if(!F.value){m.error("缺少项目ID"),Q.back();return}try{D.value=!0;const l=await kl({id:F.value});r.value={name:l.name||"",tag:l.tag||"",fieldType:l.fieldType,difficulty:l.difficulty||1,classHour:l.classHour||"",topCover:l.topCover||"",cover:l.cover||"",description:l.description||"",showTaskRequire:l.showTaskRequire===1,authType:l.authType||1,enableCodeRepository:l.gitUrl?!0:l.enableCodeRepository||!1,repositoryType:l.repositoryType||"代码仓库",gitUrl:l.gitUrl||"",environment:l.environment},l.topCover&&(ee.value=ce+l.topCover),l.cover&&(te.value=ce+l.cover),$.value=l.environment||1,l.gitUrl&&(A.value=!0),await Nt()}catch(l){console.error("获取项目详情失败：",l),m.error(l.message||"获取项目详情失败"),Q.back()}finally{D.value=!1}},Mt=async l=>{var o;if(!(l.size/1024/1024<12))return m.error("图片大小不能超过 12MB!"),!1;if(!(l.type==="image/jpeg"||l.type==="image/png"))return m.error("只能上传 JPG/PNG 格式的图片!"),!1;try{le.value=!0;const v=await Ye(l);ee.value=ce+v,r.value.topCover=v,(o=Y.value)==null||o.validateFields(["topCover"]),m.success("顶部背景图上传成功")}catch{m.error("顶部背景图上传失败")}finally{le.value=!1}return!1},Bt=async l=>{var o;if(!(l.size/1024/1024<12))return m.error("图片大小不能超过 12MB!"),!1;if(!(l.type==="image/jpeg"||l.type==="image/png"))return m.error("只能上传 JPG/PNG 格式的图片!"),!1;try{ae.value=!0;const v=await Ye(l);te.value=ce+v,r.value.cover=v,(o=Y.value)==null||o.validateFields(["cover"]),m.success("封面图上传成功")}catch{m.error("封面图上传失败")}finally{ae.value=!1}return!1},Dt=l=>{(typeof l=="boolean"?l:!!l)?z.value=!0:r.value.enableCodeRepository=!1},Ne=async()=>{try{m.loading("正在查询仓库文件...",1),await new Promise(l=>setTimeout(l,1e3)),m.success("仓库文件查询成功")}catch{m.error("仓库文件查询失败")}},$t=async()=>{if(!r.value.gitUrl||!r.value.gitUrl.trim()){m.error("请先配置仓库地址"),Ve();return}r.value.enableCodeRepository=!0,z.value=!1,A.value=!0,await Ne()},Ve=()=>{r.value.enableCodeRepository=!1,z.value=!1};gl(()=>r.value.repositoryType,l=>{l==="切换仓库"&&r.value.enableCodeRepository&&(A.value=!1,m.info("已解锁仓库地址，请重新输入"),Ue(()=>{r.value.repositoryType="代码仓库"}))});const At=()=>{var l;r.value.enableCodeRepository&&!A.value&&((l=r.value.gitUrl)!=null&&l.trim())&&(A.value=!0,Ne())},Ht=l=>{switch(String(l.key)){case"newFile":Me();break;case"newFolder":Be();break;case"upload":m.info("上传功能开发中...");break}},Ot=(l,e)=>{const c=String(l.key),o=ut(e.key);switch(c){case"newFile":Me(o);break;case"newFolder":Be(o);break;case"upload":m.info("上传功能开发中...");break;case"rename":ct(e);break;case"copyPath":vt(e);break;case"delete":ft(e);break}},Me=(l="/")=>{ne.value=!0,Te.value=l},Qt=l=>{dt(l.fileName,l.fileContent,Te.value),m.success("文件创建成功"),ne.value=!1},Be=(l="/")=>{ie.value=!0,he.value=l},Kt=l=>{pt(l.folderName,he.value),m.success("文件夹创建成功"),ie.value=!1},G=()=>{Ue(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const l=document.querySelector(".page-content");l&&(l.scrollTop=0);const e=document.querySelector(".ant-layout-content");e&&(e.scrollTop=0),document.querySelectorAll("*").forEach(o=>{o.scrollTop>0&&(o.scrollTop=0)})})},zt=()=>{q.value>0?(q.value--,G()):Q.back()},Jt=async()=>{var l,e;if(q.value===0)try{await Promise.all([(l=Y.value)==null?void 0:l.validate(),(e=xe.value)==null?void 0:e.validate()]),q.value=1,G()}catch{m.error("请完善必填信息"),G()}else if(q.value===1){if(r.value.enableCodeRepository&&(!r.value.gitUrl||r.value.gitUrl.trim()==="")){m.error("请输入仓库地址");return}await De(!1),q.value=2,G()}else if(q.value===2){if(L.value.length===0){m.error("请至少添加一个任务关卡");return}if(L.value.some(o=>!o.taskId)){m.error("请先保存所有任务关卡后再进行下一步");return}q.value=3,G()}else if(q.value===3){if(w.value.filter(o=>!o.isSaved).length>0){m.error("请先保存所有实验环境配置");return}await De(!0)}},De=async(l=!1)=>{try{D.value=!0;const e={id:F.value,projectType:1,environment:$.value,name:r.value.name,tag:r.value.tag,fieldType:r.value.fieldType,difficulty:r.value.difficulty,classHour:r.value.classHour,topCover:r.value.topCover,cover:r.value.cover,description:r.value.description,showTaskRequire:r.value.showTaskRequire?1:2,authType:r.value.authType,enableCodeRepository:r.value.enableCodeRepository};r.value.enableCodeRepository&&(e.repositoryType=r.value.repositoryType,e.gitUrl=r.value.gitUrl),await bl(e),l?(m.success("项目更新成功！"),setTimeout(()=>{Q.push("/dashboard/analysis")},500)):m.success("保存成功！")}catch(e){throw console.error("更新失败：",e),m.error(e.message||"项目更新失败，请稍后重试"),e}finally{D.value=!1}},we=async(l,e=0)=>{var c,o;try{if(e!==1){const p=["dockerImage","viewTypes","secondType","taskId"],U=[];l.config.viewTypes.includes(1)?p.push("codeType"):U.push("codeType"),l.config.viewTypes.includes(2)?p.push("shellBegin"):U.push("shellBegin"),l.config.viewTypes.includes(3)?p.push("containerPort"):U.push("containerPort"),U.length>0&&((c=Z.value)==null||c.clearValidate(U)),await((o=Z.value)==null?void 0:o.validate(p))}if(!F.value){m.error("项目ID不存在，无法保存");return}const v={title:l.name,dockerImage:l.config.dockerImage,viewTypes:l.config.viewTypes.join(","),secondType:l.config.secondType,taskId:l.config.taskId?Number(l.config.taskId):void 0,codeType:l.config.codeType,shellBegin:l.config.shellBegin,containerPort:l.config.containerPort,containerPath:l.config.containerPath,projectId:F.value,envisDel:e};await Tl(v),e!==1?(l.isSaved=!0,m.success("实验环境保存成功！")):m.success("删除成功！")}catch(v){console.error("保存失败：",v),m.error(e===1?"删除失败":"请完善必填信息")}},Ce=l=>{const e=Re.value;if(!e)return;const c=e.viewTypes.indexOf(l);c>-1?(e.viewTypes.splice(c,1),l===1?e.codeType=void 0:l===2?e.shellBegin=void 0:l===3&&(e.containerPort=void 0,e.containerPath=void 0)):e.viewTypes.push(l),Ue(()=>{var o;(o=Z.value)==null||o.clearValidate(["viewTypes"])})},$e=(l,e)=>{if(!e)return!1;const c=typeof e=="string"?Number(e):e;return w.value.some(o=>{if(!o.config.taskId)return!1;const v=typeof o.config.taskId=="string"?Number(o.config.taskId):o.config.taskId;return o.id!==l&&v===c})},Gt=()=>{const l=String(Date.now()),e={id:l,name:`实验环境${w.value.length+1}`,isEditing:!1,isSaved:!1,config:{dockerImage:$.value||1,viewTypes:[],secondType:void 0,taskId:void 0,codeType:void 0,shellBegin:void 0,containerPort:void 0,containerPath:void 0}};w.value.push(e),E.value=l,m.success("添加实验环境成功")},Wt=async l=>{if(w.value.length===1){m.warning("至少保留一个实验环境");return}const e=w.value.findIndex(c=>c.id===l);if(e>-1){const c=w.value[e];c.isSaved&&await we(c,1),w.value.splice(e,1),E.value===l&&(E.value=w.value[0].id),c.isSaved||m.success("删除实验环境成功")}},Ae=l=>{l.isEditing=!0,K.value=l.name},He=l=>{K.value.trim()?(l.name=K.value.trim(),l.isEditing=!1,l.isSaved&&(m.success("重命名成功"),we(l))):m.warning("名称不能为空")},Xt=l=>{var c;l.replace(/<[^>]*>/g,"").trim()&&((c=fe.value)==null||c.clearValidate(["require"]))},Yt=l=>{var c;l.replace(/<[^>]*>/g,"").trim()&&((c=fe.value)==null||c.clearValidate(["referenceAnswer"]))},Zt=()=>{J.value=null,re.value=!0},el=l=>{J.value=l,re.value=!0},tl=async l=>{J.value?St(l):Pt(l),J.value=null,y.value.taskId&&await je(y.value.taskId)},ll=l=>{try{return JSON.parse(l.selects||"[]").map(c=>{const o=Object.keys(c)[0];return{label:o,content:c[o]}})}catch{return[]}},Oe=(l,e)=>l.answer.includes(e),N=_(null),al=l=>{N.value=l},sl=l=>{l.preventDefault()},ol=async(l,e)=>{if(l.preventDefault(),N.value!==null&&N.value!==e){const c=[...oe.value],[o]=c.splice(N.value,1);c.splice(e,0,o),c.forEach((v,p)=>{v.weight=p+1}),Lt(c);try{await jt(c),m.success("题目顺序已更新")}catch(v){m.error(v.message||"保存题目排序失败，请重试")}}N.value=null},nl=()=>{N.value=null},il=async l=>{const e=String(l);if(ge.value&&e==="questions"){if(!y.value.taskId){m.warning("请先保存创建任务后再添加题目");return}y.value.taskId&&await je(y.value.taskId)}if(Se.value&&e==="evaluation"&&!y.value.taskId){m.warning("请先保存创建任务后再配置评测设置");return}se.value=e},rl=(l,e)=>{l.select=e?1:2};return yl(()=>{const l=tt.query.id;l?(F.value=Number(l),Vt()):(m.error("缺少项目ID"),Q.back())}),(l,e)=>{const c=Vl,o=Nl,v=Dl,p=Bl,U=Al,T=Hl,S=$l,h=Ql,V=Ol,b=zl,W=Kl,Qe=Jl,M=Ml,ul=Gl,X=Yl,Ke=Xl,ze=Wl,Je=ta,ue=ea,Ge=la,We=Zl,B=sa,dl=na;return d(),g("div",ra,[e[106]||(e[106]=i("div",{class:"page-header"},[i("h2",null,"编辑全栈环境实训项目")],-1)),t(dl,{spinning:D.value},{default:a(()=>[i("div",ua,[i("div",da,[t(o,{current:q.value,class:"custom-steps"},{default:a(()=>[t(c,{title:"基本信息"}),t(c,{title:"代码仓库"}),t(c,{title:"任务关卡"}),t(c,{title:"实验环境"})]),_:1},8,["current"])]),q.value===0?(d(),g("div",pa,[e[50]||(e[50]=i("div",{class:"section-title"},[i("h3",null,"基本信息")],-1)),i("div",ca,[t(M,{ref_key:"formRef",ref:Y,model:r.value,rules:Pe,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:a(()=>[t(p,{label:"名称",name:"name",required:""},{default:a(()=>[t(v,{value:r.value.name,"onUpdate:value":e[0]||(e[0]=s=>r.value.name=s),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(S,null,{default:a(()=>[t(U,{span:12},{default:a(()=>[t(p,{label:"技能标签",name:"tag",required:"","label-col":{span:4},"wrapper-col":{span:20}},{default:a(()=>[t(v,{value:r.value.tag,"onUpdate:value":e[1]||(e[1]=s=>r.value.tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1})]),_:1}),t(U,{span:12},{default:a(()=>[t(p,{label:"领域类别",name:"fieldType",required:"","label-col":{span:4},"wrapper-col":{span:12}},{default:a(()=>[t(T,{value:r.value.fieldType,"onUpdate:value":e[2]||(e[2]=s=>r.value.fieldType=s),placeholder:"请选择领域类别",options:at},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(p,{label:"难度",name:"difficulty",required:""},{default:a(()=>[t(V,{value:r.value.difficulty,"onUpdate:value":e[3]||(e[3]=s=>r.value.difficulty=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[40]||(e[40]=[u("简单")])),_:1,__:[40]}),t(h,{value:2},{default:a(()=>e[41]||(e[41]=[u("适中")])),_:1,__:[41]}),t(h,{value:3},{default:a(()=>e[42]||(e[42]=[u("困难")])),_:1,__:[42]})]),_:1},8,["value"])]),_:1}),t(p,{label:"学时",name:"classHour"},{default:a(()=>[t(v,{value:r.value.classHour,"onUpdate:value":e[4]||(e[4]=s=>r.value.classHour=s),placeholder:"配置任务后自动计算",disabled:""},null,8,["value"])]),_:1}),t(p,{label:"顶部背景图",name:"topCover",required:""},{default:a(()=>[i("div",va,[i("div",fa,[t(W,{"before-upload":Mt,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:a(()=>[t(b,{loading:le.value},{default:a(()=>[le.value?(d(),g(P,{key:1},[u("上传中...")],64)):(d(),g(P,{key:0},[u("选择文件")],64))]),_:1},8,["loading"])]),_:1}),ee.value?(d(),g("div",ma,[i("img",{src:ee.value,alt:"顶部背景图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,ga)])):k("",!0)]),e[43]||(e[43]=i("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(p,{label:"封面图",name:"cover",required:""},{default:a(()=>[i("div",ya,[i("div",_a,[t(W,{"before-upload":Bt,"show-upload-list":!1,accept:"image/png,image/jpeg"},{default:a(()=>[t(b,{loading:ae.value},{default:a(()=>[ae.value?(d(),g(P,{key:1},[u("上传中...")],64)):(d(),g(P,{key:0},[u("选择文件")],64))]),_:1},8,["loading"])]),_:1}),te.value?(d(),g("div",ka,[i("img",{src:te.value,alt:"封面图预览",style:{"max-width":"290px","max-height":"218px","border-radius":"4px"}},null,8,ba)])):k("",!0)]),e[44]||(e[44]=i("div",{class:"upload-hint"}," 说明：支持上传png/jpeg等格式文件，文件大小不能超过12M,建议使用290*218像素。 ",-1))])]),_:1}),t(p,{label:"简介",name:"description"},{default:a(()=>[t(Ie,{modelValue:r.value.description,"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.description=s)},null,8,["modelValue"])]),_:1}),t(p,{label:"任务要求",name:"showTaskRequire"},{default:a(()=>[t(Qe,{checked:r.value.showTaskRequire,"onUpdate:checked":e[6]||(e[6]=s=>r.value.showTaskRequire=s)},{default:a(()=>e[45]||(e[45]=[u(" 显示任务要求（勾选后，将帮作为任务要求显示在任务项目政策面） ")])),_:1,__:[45]},8,["checked"])]),_:1})]),_:1},8,["model"])]),e[51]||(e[51]=i("div",{class:"section-title"},[i("h3",null,"培训公开范围")],-1)),i("div",Ta,[t(M,{ref_key:"trainingScopeFormRef",ref:xe,model:r.value,rules:Pe,layout:"horizontal","label-col":{span:2},"wrapper-col":{span:18}},{default:a(()=>[t(p,{label:"培训公开范围",name:"authType",required:""},{default:a(()=>[t(V,{value:r.value.authType,"onUpdate:value":e[7]||(e[7]=s=>r.value.authType=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[46]||(e[46]=[u("完全公开")])),_:1,__:[46]}),t(h,{value:2},{default:a(()=>e[47]||(e[47]=[u("全院公开")])),_:1,__:[47]}),t(h,{value:3},{default:a(()=>e[48]||(e[48]=[u("本单位公开")])),_:1,__:[48]}),t(h,{value:4},{default:a(()=>e[49]||(e[49]=[u("不公开")])),_:1,__:[49]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])])):k("",!0),q.value===1?(d(),g("div",ha,[i("div",wa,[i("div",Ca,[t(T,{value:r.value.repositoryType,"onUpdate:value":e[8]||(e[8]=s=>r.value.repositoryType=s),options:st,class:"repository-type-select"},null,8,["value"]),i("div",Ua,[e[52]||(e[52]=i("span",{class:"url-label"},"仓库地址：",-1)),t(v,{value:r.value.gitUrl,"onUpdate:value":e[9]||(e[9]=s=>r.value.gitUrl=s),placeholder:"请输入仓库地址",class:"url-input",disabled:A.value,onBlur:At},null,8,["value","disabled"])])]),i("div",qa,[i("div",Ia,[i("div",xa,[i("div",Ra,[e[53]||(e[53]=i("span",{class:"switch-label"},"代码仓库",-1)),t(ul,{checked:r.value.enableCodeRepository,disabled:r.value.enableCodeRepository,onChange:Dt},null,8,["checked","disabled"])]),r.value.enableCodeRepository?(d(),R(ze,{key:0},{overlay:a(()=>[t(Ke,{onClick:Ht},{default:a(()=>[t(X,{key:"newFile"},{default:a(()=>e[54]||(e[54]=[u("新建文件")])),_:1,__:[54]}),t(X,{key:"newFolder"},{default:a(()=>e[55]||(e[55]=[u("新建文件夹")])),_:1,__:[55]}),t(X,{key:"upload"},{default:a(()=>e[56]||(e[56]=[u("上传")])),_:1,__:[56]})]),_:1})]),default:a(()=>[t(b,{type:"primary",size:"small"},{default:a(()=>[t(n(Ze)),e[57]||(e[57]=u(" 新建 "))]),_:1,__:[57]})]),_:1})):k("",!0)]),r.value.enableCodeRepository?(d(),R(Rl,{key:0,"file-tree-data":n(ot),"expanded-keys":n(ve),"onUpdate:expandedKeys":e[10]||(e[10]=s=>de(ve)?ve.value=s:null),onSelect:n(rt),onMenuClick:Ot},null,8,["file-tree-data","expanded-keys","onSelect"])):k("",!0),r.value.enableCodeRepository?(d(),g("div",Pa,e[58]||(e[58]=[i("div",{class:"tips-title"},"提示：",-1),i("div",{class:"tips-content"}," 此处存放本实训所需的所有代码等相关文件，你可以通过以下： ",-1),i("div",{class:"tips-list"},[u(" 1、"),i("a",{href:"#",class:"tips-link"},"Gitee客户端"),u(" 上传已有文件来开始使用。 ")],-1),i("div",{class:"tips-list"}," 2、直接在平台上创建文件目录以及相关代码文件。 ",-1)]))):k("",!0)]),i("div",Fa,[r.value.enableCodeRepository?(d(),R(Pl,{key:0,"selected-file":n(nt),"highlighted-code":n(it)},null,8,["selected-file","highlighted-code"])):(d(),g("div",Sa," 在左侧代码仓库区域点击目录打开文件 "))])])])])):k("",!0),q.value===2?(d(),g("div",La,[i("div",ja,[i("div",Ea,[i("div",Na,[t(b,{type:"primary",onClick:e[11]||(e[11]=s=>n(ye)("kernel"))},{default:a(()=>e[59]||(e[59]=[u("添加内核链接任务")])),_:1,__:[59]}),t(b,{type:"primary",onClick:e[12]||(e[12]=s=>n(ye)("choice"))},{default:a(()=>e[60]||(e[60]=[u("添加选择题任务")])),_:1,__:[60]}),t(b,{type:"primary",onClick:e[13]||(e[13]=s=>n(ye)("programming"))},{default:a(()=>e[61]||(e[61]=[u("添加编程任务")])),_:1,__:[61]})])]),i("div",Va,[i("div",Ma,[i("div",Ba,"任务关卡 ("+x(n(L).length)+")",1),i("div",Da,[(d(!0),g(P,null,H(n(L),s=>(d(),g("div",{key:s.id,class:O(["list-item",{active:n(Fe)===s.id}]),onClick:f=>n(Le)(s.id)},[i("span",Aa,x(s.name),1),t(n(pe),{class:"delete-icon",onClick:Xe(f=>n(kt)(s.id),["stop"])},null,8,["onClick"])],10,$a))),128))])]),i("div",Ha,[n(Fe)?(d(),g("div",Oa,[t(We,{activeKey:n(se),onChange:il},_l({default:a(()=>[t(ue,{key:"task",tab:"关联任务"},{default:a(()=>[t(M,{ref_key:"taskLevelFormRef",ref:fe,model:n(y),rules:n(gt),layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(p,{label:"任务名称",name:"name",required:""},{default:a(()=>[t(v,{value:n(y).name,"onUpdate:value":e[14]||(e[14]=s=>n(y).name=s),placeholder:"请输入任务名称"},null,8,["value"])]),_:1}),t(p,{label:"学习资源",name:"source",required:""},{default:a(()=>[t(W,{"file-list":n(me),"onUpdate:fileList":e[15]||(e[15]=s=>de(me)?me.value=s:null),"custom-request":n(_e),onChange:n(ht),accept:".doc,.docx,.pdf,.ppt,.pptx,.mp4","max-count":10},{default:a(()=>[t(b,{type:"primary"},{default:a(()=>e[63]||(e[63]=[u("点击上传")])),_:1,__:[63]})]),_:1},8,["file-list","custom-request","onChange"]),e[64]||(e[64]=i("div",{class:"upload-hint"}," 说明：支持上传word、pdf、ppt、mp4等格式文件，每个文件大小不能超过500M。 ",-1))]),_:1,__:[64]}),t(p,{label:"任务要求",name:"require",required:""},{default:a(()=>[t(Ie,{modelValue:n(y).require,"onUpdate:modelValue":e[16]||(e[16]=s=>n(y).require=s),placeholder:"请输入任务要求",onChange:Xt},null,8,["modelValue"])]),_:1}),t(p,{label:"参考答案",name:"referenceAnswer",required:""},{default:a(()=>[t(Ie,{modelValue:n(y).referenceAnswer,"onUpdate:modelValue":e[17]||(e[17]=s=>n(y).referenceAnswer=s),placeholder:"请输入参考答案",onChange:Yt},null,8,["modelValue"])]),_:1}),t(p,{label:"难度系数",name:"difficulty",required:""},{default:a(()=>[t(V,{value:n(y).difficulty,"onUpdate:value":e[18]||(e[18]=s=>n(y).difficulty=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[65]||(e[65]=[u("简单")])),_:1,__:[65]}),t(h,{value:2},{default:a(()=>e[66]||(e[66]=[u("适中")])),_:1,__:[66]}),t(h,{value:3},{default:a(()=>e[67]||(e[67]=[u("困难")])),_:1,__:[67]})]),_:1},8,["value"])]),_:1}),t(p,{label:"技能标签",name:"tag",required:""},{default:a(()=>[t(v,{value:n(y).tag,"onUpdate:value":e[19]||(e[19]=s=>n(y).tag=s),placeholder:"请输入技能标签"},null,8,["value"])]),_:1}),n(_t)?(d(),R(p,{key:0,label:"内嵌链接",name:"jumpUrl",required:""},{default:a(()=>[t(v,{value:n(y).jumpUrl,"onUpdate:value":e[20]||(e[20]=s=>n(y).jumpUrl=s),placeholder:"请输入内嵌链接"},null,8,["value"])]),_:1})):k("",!0),t(p,{label:"任务学时",name:"classHour",required:""},{default:a(()=>[t(Je,{style:{width:"100%"},min:0,value:n(y).classHour,"onUpdate:value":e[21]||(e[21]=s=>n(y).classHour=s),placeholder:"请输入任务学时"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),n(ge)?(d(),R(ue,{key:"questions",tab:"题目"},{default:a(()=>[n(oe).length===0?(d(),g("div",Qa,[t(Ge,{description:"暂无题目，请点击右上方按钮新增题目"})])):(d(),g("div",Ka,[(d(!0),g(P,null,H(n(oe),(s,f)=>(d(),g("div",{key:s.id,class:O(["question-item",{dragging:N.value===f}]),draggable:"true",onDragstart:I=>al(f),onDragover:sl,onDrop:I=>ol(I,f),onDragend:nl},[i("div",Ja,[i("div",Ga,[t(n(aa),{class:"drag-handle"}),i("span",Wa,"题目"+x(f+1),1)]),i("div",Xa,[t(n(et),{class:"edit-icon",onClick:I=>el(s)},null,8,["onClick"]),t(n(pe),{class:"delete-icon",onClick:I=>n(Ft)(s.id)},null,8,["onClick"])])]),i("div",Ya,[s.name?(d(),g("div",Za,[u(x(f+1)+"、 ",1),i("div",{innerHTML:s.name},null,8,es)])):(d(),g("div",ts,"暂无题干"))]),i("div",ls,[(d(!0),g(P,null,H(ll(s),(I,pl)=>(d(),g("div",{key:pl,class:O(["option-row",{"is-correct":Oe(s,I.label)}])},[i("span",as,x(I.label)+".",1),i("span",ss,x(I.content),1),Oe(s,I.label)?(d(),g("span",os,"正确答案")):k("",!0)],2))),128))]),i("div",ns,[e[68]||(e[68]=i("div",{class:"explanation-label"},"答案解析：",-1)),i("div",is,[s.answerKey?(d(),g("span",rs,x(s.answerKey),1)):(d(),g("span",us,"暂无答案解析"))])])],42,za))),128))]))]),_:1})):k("",!0),n(Se)?(d(),R(ue,{key:"evaluation",tab:"评测设置"},{default:a(()=>[i("div",ds,[i("div",ps,[e[75]||(e[75]=i("div",{class:"section-header"},"评测文件",-1)),t(M,{ref_key:"evaluationFormRef",ref:mt,model:n(C),rules:n(yt),layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(p,{label:"评测时长限制",name:"timeLimitM",required:""},{default:a(()=>[t(Je,{value:n(C).timeLimitM,"onUpdate:value":e[22]||(e[22]=s=>n(C).timeLimitM=s),min:0,placeholder:"请输入评测时长限制",style:{width:"200px"}},null,8,["value"]),e[69]||(e[69]=i("span",{style:{"margin-left":"8px"}},"分钟",-1))]),_:1,__:[69]}),t(p,{label:"学员任务文件",name:"userFiles",required:""},{default:a(()=>[t(W,{"file-list":n(ke),"onUpdate:fileList":e[23]||(e[23]=s=>de(ke)?ke.value=s:null),"custom-request":n(_e),onChange:n(wt),accept:".js,.ts,.py,.java,.cpp,.c","max-count":10},{default:a(()=>[t(b,{type:"primary"},{default:a(()=>e[70]||(e[70]=[u("点击上传")])),_:1,__:[70]})]),_:1},8,["file-list","custom-request","onChange"]),e[71]||(e[71]=i("div",{class:"upload-hint"}," 说明：支持上传多个代码文件，每个文件大小不能超过500M。（学员评测基本任务时名称，查看效果页上需要编辑的文件类型） ",-1))]),_:1,__:[71]}),t(p,{label:"评测执行文件",name:"testValidateFiles",required:""},{default:a(()=>[t(W,{"file-list":n(be),"onUpdate:fileList":e[24]||(e[24]=s=>de(be)?be.value=s:null),"custom-request":n(_e),onChange:n(Ct),accept:".js,.ts,.py,.java,.cpp,.c","max-count":10},{default:a(()=>[t(b,{type:"primary"},{default:a(()=>e[72]||(e[72]=[u("点击上传")])),_:1,__:[72]})]),_:1},8,["file-list","custom-request","onChange"]),e[73]||(e[73]=i("div",{class:"upload-hint"},' 说明：支持上传多个代码文件，每个文件大小不能超过500M。（点击评测按钮时调用的文件，用于检验学员任务结果是否正确，可与"学员任务文件"一致） ',-1))]),_:1,__:[73]}),t(p,{label:"评测执行命令",name:"testValidateSh",required:""},{default:a(()=>[t(v,{value:n(C).testValidateSh,"onUpdate:value":e[25]||(e[25]=s=>n(C).testValidateSh=s),placeholder:"请输入评测执行命令，例如：python main.py"},null,8,["value"]),e[74]||(e[74]=i("div",{class:"upload-hint"}," （执行评测文件的命令，如：python main.py、node index.js、java Main 等） ",-1))]),_:1,__:[74]})]),_:1},8,["model","rules"])]),i("div",cs,[e[81]||(e[81]=i("div",{class:"section-header"},"评测规则",-1)),t(M,{layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(p,{label:"通关判定"},{default:a(()=>[t(V,{value:n(C).passType,"onUpdate:value":e[26]||(e[26]=s=>n(C).passType=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[76]||(e[76]=[u("实际输出与期望输出对比")])),_:1,__:[76]}),t(h,{value:2},{default:a(()=>e[77]||(e[77]=[u("实际输出满足规则")])),_:1,__:[77]})]),_:1},8,["value"])]),_:1}),t(p,{label:"空格处理"},{default:a(()=>[t(V,{value:n(C).blankCode,"onUpdate:value":e[27]||(e[27]=s=>n(C).blankCode=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[78]||(e[78]=[u("不忽略空格")])),_:1,__:[78]}),t(h,{value:2},{default:a(()=>e[79]||(e[79]=[u("忽略首尾空格")])),_:1,__:[79]}),t(h,{value:3},{default:a(()=>e[80]||(e[80]=[u("忽略所有空格(仅通过空格中自动添加所有空格进行对比)")])),_:1,__:[80]})]),_:1},8,["value"])]),_:1})]),_:1})]),i("div",vs,[e[90]||(e[90]=i("div",{class:"section-header"},"测试集",-1)),t(M,{layout:"horizontal","label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(p,{label:"得分规则"},{default:a(()=>[t(V,{value:n(C).scoreRule,"onUpdate:value":e[28]||(e[28]=s=>n(C).scoreRule=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[82]||(e[82]=[u("通过全部测试集（所有测试集都正确，才获取对应积分；否则得0学分）")])),_:1,__:[82]}),t(h,{value:2},{default:a(()=>e[83]||(e[83]=[u("通过部分测试集（选中的测试集全部正确，获取任务学分；否则得0学分）")])),_:1,__:[83]})]),_:1},8,["value"])]),_:1}),t(p,{label:"用例类型"},{default:a(()=>[i("div",fs,[t(V,{value:n(C).testValidateType,"onUpdate:value":e[29]||(e[29]=s=>n(C).testValidateType=s),class:"custom-radio"},{default:a(()=>[t(h,{value:1},{default:a(()=>e[84]||(e[84]=[u("文本")])),_:1,__:[84]}),t(h,{value:2},{default:a(()=>e[85]||(e[85]=[u("文件")])),_:1,__:[85]})]),_:1},8,["value"]),n(C).testValidateType===1?(d(),g("div",ms,[t(b,{type:"primary",onClick:n(Ut)},{default:a(()=>e[86]||(e[86]=[u("新增测试集")])),_:1,__:[86]},8,["onClick"]),t(b,{onClick:n(It)},{default:a(()=>e[87]||(e[87]=[u("一键删除测试用例")])),_:1,__:[87]},8,["onClick"]),t(b,{onClick:n(xt)},{default:a(()=>e[88]||(e[88]=[u("下载测试用例模板")])),_:1,__:[88]},8,["onClick"]),t(b,{onClick:n(Rt)},{default:a(()=>e[89]||(e[89]=[u("批量上传测试用例")])),_:1,__:[89]},8,["onClick"])])):k("",!0)])]),_:1}),n(C).testValidateType===1&&n(C).testContent.length>0?(d(),g("div",gs,[(d(!0),g(P,null,H(n(C).testContent,(s,f)=>(d(),g("div",{key:s.id,class:"test-case-item"},[t(Qe,{checked:s.select===1,onChange:I=>rl(s,I.target.checked),class:"test-case-checkbox"},null,8,["checked","onChange"]),i("span",ys,"测试集"+x(f+1),1),t(v,{value:s.args,"onUpdate:value":I=>s.args=I,placeholder:"请输入输入内容",class:"test-case-input"},null,8,["value","onUpdate:value"]),t(v,{value:s.answer,"onUpdate:value":I=>s.answer=I,placeholder:"请输入期望输出",class:"test-case-output"},null,8,["value","onUpdate:value"]),t(n(pe),{class:"delete-test-case",onClick:I=>n(qt)(s.id)},null,8,["onClick"])]))),128))])):k("",!0)]),_:1})])])]),_:1})):k("",!0)]),_:2},[n(ge)&&n(se)==="questions"?{name:"tabBarExtraContent",fn:a(()=>[t(b,{type:"primary",onClick:Zt},{default:a(()=>[t(n(Ze)),e[62]||(e[62]=u(" 新增题目 "))]),_:1,__:[62]})]),key:"0"}:void 0]),1032,["activeKey"]),n(se)!=="questions"?(d(),g("div",_s,[n(y).taskId?k("",!0):(d(),R(b,{key:0,onClick:n(Tt)},{default:a(()=>e[91]||(e[91]=[u("重置")])),_:1,__:[91]},8,["onClick"])),t(b,{type:"primary",onClick:n(bt)},{default:a(()=>[u(x(n(y).taskId?"更新":"保存"),1)]),_:1},8,["onClick"])])):k("",!0)])):(d(),g("div",ks,[t(Ge,{description:"请先添加任务关卡"})]))])])])])):k("",!0),q.value===3?(d(),g("div",bs,[i("div",Ts,[i("div",hs,[e[94]||(e[94]=i("h3",{class:"environment-title"},"实验环境",-1)),i("div",ws,[t(b,{type:"primary",onClick:Gt},{default:a(()=>e[92]||(e[92]=[u("添加实验环境")])),_:1,__:[92]}),t(b,null,{default:a(()=>e[93]||(e[93]=[u("设置")])),_:1,__:[93]})])]),t(M,{ref_key:"experimentFormRef",ref:Z,model:Re.value,rules:lt,"label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[t(We,{activeKey:E.value,"onUpdate:activeKey":e[35]||(e[35]=s=>E.value=s)},{default:a(()=>[(d(!0),g(P,null,H(w.value,s=>(d(),R(ue,{key:s.id},{tab:a(()=>[i("div",Cs,[s.isEditing?(d(),R(v,{key:0,value:K.value,"onUpdate:value":e[30]||(e[30]=f=>K.value=f),size:"small",style:{width:"120px"},onPressEnter:f=>He(s),onBlur:f=>He(s)},null,8,["value","onPressEnter","onBlur"])):(d(),g(P,{key:1},[i("span",{onDblclick:f=>Ae(s)},x(s.name),41,Us),t(ze,{trigger:["click"]},{overlay:a(()=>[t(Ke,null,{default:a(()=>[t(X,{onClick:f=>Ae(s)},{default:a(()=>[t(n(et)),e[95]||(e[95]=u(" 重命名 "))]),_:2,__:[95]},1032,["onClick"]),t(X,{onClick:f=>Wt(s.id)},{default:a(()=>[t(n(pe)),e[96]||(e[96]=u(" 删除 "))]),_:2,__:[96]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[t(n(oa),{class:"tab-more-icon",onClick:e[31]||(e[31]=Xe(()=>{},["stop"]))})]),_:2},1024)],64))])]),default:a(()=>[t(p,{label:"实验镜像",name:"dockerImage",required:""},{default:a(()=>[i("div",qs," 系统实验镜像默认为"+x(Et())+"。 ",1)]),_:1}),t(p,{label:"实验界面",name:"viewTypes",required:""},{default:a(()=>[i("div",Is,[i("div",{class:O(["interface-card",{active:s.config.viewTypes.includes(1)}]),onClick:e[32]||(e[32]=f=>Ce(1))},e[97]||(e[97]=[i("div",{class:"card-title"},"代码编辑器",-1),i("div",{class:"card-desc"},"提供代码编辑器，编辑器，调试器等工具",-1)]),2),i("div",{class:O(["interface-card",{active:s.config.viewTypes.includes(2)}]),onClick:e[33]||(e[33]=f=>Ce(2))},e[98]||(e[98]=[i("div",{class:"card-title"},"命令行终端",-1),i("div",{class:"card-desc"},"提供命令行窗口",-1)]),2),i("div",{class:O(["interface-card",{active:s.config.viewTypes.includes(3)}]),onClick:e[34]||(e[34]=f=>Ce(3))},e[99]||(e[99]=[i("div",{class:"card-title"},"容器内服务",-1),i("div",{class:"card-desc"},"直接预览容器内部Web服务",-1)]),2)])]),_:2},1024),t(p,{label:"附带环境",name:"secondType",required:""},{default:a(()=>[t(T,{value:s.config.secondType,"onUpdate:value":f=>s.config.secondType=f,placeholder:"请选择附带环境",allowClear:""},{default:a(()=>[t(B,{value:1},{default:a(()=>e[100]||(e[100]=[u("环境1")])),_:1,__:[100]}),t(B,{value:2},{default:a(()=>e[101]||(e[101]=[u("环境2")])),_:1,__:[101]})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024),t(p,{label:"任务关卡",name:"taskId",required:""},{default:a(()=>[t(T,{value:s.config.taskId,"onUpdate:value":f=>s.config.taskId=f,placeholder:"请选择任务关卡",allowClear:""},{default:a(()=>[(d(!0),g(P,null,H(n(L),f=>(d(),R(B,{key:f.taskId||f.id,value:f.taskId?String(f.taskId):void 0,disabled:!f.taskId||$e(s.id,f.taskId)},{default:a(()=>[u(x(f.name)+" ",1),f.taskId?$e(s.id,f.taskId)?(d(),g("span",Rs," (已被使用)")):k("",!0):(d(),g("span",xs," (未保存)"))]),_:2},1032,["value","disabled"]))),128))]),_:2},1032,["value","onUpdate:value"])]),_:2},1024),s.config.viewTypes.includes(1)?(d(),R(p,{key:0,label:"编程语言",name:"codeType",required:""},{default:a(()=>[t(T,{value:s.config.codeType,"onUpdate:value":f=>s.config.codeType=f,placeholder:"请选择编程语言",allowClear:""},{default:a(()=>[t(B,{value:"1"},{default:a(()=>e[102]||(e[102]=[u("Python")])),_:1,__:[102]}),t(B,{value:"2"},{default:a(()=>e[103]||(e[103]=[u("JavaScript")])),_:1,__:[103]}),t(B,{value:"3"},{default:a(()=>e[104]||(e[104]=[u("Java")])),_:1,__:[104]}),t(B,{value:"4"},{default:a(()=>e[105]||(e[105]=[u("C++")])),_:1,__:[105]})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)):k("",!0),s.config.viewTypes.includes(2)?(d(),R(p,{key:1,label:"开启时触发命令",name:"shellBegin",required:""},{default:a(()=>[t(v,{value:s.config.shellBegin,"onUpdate:value":f=>s.config.shellBegin=f,placeholder:"请输入命令"},null,8,["value","onUpdate:value"])]),_:2},1024)):k("",!0),s.config.viewTypes.includes(3)?(d(),R(p,{key:2,label:"容器端口",name:"containerPort",required:""},{default:a(()=>[t(v,{value:s.config.containerPort,"onUpdate:value":f=>s.config.containerPort=f,placeholder:"请输入容器端口"},null,8,["value","onUpdate:value"])]),_:2},1024)):k("",!0),s.config.viewTypes.includes(3)?(d(),R(p,{key:3,label:"路由"},{default:a(()=>[t(v,{value:s.config.containerPath,"onUpdate:value":f=>s.config.containerPath=f,placeholder:"请输入路由（选填）"},null,8,["value","onUpdate:value"])]),_:2},1024)):k("",!0),t(p,{"wrapper-col":{offset:4,span:18}},{default:a(()=>[t(b,{class:"w-full",type:"primary",onClick:f=>we(s)},{default:a(()=>[u(x(s.isSaved?"更新":"保存"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["activeKey"])]),_:1},8,["model"])])])):k("",!0),i("div",Ps,[t(b,{onClick:zt},{default:a(()=>[u(x(q.value===0?"返回":"上一步"),1)]),_:1}),t(b,{type:"primary",loading:D.value,onClick:Jt},{default:a(()=>[u(x(q.value===3?"完成":"下一步"),1)]),_:1},8,["loading"])])])]),_:1},8,["spinning"]),t(Fl,{open:z.value,"onUpdate:open":e[36]||(e[36]=s=>z.value=s),onConfirm:$t,onCancel:Ve},null,8,["open"]),t(Sl,{open:ne.value,"onUpdate:open":e[37]||(e[37]=s=>ne.value=s),"parent-path":Te.value,onConfirm:Qt},null,8,["open","parent-path"]),t(Ll,{open:ie.value,"onUpdate:open":e[38]||(e[38]=s=>ie.value=s),"parent-path":he.value,onConfirm:Kt},null,8,["open","parent-path"]),t(El,{open:re.value,"onUpdate:open":e[39]||(e[39]=s=>re.value=s),question:J.value,"project-id":F.value??void 0,"task-id":n(y).taskId,"existing-questions":n(oe),onConfirm:tl},null,8,["open","question","project-id","task-id","existing-questions"])])}}}),$s=ia(Fs,[["__scopeId","data-v-13b58de0"]]);export{$s as default};
