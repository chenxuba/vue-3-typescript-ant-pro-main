# å…¨é‡ç”¨æˆ·æ¥å£é›†æˆè¯´æ˜

## ğŸ“Œ æ¥å£ä¿¡æ¯

- **æ¥å£åœ°å€**: `/web/api/user/getAllUsers`
- **è¯·æ±‚æ–¹å¼**: POST
- **å®ç°ä½ç½®**: `src/api/system/personnel.ts`

## ğŸ“ è¯·æ±‚å‚æ•°

```typescript
interface AllUsersQueryParams {
  limit: number           // æ¯é¡µæ•°é‡
  page: number           // é¡µç 
  startNum: number       // èµ·å§‹æ•°é‡ (page - 1) * limit
  orderbyFiled?: string  // æ’åºå­—æ®µï¼Œä¾‹å¦‚: "name:desc,github:asc"
}
```

### ç¤ºä¾‹è¯·æ±‚å‚æ•°

```javascript
{
  "limit": 20,
  "page": 1,
  "startNum": 0,
  "orderbyFiled": "createTime:desc"
}
```

## ğŸ“¤ å“åº”æ•°æ®

```typescript
interface AllUsersResponse {
  result: number  // 1: æˆåŠŸ, 0: å¤±è´¥
  msg: string     // æ¶ˆæ¯
  data: {
    total: number        // æ€»æ•°
    pageSize: number     // æ¯é¡µæ•°é‡
    currentPage: number  // å½“å‰é¡µ
    list: AllUserModel[] // ç”¨æˆ·åˆ—è¡¨
  }
}
```

### ç”¨æˆ·æ•°æ®æ¨¡å‹

```typescript
interface AllUserModel {
  operatorID: number      // æ“ä½œå‘˜ID
  userID: string          // ç”¨æˆ·ID
  operatorName: string    // ç”¨æˆ·å§“å
  operatorTag: string     // æ“ä½œå‘˜æ ‡è¯†
  orgName: string         // ç»„ç»‡åç§°
  orgID: number           // ç»„ç»‡ID
  orgCode: string         // ç»„ç»‡ç¼–ç 
  tenantId: number        // ç§Ÿæˆ·ID
  tenantName: string      // ç§Ÿæˆ·åç§°
  gender: number          // æ€§åˆ« (1: ç”·, 2: å¥³)
  oEmail: string          // é‚®ç®±
  headPic: string         // å¤´åƒ
  status: number          // çŠ¶æ€
  isreal: number          // æ˜¯å¦å®å
  createTime: string      // åˆ›å»ºæ—¶é—´
  lastModifyTime: string  // æœ€åä¿®æ”¹æ—¶é—´
  // ... æ›´å¤šå­—æ®µ
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åœ¨ç»„ä»¶ä¸­å¯¼å…¥

```typescript
import { getAllUsersApi } from '~/api/system/personnel'
import type { AllUsersQueryParams, AllUsersResponse } from '~/api/system/personnel'
```

### 2. è°ƒç”¨æ¥å£

```typescript
const fetchUsers = async () => {
  try {
    const params: AllUsersQueryParams = {
      limit: 20,
      page: 1,
      startNum: 0,
      orderbyFiled: 'createTime:desc'
    }
    
    const response = await getAllUsersApi(params)
    
    if (response.result === 1) {
      console.log('ç”¨æˆ·åˆ—è¡¨:', response.data.list)
      console.log('æ€»æ•°:', response.data.total)
    } else {
      console.error('è·å–å¤±è´¥:', response.msg)
    }
  } catch (error) {
    console.error('è¯·æ±‚å¼‚å¸¸:', error)
  }
}
```

## ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹

å·²åœ¨ **äººå‘˜ç®¡ç†é¡µé¢** (`src/pages/dashboard/system-management/personnel-management.vue`) ä¸­å®Œæ•´é›†æˆï¼š

- âœ… æ”¯æŒåˆ†é¡µæŸ¥è¯¢
- âœ… æ”¯æŒå¤šå­—æ®µæœç´¢ï¼ˆç”¨æˆ·IDã€å§“åã€ç»„ç»‡åç§°ï¼‰
- âœ… è¡¨æ ¼å±•ç¤ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- âœ… å®Œæ•´çš„ç±»å‹æç¤º

## ğŸ”„ ä¸æ—§æ¥å£å¯¹æ¯”

| ç‰¹æ€§ | æ—§æ¥å£ (getPersonnelListApi) | æ–°æ¥å£ (getAllUsersApi) |
|------|----------------------------|------------------------|
| æ•°æ®é‡ | æœ‰é™ | å…¨é‡ (122,981æ¡) |
| å­—æ®µ | åŸºç¡€å­—æ®µ | å®Œæ•´å­—æ®µ |
| å®åä¿¡æ¯ | âŒ | âœ… |
| ç§Ÿæˆ·ä¿¡æ¯ | âŒ | âœ… |
| å¤´åƒ | âŒ | âœ… |

## ğŸ“‹ æ³¨æ„äº‹é¡¹

1. **å“åº”æ ¼å¼ç‰¹æ®Š**: æ­¤æ¥å£è¿”å›æ ¼å¼ä¸é¡¹ç›®æ ‡å‡†æ ¼å¼ç•¥æœ‰ä¸åŒï¼Œä½¿ç”¨ `result` è€Œé `code` å­—æ®µ
2. **æ•°æ®é‡å¤§**: æ€»æ•°æ®é‡è¶…è¿‡12ä¸‡æ¡ï¼Œå»ºè®®åˆç†è®¾ç½®åˆ†é¡µå‚æ•°
3. **æ’åºå­—æ®µ**: `orderbyFiled` æ”¯æŒå¤šå­—æ®µæ’åºï¼Œæ ¼å¼ä¸º `field1:order1,field2:order2`

## ğŸ¯ å¿«é€Ÿå¼€å§‹

è®¿é—®ç³»ç»Ÿçš„ **äººå‘˜ç®¡ç†** é¡µé¢å³å¯çœ‹åˆ°æ¥å£çš„å®é™…åº”ç”¨æ•ˆæœï¼

---

æ›´æ–°æ—¶é—´: 2025-10-18

