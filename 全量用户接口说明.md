# 全量用户接口集成说明

## 📌 接口信息

- **接口地址**: `/web/api/user/getAllUsers`
- **请求方式**: POST
- **实现位置**: `src/api/system/personnel.ts`

## 📝 请求参数

```typescript
interface AllUsersQueryParams {
  limit: number           // 每页数量
  page: number           // 页码
  startNum: number       // 起始数量 (page - 1) * limit
  orderbyFiled?: string  // 排序字段，例如: "name:desc,github:asc"
}
```

### 示例请求参数

```javascript
{
  "limit": 20,
  "page": 1,
  "startNum": 0,
  "orderbyFiled": "createTime:desc"
}
```

## 📤 响应数据

```typescript
interface AllUsersResponse {
  result: number  // 1: 成功, 0: 失败
  msg: string     // 消息
  data: {
    total: number        // 总数
    pageSize: number     // 每页数量
    currentPage: number  // 当前页
    list: AllUserModel[] // 用户列表
  }
}
```

### 用户数据模型

```typescript
interface AllUserModel {
  operatorID: number      // 操作员ID
  userID: string          // 用户ID
  operatorName: string    // 用户姓名
  operatorTag: string     // 操作员标识
  orgName: string         // 组织名称
  orgID: number           // 组织ID
  orgCode: string         // 组织编码
  tenantId: number        // 租户ID
  tenantName: string      // 租户名称
  gender: number          // 性别 (1: 男, 2: 女)
  oEmail: string          // 邮箱
  headPic: string         // 头像
  status: number          // 状态
  isreal: number          // 是否实名
  createTime: string      // 创建时间
  lastModifyTime: string  // 最后修改时间
  // ... 更多字段
}
```

## 🚀 使用方法

### 1. 在组件中导入

```typescript
import { getAllUsersApi } from '~/api/system/personnel'
import type { AllUsersQueryParams, AllUsersResponse } from '~/api/system/personnel'
```

### 2. 调用接口

```typescript
const fetchUsers = async () => {
  try {
    const params: AllUsersQueryParams = {
      limit: 20,
      page: 1,
      startNum: 0,
      orderbyFiled: 'createTime:desc'
    }
    
    const response = await getAllUsersApi(params)
    
    if (response.result === 1) {
      console.log('用户列表:', response.data.list)
      console.log('总数:', response.data.total)
    } else {
      console.error('获取失败:', response.msg)
    }
  } catch (error) {
    console.error('请求异常:', error)
  }
}
```

## 💡 实际应用示例

已在 **人员管理页面** (`src/pages/dashboard/system-management/personnel-management.vue`) 中完整集成：

- ✅ 支持分页查询
- ✅ 支持多字段搜索（用户ID、姓名、组织名称）
- ✅ 表格展示用户详细信息
- ✅ 完整的类型提示

## 🔄 与旧接口对比

| 特性 | 旧接口 (getPersonnelListApi) | 新接口 (getAllUsersApi) |
|------|----------------------------|------------------------|
| 数据量 | 有限 | 全量 (122,981条) |
| 字段 | 基础字段 | 完整字段 |
| 实名信息 | ❌ | ✅ |
| 租户信息 | ❌ | ✅ |
| 头像 | ❌ | ✅ |

## 📋 注意事项

1. **响应格式特殊**: 此接口返回格式与项目标准格式略有不同，使用 `result` 而非 `code` 字段
2. **数据量大**: 总数据量超过12万条，建议合理设置分页参数
3. **排序字段**: `orderbyFiled` 支持多字段排序，格式为 `field1:order1,field2:order2`

## 🎯 快速开始

访问系统的 **人员管理** 页面即可看到接口的实际应用效果！

---

更新时间: 2025-10-18

